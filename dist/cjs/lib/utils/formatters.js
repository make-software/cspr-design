"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatHash = exports.formatDateShort = exports.formatDate = exports.formatDistance = exports.formatTimestamp = exports.formatCurrency = exports.formatNumber = exports.formatBigNumbers = exports.FULL_PRECISION = exports.DEFAULT_PRECISION = exports.HashLength = void 0;
var intl_1 = require("@formatjs/intl");
var cache = (0, intl_1.createIntlCache)();
var intl = (0, intl_1.createIntl)({
    locale: 'en-US',
    messages: {
        'components.transaction_status': 'Success',
    },
}, cache);
var HashLength;
(function (HashLength) {
    HashLength[HashLength["FULL"] = 0] = "FULL";
    HashLength[HashLength["TINY"] = 5] = "TINY";
    HashLength[HashLength["LITTLE"] = 10] = "LITTLE";
    HashLength[HashLength["SMALL"] = 15] = "SMALL";
    HashLength[HashLength["MEDIUM"] = 20] = "MEDIUM";
    HashLength[HashLength["LARGE"] = 25] = "LARGE";
})(HashLength = exports.HashLength || (exports.HashLength = {}));
exports.DEFAULT_PRECISION = 5;
exports.FULL_PRECISION = 9;
var formatDistanceTokens = {
    lessThanXSeconds: 'second',
    xSeconds: 'second',
    lessThanXMinutes: 'minute',
    xMinutes: 'minute',
    xHours: 'hour',
    xDays: 'day',
    xMonths: 'month',
    xYears: 'year',
};
var BIG_NUMBERS_NOTATION_SYMBOL = [
    '',
    'k',
    'M',
    'B',
    'T',
    'Qa',
    'Qi',
    'Sx',
    'Sp',
    'O',
    'N',
    'D',
    'Ud',
    'Dd',
    'Td',
    'Qad',
    'Qid',
    'Sxd',
    'Spd',
    'Od',
    'Nd',
    'V',
    'Uv',
    'Dv',
    'Tv',
    'Qav',
    'Qiv',
    'Sxv',
    'Spv',
    'Ov',
    'Nv',
    'Tr',
    'Ut',
    'Dt',
    'G',
    'Tt', //Tretrigintillion
];
var formatBigNumbers = function (value) {
    // determines symbol
    var tier = (Math.log10(Math.abs(value)) / 3) | 0;
    var tiersWithoutSuffixes = [0, 1, 2];
    if (tiersWithoutSuffixes.includes(tier)) {
        return (0, exports.formatNumber)(value, {
            precision: 5,
        });
    }
    // get suffix and determine scale
    var suffix = BIG_NUMBERS_NOTATION_SYMBOL[tier];
    var scale = Math.pow(10, tier * 3);
    var scaledNumber = value / scale;
    return scaledNumber.toFixed(5) + suffix;
};
exports.formatBigNumbers = formatBigNumbers;
var formatNumber = function (value, _a) {
    var _b = _a === void 0 ? {} : _a, precision = _b.precision, notation = _b.notation, compactDisplay = _b.compactDisplay;
    return intl.formatNumber(value, {
        minimumFractionDigits: precision || 0,
        maximumFractionDigits: precision || 0,
        notation: notation,
        compactDisplay: compactDisplay,
    });
};
exports.formatNumber = formatNumber;
var formatCurrency = function (value, code, _a) {
    var _b = _a === void 0 ? {} : _a, precision = _b.precision;
    return intl.formatNumber(value, {
        style: 'currency',
        currency: code,
        minimumFractionDigits: precision,
        maximumFractionDigits: precision,
    });
};
exports.formatCurrency = formatCurrency;
var formatTimestamp = function (value, locale) {
    if (locale === void 0) { locale = 'en'; }
    var date = new Date(value);
    var nativeIntl = new Intl.DateTimeFormat(locale, {
        month: 'short',
        day: 'numeric',
        year: 'numeric',
        hour: 'numeric',
        minute: 'numeric',
        second: 'numeric',
        timeZoneName: 'short',
    });
    return "".concat(nativeIntl.format(date));
};
exports.formatTimestamp = formatTimestamp;
var formatDistance = function (token, count, options) {
    options = options || {};
    var locale = options.locale.code || 'en';
    return new Intl.RelativeTimeFormat(locale, {
        style: 'short',
    })
        .format(-count, formatDistanceTokens[token])
        .replace('.', '');
};
exports.formatDistance = formatDistance;
var formatDate = function (value) {
    var date = new Date(value);
    return "".concat(intl.formatDate(date, {
        month: 'short',
        day: 'numeric',
        year: 'numeric',
    }), ", ").concat(intl.formatTime(date, {
        hour: 'numeric',
        minute: 'numeric',
    }));
};
exports.formatDate = formatDate;
var formatDateShort = function (value) {
    var date = new Date(value);
    return "".concat(intl.formatDate(date, {
        month: 'short',
        day: 'numeric',
    }));
};
exports.formatDateShort = formatDateShort;
var formatHash = function (hash, visibleHashLength) {
    if (visibleHashLength === void 0) { visibleHashLength = HashLength.TINY; }
    var MIN_TRUNCATE_HASH_LENGTH = HashLength.TINY * 2 + 3;
    var _a = hash.split('-'), hashWithoutSuffix = _a[0], lastDigits = _a[1];
    var hashLength = hashWithoutSuffix.length;
    if (visibleHashLength === HashLength.FULL ||
        hashLength <= MIN_TRUNCATE_HASH_LENGTH) {
        return hash;
    }
    var firstPart = hashWithoutSuffix.substring(0, visibleHashLength);
    var secondPart = hashWithoutSuffix.substring(hashLength - visibleHashLength);
    var truncatedHash = "".concat(firstPart, "...").concat(secondPart);
    return lastDigits ? "".concat(truncatedHash, "-").concat(lastDigits) : "".concat(truncatedHash);
};
exports.formatHash = formatHash;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWF0dGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9saWIvdXRpbHMvZm9ybWF0dGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx1Q0FBNkQ7QUFFN0QsSUFBTSxLQUFLLEdBQUcsSUFBQSxzQkFBZSxHQUFFLENBQUM7QUFDaEMsSUFBTSxJQUFJLEdBQUcsSUFBQSxpQkFBVSxFQUNyQjtJQUNFLE1BQU0sRUFBRSxPQUFPO0lBQ2YsUUFBUSxFQUFFO1FBQ1IsK0JBQStCLEVBQUUsU0FBUztLQUMzQztDQUNGLEVBQ0QsS0FBSyxDQUNOLENBQUM7QUFFRixJQUFZLFVBT1g7QUFQRCxXQUFZLFVBQVU7SUFDcEIsMkNBQVEsQ0FBQTtJQUNSLDJDQUFRLENBQUE7SUFDUixnREFBVyxDQUFBO0lBQ1gsOENBQVUsQ0FBQTtJQUNWLGdEQUFXLENBQUE7SUFDWCw4Q0FBVSxDQUFBO0FBQ1osQ0FBQyxFQVBXLFVBQVUsR0FBVixrQkFBVSxLQUFWLGtCQUFVLFFBT3JCO0FBRVksUUFBQSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7QUFDdEIsUUFBQSxjQUFjLEdBQUcsQ0FBQyxDQUFDO0FBRWhDLElBQU0sb0JBQW9CLEdBQUc7SUFDM0IsZ0JBQWdCLEVBQUUsUUFBUTtJQUMxQixRQUFRLEVBQUUsUUFBUTtJQUNsQixnQkFBZ0IsRUFBRSxRQUFRO0lBQzFCLFFBQVEsRUFBRSxRQUFRO0lBQ2xCLE1BQU0sRUFBRSxNQUFNO0lBQ2QsS0FBSyxFQUFFLEtBQUs7SUFDWixPQUFPLEVBQUUsT0FBTztJQUNoQixNQUFNLEVBQUUsTUFBTTtDQUNmLENBQUM7QUFFRixJQUFNLDJCQUEyQixHQUFHO0lBQ2xDLEVBQUU7SUFDRixHQUFHO0lBQ0gsR0FBRztJQUNILEdBQUc7SUFDSCxHQUFHO0lBQ0gsSUFBSTtJQUNKLElBQUk7SUFDSixJQUFJO0lBQ0osSUFBSTtJQUNKLEdBQUc7SUFDSCxHQUFHO0lBQ0gsR0FBRztJQUNI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QUssRUFBRSxPQUFPO1FBQ2QsR0FBRyxFQUFFLFNBQVM7S0FDZixDQUFDLENBQUUsQ0FBQztBQUNQLENBQUMsQ0FBQztBQU5XLFFBQUEsZUFBZSxtQkFNMUI7QUFFSyxJQUFNLFVBQVUsR0FBRyxVQUN4QixJQUFZLEVBQ1osaUJBQStDO0lBQS9DLGtDQUFBLEVBQUEsb0JBQWdDLFVBQVUsQ0FBQyxJQUFJO0lBRS9DLElBQU0sd0JBQXdCLEdBQUcsVUFBVSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRW5ELElBQUEsS0FBa0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBaEQsaUJBQWlCLFFBQUEsRUFBRSxVQUFVLFFBQW1CLENBQUM7SUFFeEQsSUFBTSxVQUFVLEdBQUcsaUJBQWlCLENBQUMsTUFBTSxDQUFDO0lBRTVDLElBQ0UsaUJBQWlCLEtBQUssVUFBVSxDQUFDLElBQUk7UUFDckMsVUFBVSxJQUFJLHdCQUF3QixFQUN0QztRQUNBLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFFRCxJQUFNLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFDcEUsSUFBTSxVQUFVLEdBQUcsaUJBQWlCLENBQUMsU0FBUyxDQUM1QyxVQUFVLEdBQUcsaUJBQWlCLENBQy9CLENBQUM7SUFFRixJQUFNLGFBQWEsR0FBRyxVQUFHLFNBQVMsZ0JBQU0sVUFBVSxDQUFFLENBQUM7SUFFckQsT0FBTyxVQUFVLENBQUMsQ0FBQyxDQUFDLFVBQUcsYUFBYSxjQUFJLFVBQVUsQ0FBRSxDQUFDLENBQUMsQ0FBQyxVQUFHLGFBQWEsQ0FBRSxDQUFDO0FBQzVFLENBQUMsQ0FBQztBQXpCVyxRQUFBLFVBQVUsY0F5QnJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSW50bCwgY3JlYXRlSW50bENhY2hlIH0gZnJvbSAnQGZvcm1hdGpzL2ludGwnO1xyXG5cclxuY29uc3QgY2FjaGUgPSBjcmVhdGVJbnRsQ2FjaGUoKTtcclxuY29uc3QgaW50bCA9IGNyZWF0ZUludGwoXHJcbiAge1xyXG4gICAgbG9jYWxlOiAnZW4tVVMnLFxyXG4gICAgbWVzc2FnZXM6IHtcclxuICAgICAgJ2NvbXBvbmVudHMudHJhbnNhY3Rpb25fc3RhdHVzJzogJ1N1Y2Nlc3MnLFxyXG4gICAgfSxcclxuICB9LFxyXG4gIGNhY2hlXHJcbik7XHJcblxyXG5leHBvcnQgZW51bSBIYXNoTGVuZ3RoIHtcclxuICBGVUxMID0gMCxcclxuICBUSU5ZID0gNSxcclxuICBMSVRUTEUgPSAxMCxcclxuICBTTUFMTCA9IDE1LFxyXG4gIE1FRElVTSA9IDIwLFxyXG4gIExBUkdFID0gMjUsXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1BSRUNJU0lPTiA9IDU7XHJcbmV4cG9ydCBjb25zdCBGVUxMX1BSRUNJU0lPTiA9IDk7XHJcblxyXG5jb25zdCBmb3JtYXREaXN0YW5jZVRva2VucyA9IHtcclxuICBsZXNzVGhhblhTZWNvbmRzOiAnc2Vjb25kJyxcclxuICB4U2Vjb25kczogJ3NlY29uZCcsXHJcbiAgbGVzc1RoYW5YTWludXRlczogJ21pbnV0ZScsXHJcbiAgeE1pbnV0ZXM6ICdtaW51dGUnLFxyXG4gIHhIb3VyczogJ2hvdXInLFxyXG4gIHhEYXlzOiAnZGF5JyxcclxuICB4TW9udGhzOiAnbW9udGgnLFxyXG4gIHhZZWFyczogJ3llYXInLFxyXG59O1xyXG5cclxuY29uc3QgQklHX05VTUJFUlNfTk9UQVRJT05fU1lNQk9MID0gW1xyXG4gICcnLFxyXG4gICdrJywgLy9UaG91c2FuZFxyXG4gICdNJywgLy9NaWxsaW9uXHJcbiAgJ0InLCAvL0JpbGxpb25cclxuICAnVCcsIC8vVHJpbGxpb25cclxuICAnUWEnLCAvL1F1YWRyaWxsaW9uXHJcbiAgJ1FpJywgLy9RdWludGlsbGlvblxyXG4gICdTeCcsIC8vU2V4dGlsbGlvblxyXG4gICdTcCcsIC8vU2VwdGlsbGlvblxyXG4gICdPJywgLy9PY3RpbGxpb25cclxuICAnTicsIC8vTm9uaWxsaW9uXHJcbiAgJ0QnLCAvL0RlY2lsbGlvblxyXG4gICdVZCcsIC8vVW5kZWNpbGxpb25cclxuICAnRGQnLCAvL0R1b2RlY2lsbGlvblxyXG4gICdUZCcsIC8vVHJlZGVjaWxsaW9uXHJcbiAgJ1FhZCcsIC8vUXVhdHR1b3JkZWNpbGxpb25cclxuICAnUWlkJywgLy9RdWluZGVjaWxsaW9uXHJcbiAgJ1N4ZCcsIC8vU2V4ZGVjaWxsaW9uXHJcbiAgJ1NwZCcsIC8vU2VwdGVuZGVjaWxsaW9uXHJcbiAgJ09kJywgLy9PY3RvZGVjaWxsaW9uXHJcbiAgJ05kJywgLy9Ob3ZlbWRlY2lsbGlvblxyXG4gICdWJywgLy9WaWdpbnRpbGxpb25cclxuICAnVXYnLCAvL1VudmlnaW50aWxsaW9uXHJcbiAgJ0R2JywgLy9EdW92aWdpbnRpbGxpb25cclxuICAnVHYnLCAvL1RyZXZpZ2ludGlsbGlvblxyXG4gICdRYXYnLCAvL1F1YXR0dW9ydmlnaW50aWxsaW9uXHJcbiAgJ1FpdicsIC8vUXVpbnZpZ2ludGlsbGlvblxyXG4gICdTeHYnLCAvL1NleHZpZ2ludGlsbGlvblxyXG4gICdTcHYnLCAvL1NlcHRlbnZpZ2ludGlsbGlvblxyXG4gICdPdicsIC8vT2N0b3ZpZ2ludGlsbGlvblxyXG4gICdOdicsIC8vTm92ZW12aWdpbnRpbGxpb25cclxuICAnVHInLCAvL1RyaWdpbnRpbGxpb25cclxuICAnVXQnLCAvL1VudHJpZ2ludGlsbGlvblxyXG4gICdEdCcsIC8vRHVvdHJpZ2ludGlsbGlvblxyXG4gICdHJywgLy9Hb29nb2xcclxuICAnVHQnLCAvL1RyZXRyaWdpbnRpbGxpb25cclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtYXRCaWdOdW1iZXJzID0gKHZhbHVlKSA9PiB7XHJcbiAgLy8gZGV0ZXJtaW5lcyBzeW1ib2xcclxuICBjb25zdCB0aWVyID0gKE1hdGgubG9nMTAoTWF0aC5hYnModmFsdWUpKSAvIDMpIHwgMDtcclxuICBjb25zdCB0aWVyc1dpdGhvdXRTdWZmaXhlcyA9IFswLCAxLCAyXTtcclxuXHJcbiAgaWYgKHRpZXJzV2l0aG91dFN1ZmZpeGVzLmluY2x1ZGVzKHRpZXIpKSB7XHJcbiAgICByZXR1cm4gZm9ybWF0TnVtYmVyKHZhbHVlLCB7XHJcbiAgICAgIHByZWNpc2lvbjogNSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gZ2V0IHN1ZmZpeCBhbmQgZGV0ZXJtaW5lIHNjYWxlXHJcbiAgY29uc3Qgc3VmZml4ID0gQklHX05VTUJFUlNfTk9UQVRJT05fU1lNQk9MW3RpZXJdO1xyXG4gIGNvbnN0IHNjYWxlID0gTWF0aC5wb3coMTAsIHRpZXIgKiAzKTtcclxuXHJcbiAgY29uc3Qgc2NhbGVkTnVtYmVyID0gdmFsdWUgLyBzY2FsZTtcclxuXHJcbiAgcmV0dXJuIHNjYWxlZE51bWJlci50b0ZpeGVkKDUpICsgc3VmZml4O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1hdE51bWJlciA9IChcclxuICB2YWx1ZTogbnVtYmVyIHwgc3RyaW5nLFxyXG4gIHtcclxuICAgIHByZWNpc2lvbixcclxuICAgIG5vdGF0aW9uLFxyXG4gICAgY29tcGFjdERpc3BsYXksXHJcbiAgfToge1xyXG4gICAgcHJlY2lzaW9uPzogbnVtYmVyO1xyXG4gICAgbm90YXRpb24/OiAnY29tcGFjdCcgfCAnc3RhbmRhcmQnO1xyXG4gICAgY29tcGFjdERpc3BsYXk/OiAnc2hvcnQnIHwgJ2xvbmcnO1xyXG4gIH0gPSB7fVxyXG4pOiBzdHJpbmcgPT4ge1xyXG4gIHJldHVybiBpbnRsLmZvcm1hdE51bWJlcih2YWx1ZSBhcyBudW1iZXIsIHtcclxuICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogcHJlY2lzaW9uIHx8IDAsXHJcbiAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IHByZWNpc2lvbiB8fCAwLFxyXG4gICAgbm90YXRpb24sXHJcbiAgICBjb21wYWN0RGlzcGxheSxcclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtYXRDdXJyZW5jeSA9IChcclxuICB2YWx1ZTogbnVtYmVyIHwgc3RyaW5nLFxyXG4gIGNvZGU6IHN0cmluZyxcclxuICB7XHJcbiAgICBwcmVjaXNpb24sXHJcbiAgfToge1xyXG4gICAgcHJlY2lzaW9uPzogbnVtYmVyO1xyXG4gIH0gPSB7fVxyXG4pOiBzdHJpbmcgPT4ge1xyXG4gIHJldHVybiBpbnRsLmZvcm1hdE51bWJlcih2YWx1ZSBhcyBudW1iZXIsIHtcclxuICAgIHN0eWxlOiAnY3VycmVuY3knLFxyXG4gICAgY3VycmVuY3k6IGNvZGUsXHJcbiAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IHByZWNpc2lvbixcclxuICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogcHJlY2lzaW9uLFxyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1hdFRpbWVzdGFtcCA9ICh2YWx1ZTogc3RyaW5nLCBsb2NhbGUgPSAnZW4nKTogc3RyaW5nID0+IHtcclxuICBjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xyXG4gIGNvbnN0IG5hdGl2ZUludGwgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NhbGUsIHtcclxuICAgIG1vbnRoOiAnc2hvcnQnLFxyXG4gICAgZGF5OiAnbnVtZXJpYycsXHJcbiAgICB5ZWFyOiAnbnVtZXJpYycsXHJcbiAgICBob3VyOiAnbnVtZXJpYycsXHJcbiAgICBtaW51dGU6ICdudW1lcmljJyxcclxuICAgIHNlY29uZDogJ251bWVyaWMnLFxyXG4gICAgdGltZVpvbmVOYW1lOiAnc2hvcnQnLFxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gYCR7bmF0aXZlSW50bC5mb3JtYXQoZGF0ZSl9YDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtYXREaXN0YW5jZSA9ICh0b2tlbiwgY291bnQsIG9wdGlvbnMpID0+IHtcclxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICBjb25zdCBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZS5jb2RlIHx8ICdlbic7XHJcblxyXG4gIHJldHVybiBuZXcgKEludGwgYXMgYW55KS5SZWxhdGl2ZVRpbWVGb3JtYXQobG9jYWxlLCB7XHJcbiAgICBzdHlsZTogJ3Nob3J0JyxcclxuICB9KVxyXG4gICAgLmZvcm1hdCgtY291bnQsIGZvcm1hdERpc3RhbmNlVG9rZW5zW3Rva2VuXSlcclxuICAgIC5yZXBsYWNlKCcuJywgJycpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1hdERhdGUgPSAodmFsdWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcclxuICByZXR1cm4gYCR7aW50bC5mb3JtYXREYXRlKGRhdGUsIHtcclxuICAgIG1vbnRoOiAnc2hvcnQnLFxyXG4gICAgZGF5OiAnbnVtZXJpYycsXHJcbiAgICB5ZWFyOiAnbnVtZXJpYycsXHJcbiAgfSl9LCAke2ludGwuZm9ybWF0VGltZShkYXRlLCB7XHJcbiAgICBob3VyOiAnbnVtZXJpYycsXHJcbiAgICBtaW51dGU6ICdudW1lcmljJyxcclxuICB9KX1gO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1hdERhdGVTaG9ydCA9ICh2YWx1ZTogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICBjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xyXG4gIHJldHVybiBgJHtpbnRsLmZvcm1hdERhdGUoZGF0ZSwge1xyXG4gICAgbW9udGg6ICdzaG9ydCcsXHJcbiAgICBkYXk6ICdudW1lcmljJyxcclxuICB9KX1gO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1hdEhhc2ggPSAoXHJcbiAgaGFzaDogc3RyaW5nLFxyXG4gIHZpc2libGVIYXNoTGVuZ3RoOiBIYXNoTGVuZ3RoID0gSGFzaExlbmd0aC5USU5ZXHJcbikgPT4ge1xyXG4gIGNvbnN0IE1JTl9UUlVOQ0FURV9IQVNIX0xFTkdUSCA9IEhhc2hMZW5ndGguVElOWSAqIDIgKyAzO1xyXG5cclxuICBjb25zdCBbaGFzaFdpdGhvdXRTdWZmaXgsIGxhc3REaWdpdHNdID0gaGFzaC5zcGxpdCgnLScpO1xyXG5cclxuICBjb25zdCBoYXNoTGVuZ3RoID0gaGFzaFdpdGhvdXRTdWZmaXgubGVuZ3RoO1xyXG5cclxuICBpZiAoXHJcbiAgICB2aXNpYmxlSGFzaExlbmd0aCA9PT0gSGFzaExlbmd0aC5GVUxMIHx8XHJcbiAgICBoYXNoTGVuZ3RoIDw9IE1JTl9UUlVOQ0FURV9IQVNIX0xFTkdUSFxyXG4gICkge1xyXG4gICAgcmV0dXJuIGhhc2g7XHJcbiAgfVxyXG5cclxuICBjb25zdCBmaXJzdFBhcnQgPSBoYXNoV2l0aG91dFN1ZmZpeC5zdWJzdHJpbmcoMCwgdmlzaWJsZUhhc2hMZW5ndGgpO1xyXG4gIGNvbnN0IHNlY29uZFBhcnQgPSBoYXNoV2l0aG91dFN1ZmZpeC5zdWJzdHJpbmcoXHJcbiAgICBoYXNoTGVuZ3RoIC0gdmlzaWJsZUhhc2hMZW5ndGhcclxuICApO1xyXG5cclxuICBjb25zdCB0cnVuY2F0ZWRIYXNoID0gYCR7Zmlyc3RQYXJ0fS4uLiR7c2Vjb25kUGFydH1gO1xyXG5cclxuICByZXR1cm4gbGFzdERpZ2l0cyA/IGAke3RydW5jYXRlZEhhc2h9LSR7bGFzdERpZ2l0c31gIDogYCR7dHJ1bmNhdGVkSGFzaH1gO1xyXG59O1xyXG5cclxuIl19