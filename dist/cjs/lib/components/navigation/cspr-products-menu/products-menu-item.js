"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProductsMenuItem = exports.StyledBodyText = exports.ProductItemWrapper = exports.ThemeModeType = void 0;
var tslib_1 = require("tslib");
var jsx_runtime_1 = require("react/jsx-runtime");
var badge_1 = require("../../badge/badge");
var caption_text_1 = tslib_1.__importDefault(require("../../caption-text/caption-text"));
var flex_row_1 = tslib_1.__importDefault(require("../../flex-row/flex-row"));
var flex_column_1 = tslib_1.__importDefault(require("../../flex-column/flex-column"));
var styled_components_1 = tslib_1.__importStar(require("styled-components"));
var match_media_1 = require("../../../utils/match-media");
var svg_icon_1 = tslib_1.__importDefault(require("../../svg-icon/svg-icon"));
var body_text_1 = tslib_1.__importDefault(require("../../body-text/body-text"));
var ThemeModeType;
(function (ThemeModeType) {
    ThemeModeType["light"] = "light";
    ThemeModeType["dark"] = "dark";
})(ThemeModeType = exports.ThemeModeType || (exports.ThemeModeType = {}));
exports.ProductItemWrapper = styled_components_1.default.span(function (_a) {
    var theme = _a.theme, isOpen = _a.isOpen, selected = _a.selected, disabled = _a.disabled;
    return theme.withMedia(tslib_1.__assign(tslib_1.__assign({ display: 'flex', flex: '1 1 auto', justifyContent: 'center', alignItems: 'center', padding: ['8px 12px', '8px 12px', '16px'], width: ['208px', '208px', '172px'], height: ['56px', '56px', '137px'], '&:hover': {
            borderRadius: theme.borderRadius.base,
            background: theme.styleguideColors.backgroundSecondary,
        } }, (selected && {
        background: theme.styleguideColors.backgroundSecondary,
        pointerEvents: 'none',
    })), (disabled && {
        color: theme.styleguideColors.contentSecondary,
        '&:hover > *': {
            pointerEvents: 'none',
            color: theme.styleguideColors.contentSecondary,
        },
    })));
});
exports.StyledBodyText = (0, styled_components_1.default)(body_text_1.default)(function (_a) {
    var theme = _a.theme;
    return theme.withMedia({
        whiteSpace: 'nowrap',
        color: theme.styleguideColors.contentPrimary,
    });
});
var defaultIcon = (_a = {},
    _a[ThemeModeType.light] = 'assets/icons/ic-sand-clock-light.svg',
    _a[ThemeModeType.dark] = 'assets/icons/ic-sand-clock-dark.svg',
    _a);
var ProductsMenuItem = function (_a) {
    var nameLabel = _a.nameLabel, link = _a.link, icon = _a.icon, descriptionText = _a.descriptionText, _b = _a.selected, selected = _b === void 0 ? false : _b, newBadgeLabel = _a.newBadgeLabel, comingSoonBadgeLabel = _a.comingSoonBadgeLabel, badge = _a.badge;
    var theme = (0, styled_components_1.useTheme)();
    var itemBadge;
    if (badge) {
        itemBadge = (0, jsx_runtime_1.jsx)(badge_1.Badge, tslib_1.__assign({}, badge, { lineHeight: 'xxs' }));
    }
    else if (comingSoonBadgeLabel) {
        itemBadge = ((0, jsx_runtime_1.jsx)(badge_1.Badge, { label: comingSoonBadgeLabel, variation: 'violet', lineHeight: 'xxs' }));
    }
    else if (newBadgeLabel) {
        itemBadge = ((0, jsx_runtime_1.jsx)(badge_1.Badge, { label: newBadgeLabel, variation: 'green', lineHeight: 'xxs' }));
    }
    else {
        itemBadge = ((0, jsx_runtime_1.jsx)(caption_text_1.default, tslib_1.__assign({ size: 2, variation: 'lightGray' }, { children: descriptionText })));
    }
    var mobile = ((0, jsx_runtime_1.jsx)(flex_row_1.default, tslib_1.__assign({ itemsSpacing: 8, justify: 'flex-start', grow: 1 }, { children: (0, jsx_runtime_1.jsxs)(flex_row_1.default, tslib_1.__assign({ itemsSpacing: 8, grow: 1 }, { children: [(0, jsx_runtime_1.jsx)(svg_icon_1.default, { src: icon || defaultIcon[theme.themeName], size: 32 }), (0, jsx_runtime_1.jsxs)(flex_column_1.default, tslib_1.__assign({ itemsSpacing: 4 }, { children: [itemBadge, (0, jsx_runtime_1.jsx)(exports.StyledBodyText, tslib_1.__assign({ size: 1 }, { children: nameLabel }))] }))] })) })));
    var desktop = ((0, jsx_runtime_1.jsxs)(flex_column_1.default, tslib_1.__assign({ itemsSpacing: 16, align: 'center', justify: 'center', grow: 1 }, { children: [(0, jsx_runtime_1.jsx)(svg_icon_1.default, { src: icon || defaultIcon[theme.themeName], size: 48 }), (0, jsx_runtime_1.jsxs)(flex_column_1.default, tslib_1.__assign({ itemsSpacing: 4, align: 'center' }, { children: [itemBadge, (0, jsx_runtime_1.jsx)(exports.StyledBodyText, tslib_1.__assign({ size: 1 }, { children: nameLabel }))] }))] })));
    var productMedia = (0, match_media_1.useMatchMedia)([mobile, mobile, desktop], []);
    return ((0, jsx_runtime_1.jsx)(exports.ProductItemWrapper, tslib_1.__assign({ onClick: function () { return !comingSoonBadgeLabel && window.open(link, '_blank'); }, selected: selected, disabled: !!comingSoonBadgeLabel }, { children: productMedia })));
};
exports.ProductsMenuItem = ProductsMenuItem;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdHMtbWVudS1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb21wb25lbnRzL25hdmlnYXRpb24vY3Nwci1wcm9kdWN0cy1tZW51L3Byb2R1Y3RzLW1lbnUtaXRlbS50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsMkNBQXNEO0FBQ3RELHlGQUEwRDtBQUMxRCw2RUFBOEM7QUFFOUMsc0ZBQXVEO0FBQ3ZELDZFQUFxRDtBQUNyRCwwREFBMkQ7QUFDM0QsNkVBQThDO0FBQzlDLGdGQUFpRDtBQWFqRCxJQUFZLGFBR1g7QUFIRCxXQUFZLGFBQWE7SUFDdkIsZ0NBQWUsQ0FBQTtJQUNmLDhCQUFhLENBQUE7QUFDZixDQUFDLEVBSFcsYUFBYSxHQUFiLHFCQUFhLEtBQWIscUJBQWEsUUFHeEI7QUFFWSxRQUFBLGtCQUFrQixHQUFHLDJCQUFNLENBQUMsSUFBSSxDQUkxQyxVQUFDLEVBQXFDO1FBQW5DLEtBQUssV0FBQSxFQUFFLE1BQU0sWUFBQSxFQUFFLFFBQVEsY0FBQSxFQUFFLFFBQVEsY0FBQTtJQUNyQyxPQUFBLEtBQUssQ0FBQyxTQUFTLHFDQUNiLE9BQU8sRUFBRSxNQUFNLEVBQ2YsSUFBSSxFQUFFLFVBQVUsRUFDaEIsY0FBYyxFQUFFLFFBQVEsRUFDeEIsVUFBVSxFQUFFLFFBQVEsRUFDcEIsT0FBTyxFQUFFLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxNQUFNLENBQUMsRUFDekMsS0FBSyxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFDbEMsTUFBTSxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFFakMsU0FBUyxFQUFFO1lBQ1QsWUFBWSxFQUFFLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSTtZQUNyQyxVQUFVLEVBQUUsS0FBSyxDQUFDLGdCQUFnQixDQUFDLG1CQUFtQjtTQUN2RCxJQUVFLENB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QUUsQ0FBQyxpQkFDdkUsdUJBQUMsa0JBQU8sSUFBQyxHQUFHLEVBQUUsSUFBSSxJQUFJLFdBQVcsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUUsR0FBSSxFQUNoRSx3QkFBQyxxQkFBVSxxQkFBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxRQUFRLGlCQUN6QyxTQUFTLEVBQ1YsdUJBQUMsc0JBQWMscUJBQUMsSUFBSSxFQUFFLENBQUMsZ0JBQUcsU0FBUyxJQUFrQixLQUMxQyxLQUNGLENBQ2QsQ0FBQztJQUVGLElBQU0sWUFBWSxHQUFHLElBQUEsMkJBQWEsRUFBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFbEUsT0FBTyxDQUNMLHVCQUFDLDBCQUFrQixxQkFDakIsT0FBTyxFQUFFLGNBQU0sT0FBQSxDQUFDLG9CQUFvQixJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxFQUFwRCxDQUFvRCxFQUNuRSxRQUFRLEVBQUUsUUFBUSxFQUNsQixRQUFRLEVBQUUsQ0FBQyxDQUFDLG9CQUFvQixnQkFFL0IsWUFBWSxJQUNNLENBQ3RCLENBQUM7QUFDSixDQUFDLENBQUM7QUFwRVcsUUFBQSxnQkFBZ0Isb0JBb0UzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBCYWRnZSwgQmFkZ2VQcm9wcyB9IGZyb20gJy4uLy4uL2JhZGdlL2JhZGdlJztcbmltcG9ydCBDYXB0aW9uVGV4dCBmcm9tICcuLi8uLi9jYXB0aW9uLXRleHQvY2FwdGlvbi10ZXh0JztcbmltcG9ydCBGbGV4Um93IGZyb20gJy4uLy4uL2ZsZXgtcm93L2ZsZXgtcm93JztcbmltcG9ydCBOYXZMaW5rIGZyb20gJy4uLy4uL25hdi1saW5rL25hdi1saW5rJztcbmltcG9ydCBGbGV4Q29sdW1uIGZyb20gJy4uLy4uL2ZsZXgtY29sdW1uL2ZsZXgtY29sdW1uJztcbmltcG9ydCBzdHlsZWQsIHsgdXNlVGhlbWUgfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgeyB1c2VNYXRjaE1lZGlhIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvbWF0Y2gtbWVkaWEnO1xuaW1wb3J0IFN2Z0ljb24gZnJvbSAnLi4vLi4vc3ZnLWljb24vc3ZnLWljb24nO1xuaW1wb3J0IEJvZHlUZXh0IGZyb20gJy4uLy4uL2JvZHktdGV4dC9ib2R5LXRleHQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb2R1Y3RzTWVudUl0ZW1Qcm9wcyB7XG4gIGNvbWluZ1Nvb25CYWRnZUxhYmVsPzogc3RyaW5nO1xuICBuZXdCYWRnZUxhYmVsPzogc3RyaW5nO1xuICBzZWxlY3RlZD86IGJvb2xlYW47XG4gIGRlc2NyaXB0aW9uVGV4dD86IHN0cmluZztcbiAgbmFtZUxhYmVsOiBzdHJpbmc7XG4gIGxpbms6IHN0cmluZztcbiAgaWNvbjogc3RyaW5nO1xuICBiYWRnZT86IEJhZGdlUHJvcHM7XG59XG5cbmV4cG9ydCBlbnVtIFRoZW1lTW9kZVR5cGUge1xuICBsaWdodCA9ICdsaWdodCcsXG4gIGRhcmsgPSAnZGFyaycsXG59XG5cbmV4cG9ydCBjb25zdCBQcm9kdWN0SXRlbVdyYXBwZXIgPSBzdHlsZWQuc3Bhbjx7XG4gIGlzT3Blbj86IGJvb2xlYW47XG4gIHNlbGVjdGVkPzogYm9vbGVhbjtcbiAgZGlzYWJsZWQ6IGJvb2xlYW47XG59PigoeyB0aGVtZSwgaXNPcGVuLCBzZWxlY3RlZCwgZGlzYWJsZWQgfSkgPT5cbiAgdGhlbWUud2l0aE1lZGlhKHtcbiAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgZmxleDogJzEgMSBhdXRvJyxcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgcGFkZGluZzogWyc4cHggMTJweCcsICc4cHggMTJweCcsICcxNnB4J10sXG4gICAgd2lkdGg6IFsnMjA4cHgnLCAnMjA4cHgnLCAnMTcycHgnXSxcbiAgICBoZWlnaHQ6IFsnNTZweCcsICc1NnB4JywgJzEzN3B4J10sXG5cbiAgICAnJjpob3Zlcic6IHtcbiAgICAgIGJvcmRlclJhZGl1czogdGhlbWUuYm9yZGVyUmFkaXVzLmJhc2UsXG4gICAgICBiYWNrZ3JvdW5kOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmJhY2tncm91bmRTZWNvbmRhcnksXG4gICAgfSxcblxuICAgIC4uLihzZWxlY3RlZCAmJiB7XG4gICAgICBiYWNrZ3JvdW5kOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmJhY2tncm91bmRTZWNvbmRhcnksXG4gICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgfSksXG5cbiAgICAuLi4oZGlzYWJsZWQgJiYge1xuICAgICAgY29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuY29udGVudFNlY29uZGFyeSxcbiAgICAgICcmOmhvdmVyID4gKic6IHtcbiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICBjb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5jb250ZW50U2Vjb25kYXJ5LFxuICAgICAgfSxcbiAgICB9KSxcbiAgfSlcbik7XG5cbmV4cG9ydCBjb25zdCBTdHlsZWRCb2R5VGV4dCA9IHN0eWxlZChCb2R5VGV4dCk8e30+KCh7IHRoZW1lIH0pID0+XG4gIHRoZW1lLndpdGhNZWRpYSh7XG4gICAgd2hpdGVTcGFjZTogJ25vd3JhcCcsXG4gICAgY29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuY29udGVudFByaW1hcnksXG4gIH0pXG4pO1xuXG5jb25zdCBkZWZhdWx0SWNvbiA9IHtcbiAgW1RoZW1lTW9kZVR5cGUubGlnaHRdOiAnYXNzZXRzL2ljb25zL2ljLXNhbmQtY2xvY2stbGlnaHQuc3ZnJyxcbiAgW1RoZW1lTW9kZVR5cGUuZGFya106ICdhc3NldHMvaWNvbnMvaWMtc2FuZC1jbG9jay1kYXJrLnN2ZycsXG59O1xuXG5leHBvcnQgY29uc3QgUHJvZHVjdHNNZW51SXRlbSA9ICh7XG4gIG5hbWVMYWJlbCxcbiAgbGluayxcbiAgaWNvbixcbiAgZGVzY3JpcHRpb25UZXh0LFxuICBzZWxlY3RlZCA9IGZhbHNlLFxuICBuZXdCYWRnZUxhYmVsLFxuICBjb21pbmdTb29uQmFkZ2VMYWJlbCxcbiAgYmFkZ2UsXG59OiBQcm9kdWN0c01lbnVJdGVtUHJvcHMpID0+IHtcbiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xuXG4gIGxldCBpdGVtQmFkZ2U7XG4gIGlmIChiYWRnZSkge1xuICAgIGl0ZW1CYWRnZSA9IDxCYWRnZSB7Li4uYmFkZ2V9IGxpbmVIZWlnaHQ9eyd4eHMnfSAvPjtcbiAgfSBlbHNlIGlmIChjb21pbmdTb29uQmFkZ2VMYWJlbCkge1xuICAgIGl0ZW1CYWRnZSA9IChcbiAgICAgIDxCYWRnZVxuICAgICAgICBsYWJlbD17Y29taW5nU29vbkJhZGdlTGFiZWx9XG4gICAgICAgIHZhcmlhdGlvbj17J3Zpb2xldCd9XG4gICAgICAgIGxpbmVIZWlnaHQ9eyd4eHMnfVxuICAgICAgLz5cbiAgICApO1xuICB9IGVsc2UgaWYgKG5ld0JhZGdlTGFiZWwpIHtcbiAgICBpdGVtQmFkZ2UgPSAoXG4gICAgICA8QmFkZ2UgbGFiZWw9e25ld0JhZGdlTGFiZWx9IHZhcmlhdGlvbj17J2dyZWVuJ30gbGluZUhlaWdodD17J3h4cyd9IC8+XG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBpdGVtQmFkZ2UgPSAoXG4gICAgICA8Q2FwdGlvblRleHQgc2l6ZT17Mn0gdmFyaWF0aW9uPXsnbGlnaHRHcmF5J30+XG4gICAgICAgIHtkZXNjcmlwdGlvblRleHR9XG4gICAgICA8L0NhcHRpb25UZXh0PlxuICAgICk7XG4gIH1cblxuICBjb25zdCBtb2JpbGUgPSAoXG4gICAgPEZsZXhSb3cgaXRlbXNTcGFjaW5nPXs4fSBqdXN0aWZ5PXsnZmxleC1zdGFydCd9IGdyb3c9ezF9PlxuICAgICAgPEZsZXhSb3cgaXRlbXNTcGFjaW5nPXs4fSBncm93PXsxfT5cbiAgICAgICAgPFN2Z0ljb24gc3JjPXtpY29uIHx8IGRlZmF1bHRJY29uW3RoZW1lLnRoZW1lTmFtZV19IHNpemU9ezMyfSAvPlxuICAgICAgICA8RmxleENvbHVtbiBpdGVtc1NwYWNpbmc9ezR9PlxuICAgICAgICAgIHtpdGVtQmFkZ2V9XG4gICAgICAgICAgPFN0eWxlZEJvZHlUZXh0IHNpemU9ezF9PntuYW1lTGFiZWx9PC9TdHlsZWRCb2R5VGV4dD5cbiAgICAgICAgPC9GbGV4Q29sdW1uPlxuICAgICAgPC9GbGV4Um93PlxuICAgIDwvRmxleFJvdz5cbiAgKTtcblxuICBjb25zdCBkZXNrdG9wID0gKFxuICAgIDxGbGV4Q29sdW1uIGl0ZW1zU3BhY2luZz17MTZ9IGFsaWduPXsnY2VudGVyJ30ganVzdGlmeT17J2NlbnRlcid9IGdyb3c9ezF9PlxuICAgICAgPFN2Z0ljb24gc3JjPXtpY29uIHx8IGRlZmF1bHRJY29uW3RoZW1lLnRoZW1lTmFtZV19IHNpemU9ezQ4fSAvPlxuICAgICAgPEZsZXhDb2x1bW4gaXRlbXNTcGFjaW5nPXs0fSBhbGlnbj17J2NlbnRlcid9PlxuICAgICAgICB7aXRlbUJhZGdlfVxuICAgICAgICA8U3R5bGVkQm9keVRleHQgc2l6ZT17MX0+e25hbWVMYWJlbH08L1N0eWxlZEJvZHlUZXh0PlxuICAgICAgPC9GbGV4Q29sdW1uPlxuICAgIDwvRmxleENvbHVtbj5cbiAgKTtcblxuICBjb25zdCBwcm9kdWN0TWVkaWEgPSB1c2VNYXRjaE1lZGlhKFttb2JpbGUsIG1vYmlsZSwgZGVza3RvcF0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxQcm9kdWN0SXRlbVdyYXBwZXJcbiAgICAgIG9uQ2xpY2s9eygpID0+ICFjb21pbmdTb29uQmFkZ2VMYWJlbCAmJiB3aW5kb3cub3BlbihsaW5rLCAnX2JsYW5rJyl9XG4gICAgICBzZWxlY3RlZD17c2VsZWN0ZWR9XG4gICAgICBkaXNhYmxlZD17ISFjb21pbmdTb29uQmFkZ2VMYWJlbH1cbiAgICA+XG4gICAgICB7cHJvZHVjdE1lZGlhfVxuICAgIDwvUHJvZHVjdEl0ZW1XcmFwcGVyPlxuICApO1xufTtcbiJdfQ==