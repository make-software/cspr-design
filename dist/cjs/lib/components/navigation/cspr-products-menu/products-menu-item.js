"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProductsMenuItem = exports.ProductItemLink = exports.ProductItemWrapper = exports.ThemeModeType = void 0;
var tslib_1 = require("tslib");
var jsx_runtime_1 = require("react/jsx-runtime");
var badge_1 = require("../../badge/badge");
var caption_text_1 = tslib_1.__importDefault(require("../../caption-text/caption-text"));
var flex_row_1 = tslib_1.__importDefault(require("../../flex-row/flex-row"));
var nav_link_1 = tslib_1.__importDefault(require("../../nav-link/nav-link"));
var flex_column_1 = tslib_1.__importDefault(require("../../flex-column/flex-column"));
var styled_components_1 = tslib_1.__importStar(require("styled-components"));
var match_media_1 = require("../../../utils/match-media");
var svg_icon_1 = tslib_1.__importDefault(require("../../svg-icon/svg-icon"));
var body_text_1 = tslib_1.__importDefault(require("../../body-text/body-text"));
var ThemeModeType;
(function (ThemeModeType) {
    ThemeModeType["light"] = "light";
    ThemeModeType["dark"] = "dark";
})(ThemeModeType = exports.ThemeModeType || (exports.ThemeModeType = {}));
exports.ProductItemWrapper = styled_components_1.default.span(function (_a) {
    var theme = _a.theme, isOpen = _a.isOpen, selected = _a.selected;
    return theme.withMedia(tslib_1.__assign({ display: 'flex', flex: '1 1 auto', justifyContent: 'center', alignItems: 'center', padding: ['8px 12px', '8px 12px', '16px'], width: ['208px', '208px', '172px'], height: ['56px', '56px', '137px'], '&:hover': {
            borderRadius: theme.borderRadius.base,
            background: theme.styleguideColors.backgroundSecondary,
        } }, (selected && {
        background: theme.styleguideColors.backgroundSecondary,
        pointerEvents: 'none',
    })));
});
exports.ProductItemLink = (0, styled_components_1.default)(nav_link_1.default)(function (_a) {
    var theme = _a.theme, disabled = _a.disabled;
    return theme.withMedia(tslib_1.__assign({ color: theme.styleguideColors.contentPrimary, textDecoration: 'none', '&:hover': {
            color: theme.styleguideColors.contentBlue,
        }, '&:active': {
            color: theme.styleguideColors.contentLightBlue,
        } }, (disabled && {
        color: theme.styleguideColors.contentSecondary,
        '&:hover > *': {
            color: theme.styleguideColors.contentSecondary,
        },
    })));
});
var StyledBodyText = (0, styled_components_1.default)(body_text_1.default)(templateObject_1 || (templateObject_1 = tslib_1.__makeTemplateObject(["\n    white-space: nowrap;\n"], ["\n    white-space: nowrap;\n"])));
var defaultIcon = (_a = {},
    _a[ThemeModeType.light] = 'assets/icons/ic-sand-clock-light.svg',
    _a[ThemeModeType.dark] = 'assets/icons/ic-sand-clock-dark.svg',
    _a);
var ProductsMenuItem = function (_a) {
    var nameLabel = _a.nameLabel, link = _a.link, icon = _a.icon, descriptionText = _a.descriptionText, _b = _a.selected, selected = _b === void 0 ? false : _b, newBadgeLabel = _a.newBadgeLabel, comingSoonBadgeLabel = _a.comingSoonBadgeLabel;
    var theme = (0, styled_components_1.useTheme)();
    var badge;
    if (comingSoonBadgeLabel) {
        badge = (0, jsx_runtime_1.jsx)(badge_1.Badge, { label: comingSoonBadgeLabel, variation: 'violet', lineHeight: 'xxs' });
    }
    else if (newBadgeLabel) {
        badge = (0, jsx_runtime_1.jsx)(badge_1.Badge, { label: newBadgeLabel, variation: 'green', lineHeight: 'xxs' });
    }
    else {
        badge = ((0, jsx_runtime_1.jsx)(caption_text_1.default, tslib_1.__assign({ size: 2, variation: 'lightGray' }, { children: descriptionText })));
    }
    var mobile = ((0, jsx_runtime_1.jsx)(flex_row_1.default, tslib_1.__assign({ itemsSpacing: 8, justify: 'flex-start', grow: 1 }, { children: (0, jsx_runtime_1.jsx)(exports.ProductItemLink, tslib_1.__assign({ href: link, target: '_blank', disabled: !!comingSoonBadgeLabel }, { children: (0, jsx_runtime_1.jsxs)(flex_row_1.default, tslib_1.__assign({ itemsSpacing: 8, grow: 1 }, { children: [(0, jsx_runtime_1.jsx)(svg_icon_1.default, { src: icon || defaultIcon[theme.themeName], size: 32 }), (0, jsx_runtime_1.jsxs)(flex_column_1.default, tslib_1.__assign({ itemsSpacing: 4 }, { children: [badge, (0, jsx_runtime_1.jsx)(StyledBodyText, tslib_1.__assign({ size: 1 }, { children: nameLabel }))] }))] })) })) })));
    var desktop = ((0, jsx_runtime_1.jsx)(exports.ProductItemLink, tslib_1.__assign({ href: link, target: '_blank', disabled: !!comingSoonBadgeLabel }, { children: (0, jsx_runtime_1.jsxs)(flex_column_1.default, tslib_1.__assign({ itemsSpacing: 16, align: 'center', justify: 'center', grow: 1 }, { children: [(0, jsx_runtime_1.jsx)(svg_icon_1.default, { src: icon || defaultIcon[theme.themeName], size: 48 }), (0, jsx_runtime_1.jsxs)(flex_column_1.default, tslib_1.__assign({ itemsSpacing: 4, align: 'center' }, { children: [badge, (0, jsx_runtime_1.jsx)(StyledBodyText, tslib_1.__assign({ size: 1 }, { children: nameLabel }))] }))] })) })));
    var productMedia = (0, match_media_1.useMatchMedia)([mobile, mobile, desktop], []);
    return ((0, jsx_runtime_1.jsx)(exports.ProductItemWrapper, tslib_1.__assign({ selected: selected }, { children: productMedia })));
};
exports.ProductsMenuItem = ProductsMenuItem;
var templateObject_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvZHVjdHMtbWVudS1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb21wb25lbnRzL25hdmlnYXRpb24vY3Nwci1wcm9kdWN0cy1tZW51L3Byb2R1Y3RzLW1lbnUtaXRlbS50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsMkNBQTBDO0FBQzFDLHlGQUEwRDtBQUMxRCw2RUFBOEM7QUFDOUMsNkVBQThDO0FBQzlDLHNGQUF1RDtBQUN2RCw2RUFBcUQ7QUFDckQsMERBQTJEO0FBQzNELDZFQUE4QztBQUM5QyxnRkFBaUQ7QUFZakQsSUFBWSxhQUdYO0FBSEQsV0FBWSxhQUFhO0lBQ3ZCLGdDQUFlLENBQUE7SUFDZiw4QkFBYSxDQUFBO0FBQ2YsQ0FBQyxFQUhXLGFBQWEsR0FBYixxQkFBYSxLQUFiLHFCQUFhLFFBR3hCO0FBRVksUUFBQSxrQkFBa0IsR0FBRywyQkFBTSxDQUFDLElBQUksQ0FHMUMsVUFBQyxFQUEyQjtRQUF6QixLQUFLLFdBQUEsRUFBRSxNQUFNLFlBQUEsRUFBRSxRQUFRLGNBQUE7SUFDM0IsT0FBQSxLQUFLLENBQUMsU0FBUyxvQkFDYixPQUFPLEVBQUUsTUFBTSxFQUNmLElBQUksRUFBRSxVQUFVLEVBQ2hCLGNBQWMsRUFBRSxRQUFRLEVBQ3hCLFVBQVUsRUFBRSxRQUFRLEVBQ3BCLE9BQU8sRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLEVBQ3pDLEtBQUssRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQ2xDLE1BQU0sRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLEVBRWpDLFNBQVMsRUFBRTtZQUNULFlBQVksRUFBRSxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUk7WUFDckMsVUFBVSxFQUFFLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBbUI7U0FDdkQsSUFFRSxDQUFD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QUFTLElBQWtCLEtBQzFDLEtBQ0wsSUFDTSxJQUNWLENBQ1gsQ0FBQztJQUVGLElBQU0sT0FBTyxHQUFHLENBQ2QsdUJBQUMsdUJBQWUscUJBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsb0JBQW9CLGdCQUM3RSx3QkFBQyxxQkFBVSxxQkFDVCxZQUFZLEVBQUUsRUFBRSxFQUNoQixLQUFLLEVBQUUsUUFBUSxFQUNmLE9BQU8sRUFBRSxRQUFRLEVBQ2pCLElBQUksRUFBRSxDQUFDLGlCQUVQLHVCQUFDLGtCQUFPLElBQUMsR0FBRyxFQUFFLElBQUksSUFBSSxXQUFXLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEdBQUksRUFDaEUsd0JBQUMscUJBQVUscUJBQUMsWUFBWSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsUUFBUSxpQkFDekMsS0FBSyxFQUNOLHVCQUFDLGNBQWMscUJBQUMsSUFBSSxFQUFFLENBQUMsZ0JBQUcsU0FBUyxJQUFrQixLQUMxQyxLQUNGLElBQ0csQ0FDbkIsQ0FBQztJQUVGLElBQU0sWUFBWSxHQUFHLElBQUEsMkJBQWEsRUFBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFbEUsT0FBTyxDQUNMLHVCQUFDLDBCQUFrQixxQkFBQyxRQUFRLEVBQUUsUUFBUSxnQkFBRyxZQUFZLElBQXNCLENBQzVFLENBQUM7QUFDSixDQUFDLENBQUM7QUE1RFcsUUFBQSxnQkFBZ0Isb0JBNEQzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEJhZGdlIH0gZnJvbSAnLi4vLi4vYmFkZ2UvYmFkZ2UnO1xyXG5pbXBvcnQgQ2FwdGlvblRleHQgZnJvbSAnLi4vLi4vY2FwdGlvbi10ZXh0L2NhcHRpb24tdGV4dCc7XHJcbmltcG9ydCBGbGV4Um93IGZyb20gJy4uLy4uL2ZsZXgtcm93L2ZsZXgtcm93JztcclxuaW1wb3J0IE5hdkxpbmsgZnJvbSAnLi4vLi4vbmF2LWxpbmsvbmF2LWxpbmsnO1xyXG5pbXBvcnQgRmxleENvbHVtbiBmcm9tICcuLi8uLi9mbGV4LWNvbHVtbi9mbGV4LWNvbHVtbic7XHJcbmltcG9ydCBzdHlsZWQsIHsgdXNlVGhlbWUgfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XHJcbmltcG9ydCB7IHVzZU1hdGNoTWVkaWEgfSBmcm9tICcuLi8uLi8uLi91dGlscy9tYXRjaC1tZWRpYSc7XHJcbmltcG9ydCBTdmdJY29uIGZyb20gJy4uLy4uL3N2Zy1pY29uL3N2Zy1pY29uJztcclxuaW1wb3J0IEJvZHlUZXh0IGZyb20gJy4uLy4uL2JvZHktdGV4dC9ib2R5LXRleHQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9kdWN0c01lbnVJdGVtUHJvcHMge1xyXG4gIGNvbWluZ1Nvb25CYWRnZUxhYmVsPzogc3RyaW5nO1xyXG4gIG5ld0JhZGdlTGFiZWw/OiBzdHJpbmc7XHJcbiAgc2VsZWN0ZWQ/OiBib29sZWFuO1xyXG4gIGRlc2NyaXB0aW9uVGV4dD86IHN0cmluZztcclxuICBuYW1lTGFiZWw6IHN0cmluZztcclxuICBsaW5rOiBzdHJpbmc7XHJcbiAgaWNvbjogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZW51bSBUaGVtZU1vZGVUeXBlIHtcclxuICBsaWdodCA9ICdsaWdodCcsXHJcbiAgZGFyayA9ICdkYXJrJyxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFByb2R1Y3RJdGVtV3JhcHBlciA9IHN0eWxlZC5zcGFuPHtcclxuICBpc09wZW4/OiBib29sZWFuO1xyXG4gIHNlbGVjdGVkPzogYm9vbGVhbjtcclxufT4oKHsgdGhlbWUsIGlzT3Blbiwgc2VsZWN0ZWQgfSkgPT5cclxuICB0aGVtZS53aXRoTWVkaWEoe1xyXG4gICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gICAgZmxleDogJzEgMSBhdXRvJyxcclxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcclxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxyXG4gICAgcGFkZGluZzogWyc4cHggMTJweCcsICc4cHggMTJweCcsICcxNnB4J10sXHJcbiAgICB3aWR0aDogWycyMDhweCcsICcyMDhweCcsICcxNzJweCddLFxyXG4gICAgaGVpZ2h0OiBbJzU2cHgnLCAnNTZweCcsICcxMzdweCddLFxyXG5cclxuICAgICcmOmhvdmVyJzoge1xyXG4gICAgICBib3JkZXJSYWRpdXM6IHRoZW1lLmJvcmRlclJhZGl1cy5iYXNlLFxyXG4gICAgICBiYWNrZ3JvdW5kOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmJhY2tncm91bmRTZWNvbmRhcnksXHJcbiAgICB9LFxyXG5cclxuICAgIC4uLihzZWxlY3RlZCAmJiB7XHJcbiAgICAgIGJhY2tncm91bmQ6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuYmFja2dyb3VuZFNlY29uZGFyeSxcclxuICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxyXG4gICAgfSksXHJcbiAgfSlcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBQcm9kdWN0SXRlbUxpbmsgPSBzdHlsZWQoTmF2TGluaykoKHsgdGhlbWUsIGRpc2FibGVkIH0pID0+XHJcbiAgdGhlbWUud2l0aE1lZGlhKHtcclxuICAgIGNvbG9yOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmNvbnRlbnRQcmltYXJ5LFxyXG4gICAgdGV4dERlY29yYXRpb246ICdub25lJyxcclxuXHJcbiAgICAnJjpob3Zlcic6IHtcclxuICAgICAgY29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuY29udGVudEJsdWUsXHJcbiAgICB9LFxyXG4gICAgJyY6YWN0aXZlJzoge1xyXG4gICAgICBjb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5jb250ZW50TGlnaHRCbHVlLFxyXG4gICAgfSxcclxuXHJcbiAgICAuLi4oZGlzYWJsZWQgJiYge1xyXG4gICAgICBjb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5jb250ZW50U2Vjb25kYXJ5LFxyXG4gICAgICAnJjpob3ZlciA+IConOiB7XHJcbiAgICAgICAgY29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuY29udGVudFNlY29uZGFyeSxcclxuICAgICAgfSxcclxuICAgIH0pLFxyXG4gIH0pXHJcbik7XHJcblxyXG5jb25zdCBTdHlsZWRCb2R5VGV4dCA9ICBzdHlsZWQoQm9keVRleHQpYFxyXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuYFxyXG5cclxuY29uc3QgZGVmYXVsdEljb24gPSB7XHJcbiAgW1RoZW1lTW9kZVR5cGUubGlnaHRdOiAnYXNzZXRzL2ljb25zL2ljLXNhbmQtY2xvY2stbGlnaHQuc3ZnJyxcclxuICBbVGhlbWVNb2RlVHlwZS5kYXJrXTogJ2Fzc2V0cy9pY29ucy9pYy1zYW5kLWNsb2NrLWRhcmsuc3ZnJyxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBQcm9kdWN0c01lbnVJdGVtID0gKHtcclxuICBuYW1lTGFiZWwsXHJcbiAgbGluayxcclxuICBpY29uLFxyXG4gIGRlc2NyaXB0aW9uVGV4dCxcclxuICBzZWxlY3RlZCA9IGZhbHNlLFxyXG4gIG5ld0JhZGdlTGFiZWwsXHJcbiAgY29taW5nU29vbkJhZGdlTGFiZWwsXHJcbn06IFByb2R1Y3RzTWVudUl0ZW1Qcm9wcykgPT4ge1xyXG4gIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcclxuXHJcbiAgbGV0IGJhZGdlO1xyXG4gIGlmIChjb21pbmdTb29uQmFkZ2VMYWJlbCkge1xyXG4gICAgYmFkZ2UgPSA8QmFkZ2UgbGFiZWw9e2NvbWluZ1Nvb25CYWRnZUxhYmVsfSB2YXJpYXRpb249eyd2aW9sZXQnfSBsaW5lSGVpZ2h0PXsneHhzJ30gLz47XHJcbiAgfSBlbHNlIGlmIChuZXdCYWRnZUxhYmVsKSB7XHJcbiAgICBiYWRnZSA9IDxCYWRnZSBsYWJlbD17bmV3QmFkZ2VMYWJlbH0gdmFyaWF0aW9uPXsnZ3JlZW4nfSBsaW5lSGVpZ2h0PXsneHhzJ30gLz47XHJcbiAgfSBlbHNlIHtcclxuICAgIGJhZGdlID0gKFxyXG4gICAgICA8Q2FwdGlvblRleHQgc2l6ZT17Mn0gdmFyaWF0aW9uPXsnbGlnaHRHcmF5J30+XHJcbiAgICAgICAge2Rlc2NyaXB0aW9uVGV4dH1cclxuICAgICAgPC9DYXB0aW9uVGV4dD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtb2JpbGUgPSAoXHJcbiAgICA8RmxleFJvdyBpdGVtc1NwYWNpbmc9ezh9IGp1c3RpZnk9eydmbGV4LXN0YXJ0J30gZ3Jvdz17MX0+XHJcbiAgICAgIDxQcm9kdWN0SXRlbUxpbmsgaHJlZj17bGlua30gdGFyZ2V0PXsnX2JsYW5rJ30gZGlzYWJsZWQ9eyEhY29taW5nU29vbkJhZGdlTGFiZWx9PlxyXG4gICAgICAgIDxGbGV4Um93IGl0ZW1zU3BhY2luZz17OH0gZ3Jvdz17MX0+XHJcbiAgICAgICAgICA8U3ZnSWNvbiBzcmM9e2ljb24gfHwgZGVmYXVsdEljb25bdGhlbWUudGhlbWVOYW1lXX0gc2l6ZT17MzJ9IC8+XHJcbiAgICAgICAgICA8RmxleENvbHVtbiBpdGVtc1NwYWNpbmc9ezR9PlxyXG4gICAgICAgICAgICB7YmFkZ2V9XHJcbiAgICAgICAgICAgIDxTdHlsZWRCb2R5VGV4dCBzaXplPXsxfT57bmFtZUxhYmVsfTwvU3R5bGVkQm9keVRleHQ+XHJcbiAgICAgICAgICA8L0ZsZXhDb2x1bW4+XHJcbiAgICAgICAgPC9GbGV4Um93PlxyXG4gICAgICA8L1Byb2R1Y3RJdGVtTGluaz5cclxuICAgIDwvRmxleFJvdz5cclxuICApO1xyXG5cclxuICBjb25zdCBkZXNrdG9wID0gKFxyXG4gICAgPFByb2R1Y3RJdGVtTGluayBocmVmPXtsaW5rfSB0YXJnZXQ9eydfYmxhbmsnfSBkaXNhYmxlZD17ISFjb21pbmdTb29uQmFkZ2VMYWJlbH0+XHJcbiAgICAgIDxGbGV4Q29sdW1uXHJcbiAgICAgICAgaXRlbXNTcGFjaW5nPXsxNn1cclxuICAgICAgICBhbGlnbj17J2NlbnRlcid9XHJcbiAgICAgICAganVzdGlmeT17J2NlbnRlcid9XHJcbiAgICAgICAgZ3Jvdz17MX1cclxuICAgICAgPlxyXG4gICAgICAgIDxTdmdJY29uIHNyYz17aWNvbiB8fCBkZWZhdWx0SWNvblt0aGVtZS50aGVtZU5hbWVdfSBzaXplPXs0OH0gLz5cclxuICAgICAgICA8RmxleENvbHVtbiBpdGVtc1NwYWNpbmc9ezR9IGFsaWduPXsnY2VudGVyJ30+XHJcbiAgICAgICAgICB7YmFkZ2V9XHJcbiAgICAgICAgICA8U3R5bGVkQm9keVRleHQgc2l6ZT17MX0+e25hbWVMYWJlbH08L1N0eWxlZEJvZHlUZXh0PlxyXG4gICAgICAgIDwvRmxleENvbHVtbj5cclxuICAgICAgPC9GbGV4Q29sdW1uPlxyXG4gICAgPC9Qcm9kdWN0SXRlbUxpbms+XHJcbiAgKTtcclxuXHJcbiAgY29uc3QgcHJvZHVjdE1lZGlhID0gdXNlTWF0Y2hNZWRpYShbbW9iaWxlLCBtb2JpbGUsIGRlc2t0b3BdLCBbXSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8UHJvZHVjdEl0ZW1XcmFwcGVyIHNlbGVjdGVkPXtzZWxlY3RlZH0+e3Byb2R1Y3RNZWRpYX08L1Byb2R1Y3RJdGVtV3JhcHBlcj5cclxuICApO1xyXG59O1xyXG4iXX0=