import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useEffect, useState } from 'react';
import styled, { useTheme } from 'styled-components';
import FlexRow from '../flex-row/flex-row';
import FlexColumn from '../flex-column/flex-column';
import Button from '../button/button';
import Input from '../input/input';
import BodyText from '../body-text/body-text';
import ReactModal from 'react-modal';
import { useClickAway } from '../../hooks/use-click-away';
import { useEscapeKey } from '../../hooks/use-escape-key';
import ModalHeader from '../modal-header/modal-header';
import SubtitleText from '../subtitle-text/subtitle-text';
import { ModalPosition, } from '../confirmation-window/confirmation-window';
import Checkbox, { CheckboxFontSize } from '../checkbox/checkbox';
import WarningMessage from '../warning-message/warning-message';
export var DismissOrigin;
(function (DismissOrigin) {
    DismissOrigin[DismissOrigin["HeaderCloseButton"] = 0] = "HeaderCloseButton";
    DismissOrigin[DismissOrigin["DismissButton"] = 1] = "DismissButton";
    DismissOrigin[DismissOrigin["Overlay"] = 2] = "Overlay";
    DismissOrigin[DismissOrigin["ESC"] = 3] = "ESC";
})(DismissOrigin || (DismissOrigin = {}));
const centerModalStyles = {
    left: '50%',
    right: 'auto',
    bottom: 'auto',
    border: 'none',
    borderRadius: '12px',
    padding: '32px 24px 24px 24px',
    top: '50%',
    transform: 'translate(-50%, -50%)',
};
const topModalStyles = {
    top: '40px',
    left: 'auto',
    right: '40px',
    border: 'none',
    bottom: 'auto',
    borderRadius: '12px',
    padding: '16px 24px 24px 24px',
};
const ModalContainer = styled(FlexColumn)(({ theme, position }) => theme.withMedia({
    width: position === ModalPosition.TopRight
        ? ['300px', '350px', '350px']
        : ['300px', '440px', '496px'],
    background: theme.styleguideColors.backgroundPrimary,
    borderColor: theme.styleguideColors.backgroundPrimary,
}));
const ImageWrapper = styled(FlexRow)(({ theme }) => theme.withMedia({
    margin: '15px 0 24px 0',
}));
const StyledCaption = styled.div(({ theme, position }) => theme.withMedia({
    textAlign: 'left',
    marginBottom: '16px',
}));
const StyledCaptionText = styled(SubtitleText)(({ theme }) => theme.withMedia({
    fontWeight: [600, 600, 700],
    fontSize: ['20px', '24px', '24px'],
    color: theme.styleguideColors.contentPrimary,
}));
const StyledInformationText = styled(BodyText)(({ theme, position }) => theme.withMedia({
    color: theme.styleguideColors.contentSecondary,
}));
const ButtonsContainer = styled(FlexRow)(({ theme, position }) => theme.withMedia({
    marginTop: position === ModalPosition.TopRight ? '40px' : ['32px', '32px', '56px'],
    flexDirection: ['column', 'row', 'row'],
}));
const StyledInput = styled(Input)(({ theme, margin }) => theme.withMedia({
    width: '100%',
    margin: margin,
    ':focus': {
        outline: 'none',
    },
}));
const CheckBoxContainer = styled.div(({ theme, position }) => theme.withMedia({
    margin: position === ModalPosition.TopRight
        ? '40px 0 -20px 0'
        : ['40px 0 -20px 0', '40px 0 -20px 0', '72px 0 -40px 0'],
}));
const handleTheme = (theme, position) => {
    const modalStyle = {
        overlay: {
            backgroundColor: theme.styleguideColors.backgroundOverlay,
            zIndex: 15,
        },
        content: position === ModalPosition.TopRight
            ? {
                ...topModalStyles,
                ...{
                    backgroundColor: theme.styleguideColors.backgroundPrimary,
                    borderColor: theme.styleguideColors.backgroundPrimary,
                },
            }
            : {
                ...centerModalStyles,
                ...{
                    backgroundColor: theme.styleguideColors.backgroundPrimary,
                    borderColor: theme.styleguideColors.backgroundPrimary,
                },
            },
    };
    return modalStyle;
};
export const UserInputWindow = ({ isOpen, position, title, withHeader, headerLogo, bodyImg, information, confirmLabel, confirmDisabled, confirmColor, onConfirm, dismissLabel, dismissDisabled, shouldCloseOnEsc, shouldCloseOnOverlayClick, onDismiss, themeMode, inputType, placeholder, required = false, inputLabel, checkboxLabel, validationSetting, repeatInput, warningMessage, informationOnlyMode, isMandatoryCheckBox, hideXButton, resetForm, portalClass = 'portal', }) => {
    const theme = useTheme();
    const [value, setValue] = useState('');
    const [repeatValue, setRepeatValue] = useState('');
    const [isChecked, setIsChecked] = useState(false);
    const [formError, setFormError] = useState(null);
    const [repeatInputError, setRepeatInputError] = useState(null);
    const [showModal, setShowModal] = useState(isOpen);
    useEscapeKey(() => {
        if (shouldCloseOnEsc) {
            setShowModal(false);
            onDismiss && onDismiss(DismissOrigin.ESC);
        }
    });
    useEffect(() => {
        resetForm && setValue('');
    }, [resetForm]);
    const { ref } = useClickAway({
        callback: () => {
            if (shouldCloseOnOverlayClick) {
                setShowModal(false);
                onDismiss && onDismiss(DismissOrigin.Overlay);
            }
        },
    });
    const regexMatched = (val) => !!val && validationSetting?.regexpPattern.test(val);
    const isValueEqual = (firstVal, secondVal) => firstVal && secondVal && firstVal === secondVal;
    const handleEnterKeyDown = (e) => {
        let val = e.target.value;
        if (val && !formError) {
            if (e.key === 'Enter') {
                onConfirm(val, isChecked);
            }
        }
        else
            return;
    };
    const handleOnSubmit = () => {
        onConfirm(value, isChecked);
    };
    const handleInputChange = (e) => {
        let passVal = e.target.value;
        repeatInput && repeatValue && setRepeatValue('');
        if (validationSetting?.regexpPattern &&
            validationSetting?.validationMessage) {
            !!passVal && regexMatched(passVal)
                ? setFormError(null)
                : setFormError(`${validationSetting?.validationMessage}`);
        }
        setValue(passVal);
    };
    const handleRepeatInputChange = (e) => {
        let repeatVal = e.target.value;
        if (repeatInput?.validationMessage) {
            !!repeatVal && isValueEqual(value, repeatVal)
                ? setRepeatInputError(null)
                : setRepeatInputError(`${repeatInput?.validationMessage}`);
        }
        setRepeatValue(repeatVal);
    };
    const handleDisableButton = () => {
        if (confirmDisabled)
            return true;
        if (isMandatoryCheckBox && !isChecked)
            return true;
        if (informationOnlyMode)
            return false;
        if (repeatInput) {
            return repeatValue ? !!repeatInputError : true;
        }
        else {
            return value ? !!formError : true;
        }
    };
    const handleCheckBox = () => {
        setIsChecked(!isChecked);
    };
    return (_jsx(_Fragment, { children: showModal && (_jsx(ReactModal, { isOpen: showModal, style: handleTheme(theme, position), shouldCloseOnEsc: true, shouldCloseOnOverlayClick: true, portalClassName: portalClass, role: "dialog", "aria-modal": "true", children: _jsxs(ModalContainer, { position: position, ref: ref, children: [withHeader && (_jsx(ModalHeader, { themeMode: themeMode, headerLogo: headerLogo, onClose: hideXButton
                            ? undefined
                            : () => onDismiss && onDismiss(DismissOrigin.HeaderCloseButton) })), bodyImg && _jsx(ImageWrapper, { children: bodyImg }), _jsx(StyledCaption, { position: position, children: _jsx(StyledCaptionText, { size: 1, scale: "lg", children: title }) }), _jsx(FlexRow, { justify: "left", children: _jsx(StyledInformationText, { position: position, size: 3, scale: "sm", children: information }) }), !informationOnlyMode && (_jsx(FlexRow, { children: _jsx(StyledInput, { required: required, value: value, onChange: handleInputChange, onKeyDown: handleEnterKeyDown, label: _jsx(BodyText, { size: 2, children: inputLabel }), placeholder: placeholder, margin: '16px 0', error: !!formError, validationType: inputType, validationText: formError }) })), !informationOnlyMode && repeatInput && (_jsx(FlexRow, { children: _jsx(StyledInput, { required: required, value: repeatValue, onChange: handleRepeatInputChange, onKeyDown: handleEnterKeyDown, label: _jsx(BodyText, { size: 2, children: repeatInput?.label }), placeholder: repeatInput?.placeholder, error: !!repeatInputError, validationType: inputType, validationText: repeatInputError }) })), warningMessage && (_jsx(WarningMessage, { title: warningMessage.title, message: warningMessage.message, margin: warningMessage.margin, iconSrc: warningMessage.iconSrc })), checkboxLabel && (_jsx(CheckBoxContainer, { position: position, children: _jsx(Checkbox, { checked: isChecked, label: checkboxLabel, onChange: handleCheckBox, checkboxFontSize: CheckboxFontSize.small }) })), _jsxs(ButtonsContainer, { position: position, gap: '16px', justify: 'space-between', children: [dismissLabel && (_jsx(Button, { color: 'secondaryBlue', onClick: () => onDismiss && onDismiss(DismissOrigin.DismissButton), disabled: !!dismissDisabled, children: dismissLabel })), _jsx(Button, { color: confirmColor === 'red' ? 'primaryRed' : 'primaryBlue', onClick: handleOnSubmit, disabled: handleDisableButton(), children: confirmLabel })] })] }) })) }));
};
export default UserInputWindow;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1pbnB1dC13aW5kb3cuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvdXNlci1pbnB1dC13aW5kb3cvdXNlci1pbnB1dC13aW5kb3cudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFjLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxNQUFNLE9BQU8sQ0FBQztBQUNuRCxPQUFPLE1BQU0sRUFBRSxFQUFFLFFBQVEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3JELE9BQU8sT0FBTyxNQUFNLHNCQUFzQixDQUFDO0FBQzNDLE9BQU8sVUFBVSxNQUFNLDRCQUE0QixDQUFDO0FBQ3BELE9BQU8sTUFBTSxNQUFNLGtCQUFrQixDQUFDO0FBQ3RDLE9BQU8sS0FBOEIsTUFBTSxnQkFBZ0IsQ0FBQztBQUM1RCxPQUFPLFFBQVEsTUFBTSx3QkFBd0IsQ0FBQztBQUM5QyxPQUFPLFVBQVUsTUFBTSxhQUFhLENBQUM7QUFDckMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzFELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUMxRCxPQUFPLFdBQVcsTUFBTSw4QkFBOEIsQ0FBQztBQUN2RCxPQUFPLFlBQVksTUFBTSxnQ0FBZ0MsQ0FBQztBQUUxRCxPQUFPLEVBQ0wsYUFBYSxHQUVkLE1BQU0sNENBQTRDLENBQUM7QUFDcEQsT0FBTyxRQUFRLEVBQUUsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2xFLE9BQU8sY0FFTixNQUFNLG9DQUFvQyxDQUFDO0FBOEM1QyxNQUFNLENBQU4sSUFBWSxhQUtYO0FBTEQsV0FBWSxhQUFhO0lBQ3ZCLDJFQUFpQixDQUFBO0lBQ2pCLG1FQUFhLENBQUE7SUFDYix1REFBTyxDQUFBO0lBQ1AsK0NBQUcsQ0FBQTtBQUNMLENBQUMsRUFMVyxhQUFhLEtBQWIsYUFBYSxRQUt4QjtBQUVE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QUFDO0FBRUYsZUFBZSxlQUFlLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQsIHsgdXNlVGhlbWUgfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgRmxleFJvdyBmcm9tICcuLi9mbGV4LXJvdy9mbGV4LXJvdyc7XG5pbXBvcnQgRmxleENvbHVtbiBmcm9tICcuLi9mbGV4LWNvbHVtbi9mbGV4LWNvbHVtbic7XG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uL2J1dHRvbi9idXR0b24nO1xuaW1wb3J0IElucHV0LCB7IElucHV0VmFsaWRhdGlvblR5cGUgfSBmcm9tICcuLi9pbnB1dC9pbnB1dCc7XG5pbXBvcnQgQm9keVRleHQgZnJvbSAnLi4vYm9keS10ZXh0L2JvZHktdGV4dCc7XG5pbXBvcnQgUmVhY3RNb2RhbCBmcm9tICdyZWFjdC1tb2RhbCc7XG5pbXBvcnQgeyB1c2VDbGlja0F3YXkgfSBmcm9tICcuLi8uLi9ob29rcy91c2UtY2xpY2stYXdheSc7XG5pbXBvcnQgeyB1c2VFc2NhcGVLZXkgfSBmcm9tICcuLi8uLi9ob29rcy91c2UtZXNjYXBlLWtleSc7XG5pbXBvcnQgTW9kYWxIZWFkZXIgZnJvbSAnLi4vbW9kYWwtaGVhZGVyL21vZGFsLWhlYWRlcic7XG5pbXBvcnQgU3VidGl0bGVUZXh0IGZyb20gJy4uL3N1YnRpdGxlLXRleHQvc3VidGl0bGUtdGV4dCc7XG5pbXBvcnQgeyBUaGVtZU1vZGVUeXBlIH0gZnJvbSAnLi4vbmF2aWdhdGlvbi9jc3ByLXByb2R1Y3RzLW1lbnUvcHJvZHVjdHMtbWVudS1pdGVtJztcbmltcG9ydCB7XG4gIE1vZGFsUG9zaXRpb24sXG4gIE1vZGFsUG9zaXRpb25Qcm9wcyxcbn0gZnJvbSAnLi4vY29uZmlybWF0aW9uLXdpbmRvdy9jb25maXJtYXRpb24td2luZG93JztcbmltcG9ydCBDaGVja2JveCwgeyBDaGVja2JveEZvbnRTaXplIH0gZnJvbSAnLi4vY2hlY2tib3gvY2hlY2tib3gnO1xuaW1wb3J0IFdhcm5pbmdNZXNzYWdlLCB7XG4gIFdhcm5pbmdNZXNzYWdlUHJvcHMsXG59IGZyb20gJy4uL3dhcm5pbmctbWVzc2FnZS93YXJuaW5nLW1lc3NhZ2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25Qcm9wcyB7XG4gIHZhbGlkYXRpb25NZXNzYWdlOiBzdHJpbmc7XG4gIHJlZ2V4cFBhdHRlcm46IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZXBlYXRJbnB1dFByb3BzIHtcbiAgdmFsaWRhdGlvbk1lc3NhZ2U6IHN0cmluZztcbiAgbGFiZWw/OiBzdHJpbmc7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJJbnB1dFdpbmRvd1NjZW5lUHJvcHMge1xuICBpc09wZW46IGJvb2xlYW47XG4gIGJvZHlJbWc/OiBSZWFjdC5SZWFjdEVsZW1lbnQ7XG4gIHBvc2l0aW9uOiBNb2RhbFBvc2l0aW9uO1xuICB0aXRsZTogc3RyaW5nO1xuICB3aXRoSGVhZGVyPzogYm9vbGVhbjtcbiAgcmVzZXRGb3JtPzogYm9vbGVhbjtcbiAgaGVhZGVyTG9nbz86IFJlYWN0LlJlYWN0RWxlbWVudDtcbiAgaW5mb3JtYXRpb24/OiBSZWFjdC5SZWFjdEVsZW1lbnQgfCBzdHJpbmc7XG4gIHJlcGVhdElucHV0PzogUmVwZWF0SW5wdXRQcm9wcztcbiAgd2FybmluZ01lc3NhZ2U/OiBXYXJuaW5nTWVzc2FnZVByb3BzO1xuICBpbmZvcm1hdGlvbk9ubHlNb2RlPzogYm9vbGVhbjtcbiAgaGlkZVhCdXR0b24/OiBib29sZWFuO1xuICBjb25maXJtTGFiZWw6IHN0cmluZztcbiAgY29uZmlybURpc2FibGVkPzogYm9vbGVhbjtcbiAgb25Db25maXJtOiAodmFsdWU6IHN0cmluZywgaXNDaGVja2VkPzogYm9vbGVhbikgPT4gdm9pZDtcbiAgY29uZmlybUNvbG9yPzogc3RyaW5nO1xuICBkaXNtaXNzTGFiZWw/OiBzdHJpbmc7XG4gIGRpc21pc3NEaXNhYmxlZD86IGJvb2xlYW47XG4gIG9uRGlzbWlzcz86IChvcmlnaW46IERpc21pc3NPcmlnaW4pID0+IHZvaWQ7XG4gIGlzTWFuZGF0b3J5Q2hlY2tCb3g/OiBib29sZWFuO1xuICBpbnB1dExhYmVsPzogc3RyaW5nO1xuICBpbnB1dFR5cGU/OiBJbnB1dFZhbGlkYXRpb25UeXBlO1xuICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgcmVxdWlyZWQ/OiBib29sZWFuO1xuICBzaG91bGRDbG9zZU9uRXNjPzogYm9vbGVhbjtcbiAgc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljaz86IGJvb2xlYW47XG4gIHRoZW1lTW9kZT86IFRoZW1lTW9kZVR5cGU7XG4gIGNoZWNrYm94TGFiZWw/OiBzdHJpbmcgfCBSZWFjdC5SZWFjdEVsZW1lbnQ7XG4gIHZhbGlkYXRpb25TZXR0aW5nPzogVmFsaWRhdGlvblByb3BzO1xuICBwb3J0YWxDbGFzcz86IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gRGlzbWlzc09yaWdpbiB7XG4gIEhlYWRlckNsb3NlQnV0dG9uLFxuICBEaXNtaXNzQnV0dG9uLFxuICBPdmVybGF5LFxuICBFU0MsXG59XG5cbmNvbnN0IGNlbnRlck1vZGFsU3R5bGVzID0ge1xuICBsZWZ0OiAnNTAlJyxcbiAgcmlnaHQ6ICdhdXRvJyxcbiAgYm90dG9tOiAnYXV0bycsXG4gIGJvcmRlcjogJ25vbmUnLFxuICBib3JkZXJSYWRpdXM6ICcxMnB4JyxcbiAgcGFkZGluZzogJzMycHggMjRweCAyNHB4IDI0cHgnLFxuICB0b3A6ICc1MCUnLFxuICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknLFxufTtcblxuY29uc3QgdG9wTW9kYWxTdHlsZXMgPSB7XG4gIHRvcDogJzQwcHgnLFxuICBsZWZ0OiAnYXV0bycsXG4gIHJpZ2h0OiAnNDBweCcsXG4gIGJvcmRlcjogJ25vbmUnLFxuICBib3R0b206ICdhdXRvJyxcbiAgYm9yZGVyUmFkaXVzOiAnMTJweCcsXG4gIHBhZGRpbmc6ICcxNnB4IDI0cHggMjRweCAyNHB4Jyxcbn07XG5cbmNvbnN0IE1vZGFsQ29udGFpbmVyID0gc3R5bGVkKEZsZXhDb2x1bW4pPE1vZGFsUG9zaXRpb25Qcm9wcz4oXG4gICh7IHRoZW1lLCBwb3NpdGlvbiB9KSA9PlxuICAgIHRoZW1lLndpdGhNZWRpYSh7XG4gICAgICB3aWR0aDpcbiAgICAgICAgcG9zaXRpb24gPT09IE1vZGFsUG9zaXRpb24uVG9wUmlnaHRcbiAgICAgICAgICA/IFsnMzAwcHgnLCAnMzUwcHgnLCAnMzUwcHgnXVxuICAgICAgICAgIDogWyczMDBweCcsICc0NDBweCcsICc0OTZweCddLFxuICAgICAgYmFja2dyb3VuZDogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5iYWNrZ3JvdW5kUHJpbWFyeSxcbiAgICAgIGJvcmRlckNvbG9yOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmJhY2tncm91bmRQcmltYXJ5LFxuICAgIH0pXG4pO1xuXG5jb25zdCBJbWFnZVdyYXBwZXIgPSBzdHlsZWQoRmxleFJvdykoKHsgdGhlbWUgfSkgPT5cbiAgdGhlbWUud2l0aE1lZGlhKHtcbiAgICBtYXJnaW46ICcxNXB4IDAgMjRweCAwJyxcbiAgfSlcbik7XG5cbmNvbnN0IFN0eWxlZENhcHRpb24gPSBzdHlsZWQuZGl2PE1vZGFsUG9zaXRpb25Qcm9wcz4oKHsgdGhlbWUsIHBvc2l0aW9uIH0pID0+XG4gIHRoZW1lLndpdGhNZWRpYSh7XG4gICAgdGV4dEFsaWduOiAnbGVmdCcsXG4gICAgbWFyZ2luQm90dG9tOiAnMTZweCcsXG4gIH0pXG4pO1xuXG5jb25zdCBTdHlsZWRDYXB0aW9uVGV4dCA9IHN0eWxlZChTdWJ0aXRsZVRleHQpKCh7IHRoZW1lIH0pID0+XG4gIHRoZW1lLndpdGhNZWRpYSh7XG4gICAgZm9udFdlaWdodDogWzYwMCwgNjAwLCA3MDBdLFxuICAgIGZvbnRTaXplOiBbJzIwcHgnLCAnMjRweCcsICcyNHB4J10sXG4gICAgY29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuY29udGVudFByaW1hcnksXG4gIH0pXG4pO1xuXG5jb25zdCBTdHlsZWRJbmZvcm1hdGlvblRleHQgPSBzdHlsZWQoQm9keVRleHQpPE1vZGFsUG9zaXRpb25Qcm9wcz4oXG4gICh7IHRoZW1lLCBwb3NpdGlvbiB9KSA9PlxuICAgIHRoZW1lLndpdGhNZWRpYSh7XG4gICAgICBjb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5jb250ZW50U2Vjb25kYXJ5LFxuICAgIH0pXG4pO1xuXG5jb25zdCBCdXR0b25zQ29udGFpbmVyID0gc3R5bGVkKEZsZXhSb3cpPE1vZGFsUG9zaXRpb25Qcm9wcz4oXG4gICh7IHRoZW1lLCBwb3NpdGlvbiB9KSA9PlxuICAgIHRoZW1lLndpdGhNZWRpYSh7XG4gICAgICBtYXJnaW5Ub3A6XG4gICAgICAgIHBvc2l0aW9uID09PSBNb2RhbFBvc2l0aW9uLlRvcFJpZ2h0ID8gJzQwcHgnIDogWyczMnB4JywgJzMycHgnLCAnNTZweCddLFxuICAgICAgZmxleERpcmVjdGlvbjogWydjb2x1bW4nLCAncm93JywgJ3JvdyddLFxuICAgIH0pXG4pO1xuXG5jb25zdCBTdHlsZWRJbnB1dCA9IHN0eWxlZChJbnB1dCk8eyBtYXJnaW4/OiBzdHJpbmcgfT4oKHsgdGhlbWUsIG1hcmdpbiB9KSA9PlxuICB0aGVtZS53aXRoTWVkaWEoe1xuICAgIHdpZHRoOiAnMTAwJScsXG4gICAgbWFyZ2luOiBtYXJnaW4sXG4gICAgJzpmb2N1cyc6IHtcbiAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICB9LFxuICB9KVxuKTtcblxuY29uc3QgQ2hlY2tCb3hDb250YWluZXIgPSBzdHlsZWQuZGl2PE1vZGFsUG9zaXRpb25Qcm9wcz4oXG4gICh7IHRoZW1lLCBwb3NpdGlvbiB9KSA9PlxuICAgIHRoZW1lLndpdGhNZWRpYSh7XG4gICAgICBtYXJnaW46XG4gICAgICAgIHBvc2l0aW9uID09PSBNb2RhbFBvc2l0aW9uLlRvcFJpZ2h0XG4gICAgICAgICAgPyAnNDBweCAwIC0yMHB4IDAnXG4gICAgICAgICAgOiBbJzQwcHggMCAtMjBweCAwJywgJzQwcHggMCAtMjBweCAwJywgJzcycHggMCAtNDBweCAwJ10sXG4gICAgfSlcbik7XG5cbmNvbnN0IGhhbmRsZVRoZW1lID0gKHRoZW1lLCBwb3NpdGlvbikgPT4ge1xuICBjb25zdCBtb2RhbFN0eWxlID0ge1xuICAgIG92ZXJsYXk6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5iYWNrZ3JvdW5kT3ZlcmxheSxcbiAgICAgIHpJbmRleDogMTUsXG4gICAgfSxcbiAgICBjb250ZW50OlxuICAgICAgcG9zaXRpb24gPT09IE1vZGFsUG9zaXRpb24uVG9wUmlnaHRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICAuLi50b3BNb2RhbFN0eWxlcyxcbiAgICAgICAgICAgIC4uLntcbiAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmJhY2tncm91bmRQcmltYXJ5LFxuICAgICAgICAgICAgICBib3JkZXJDb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5iYWNrZ3JvdW5kUHJpbWFyeSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC4uLmNlbnRlck1vZGFsU3R5bGVzLFxuICAgICAgICAgICAgLi4ue1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuYmFja2dyb3VuZFByaW1hcnksXG4gICAgICAgICAgICAgIGJvcmRlckNvbG9yOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmJhY2tncm91bmRQcmltYXJ5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICB9O1xuXG4gIHJldHVybiBtb2RhbFN0eWxlO1xufTtcblxuZXhwb3J0IGNvbnN0IFVzZXJJbnB1dFdpbmRvdyA9ICh7XG4gIGlzT3BlbixcbiAgcG9zaXRpb24sXG4gIHRpdGxlLFxuICB3aXRoSGVhZGVyLFxuICBoZWFkZXJMb2dvLFxuICBib2R5SW1nLFxuICBpbmZvcm1hdGlvbixcbiAgY29uZmlybUxhYmVsLFxuICBjb25maXJtRGlzYWJsZWQsXG4gIGNvbmZpcm1Db2xvcixcbiAgb25Db25maXJtLFxuICBkaXNtaXNzTGFiZWwsXG4gIGRpc21pc3NEaXNhYmxlZCxcbiAgc2hvdWxkQ2xvc2VPbkVzYyxcbiAgc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljayxcbiAgb25EaXNtaXNzLFxuICB0aGVtZU1vZGUsXG4gIGlucHV0VHlwZSxcbiAgcGxhY2Vob2xkZXIsXG4gIHJlcXVpcmVkID0gZmFsc2UsXG4gIGlucHV0TGFiZWwsXG4gIGNoZWNrYm94TGFiZWwsXG4gIHZhbGlkYXRpb25TZXR0aW5nLFxuICByZXBlYXRJbnB1dCxcbiAgd2FybmluZ01lc3NhZ2UsXG4gIGluZm9ybWF0aW9uT25seU1vZGUsXG4gIGlzTWFuZGF0b3J5Q2hlY2tCb3gsXG4gIGhpZGVYQnV0dG9uLFxuICByZXNldEZvcm0sXG4gIHBvcnRhbENsYXNzID0gJ3BvcnRhbCcsXG59OiBVc2VySW5wdXRXaW5kb3dTY2VuZVByb3BzKSA9PiB7XG4gIGNvbnN0IHRoZW1lID0gdXNlVGhlbWUoKTtcbiAgY29uc3QgW3ZhbHVlLCBzZXRWYWx1ZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtyZXBlYXRWYWx1ZSwgc2V0UmVwZWF0VmFsdWVdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbaXNDaGVja2VkLCBzZXRJc0NoZWNrZWRdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBbZm9ybUVycm9yLCBzZXRGb3JtRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtyZXBlYXRJbnB1dEVycm9yLCBzZXRSZXBlYXRJbnB1dEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc2hvd01vZGFsLCBzZXRTaG93TW9kYWxdID0gdXNlU3RhdGU8Ym9vbGVhbj4oaXNPcGVuKTtcblxuICB1c2VFc2NhcGVLZXkoKCkgPT4ge1xuICAgIGlmIChzaG91bGRDbG9zZU9uRXNjKSB7XG4gICAgICBzZXRTaG93TW9kYWwoZmFsc2UpO1xuICAgICAgb25EaXNtaXNzICYmIG9uRGlzbWlzcyhEaXNtaXNzT3JpZ2luLkVTQyk7XG4gICAgfVxuICB9KTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJlc2V0Rm9ybSAmJiBzZXRWYWx1ZSgnJyk7XG4gIH0sIFtyZXNldEZvcm1dKTtcblxuICBjb25zdCB7IHJlZiB9ID0gdXNlQ2xpY2tBd2F5KHtcbiAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgaWYgKHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2spIHtcbiAgICAgICAgc2V0U2hvd01vZGFsKGZhbHNlKTtcbiAgICAgICAgb25EaXNtaXNzICYmIG9uRGlzbWlzcyhEaXNtaXNzT3JpZ2luLk92ZXJsYXkpO1xuICAgICAgfVxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHJlZ2V4TWF0Y2hlZCA9ICh2YWwpID0+XG4gICAgISF2YWwgJiYgdmFsaWRhdGlvblNldHRpbmc/LnJlZ2V4cFBhdHRlcm4udGVzdCh2YWwpO1xuXG4gIGNvbnN0IGlzVmFsdWVFcXVhbCA9IChmaXJzdFZhbCwgc2Vjb25kVmFsKSA9PlxuICAgIGZpcnN0VmFsICYmIHNlY29uZFZhbCAmJiBmaXJzdFZhbCA9PT0gc2Vjb25kVmFsO1xuXG4gIGNvbnN0IGhhbmRsZUVudGVyS2V5RG93biA9IChlKSA9PiB7XG4gICAgbGV0IHZhbCA9IGUudGFyZ2V0LnZhbHVlO1xuXG4gICAgaWYgKHZhbCAmJiAhZm9ybUVycm9yKSB7XG4gICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgb25Db25maXJtKHZhbCwgaXNDaGVja2VkKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgcmV0dXJuO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZU9uU3VibWl0ID0gKCkgPT4ge1xuICAgIG9uQ29uZmlybSh2YWx1ZSwgaXNDaGVja2VkKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVJbnB1dENoYW5nZSA9IChlKSA9PiB7XG4gICAgbGV0IHBhc3NWYWwgPSBlLnRhcmdldC52YWx1ZTtcblxuICAgIHJlcGVhdElucHV0ICYmIHJlcGVhdFZhbHVlICYmIHNldFJlcGVhdFZhbHVlKCcnKTtcblxuICAgIGlmIChcbiAgICAgIHZhbGlkYXRpb25TZXR0aW5nPy5yZWdleHBQYXR0ZXJuICYmXG4gICAgICB2YWxpZGF0aW9uU2V0dGluZz8udmFsaWRhdGlvbk1lc3NhZ2VcbiAgICApIHtcbiAgICAgICEhcGFzc1ZhbCAmJiByZWdleE1hdGNoZWQocGFzc1ZhbClcbiAgICAgICAgPyBzZXRGb3JtRXJyb3IobnVsbClcbiAgICAgICAgOiBzZXRGb3JtRXJyb3IoYCR7dmFsaWRhdGlvblNldHRpbmc/LnZhbGlkYXRpb25NZXNzYWdlfWApO1xuICAgIH1cbiAgICBzZXRWYWx1ZShwYXNzVmFsKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVSZXBlYXRJbnB1dENoYW5nZSA9IChlKSA9PiB7XG4gICAgbGV0IHJlcGVhdFZhbCA9IGUudGFyZ2V0LnZhbHVlO1xuXG4gICAgaWYgKHJlcGVhdElucHV0Py52YWxpZGF0aW9uTWVzc2FnZSkge1xuICAgICAgISFyZXBlYXRWYWwgJiYgaXNWYWx1ZUVxdWFsKHZhbHVlLCByZXBlYXRWYWwpXG4gICAgICAgID8gc2V0UmVwZWF0SW5wdXRFcnJvcihudWxsKVxuICAgICAgICA6IHNldFJlcGVhdElucHV0RXJyb3IoYCR7cmVwZWF0SW5wdXQ/LnZhbGlkYXRpb25NZXNzYWdlfWApO1xuICAgIH1cbiAgICBzZXRSZXBlYXRWYWx1ZShyZXBlYXRWYWwpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZURpc2FibGVCdXR0b24gPSAoKSA9PiB7XG4gICAgaWYgKGNvbmZpcm1EaXNhYmxlZCkgcmV0dXJuIHRydWU7XG5cbiAgICBpZiAoaXNNYW5kYXRvcnlDaGVja0JveCAmJiAhaXNDaGVja2VkKSByZXR1cm4gdHJ1ZTtcblxuICAgIGlmIChpbmZvcm1hdGlvbk9ubHlNb2RlKSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAocmVwZWF0SW5wdXQpIHtcbiAgICAgIHJldHVybiByZXBlYXRWYWx1ZSA/ICEhcmVwZWF0SW5wdXRFcnJvciA6IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZSA/ICEhZm9ybUVycm9yIDogdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2hlY2tCb3ggPSAoKSA9PiB7XG4gICAgc2V0SXNDaGVja2VkKCFpc0NoZWNrZWQpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHtzaG93TW9kYWwgJiYgKFxuICAgICAgICA8UmVhY3RNb2RhbFxuICAgICAgICAgIGlzT3Blbj17c2hvd01vZGFsfVxuICAgICAgICAgIHN0eWxlPXtoYW5kbGVUaGVtZSh0aGVtZSwgcG9zaXRpb24pfVxuICAgICAgICAgIHNob3VsZENsb3NlT25Fc2NcbiAgICAgICAgICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrXG4gICAgICAgICAgcG9ydGFsQ2xhc3NOYW1lPXtwb3J0YWxDbGFzc31cbiAgICAgICAgICByb2xlPVwiZGlhbG9nXCJcbiAgICAgICAgICBhcmlhLW1vZGFsPVwidHJ1ZVwiXG4gICAgICAgID5cbiAgICAgICAgICA8TW9kYWxDb250YWluZXIgcG9zaXRpb249e3Bvc2l0aW9ufSByZWY9e3JlZn0+XG4gICAgICAgICAgICB7d2l0aEhlYWRlciAmJiAoXG4gICAgICAgICAgICAgIDxNb2RhbEhlYWRlclxuICAgICAgICAgICAgICAgIHRoZW1lTW9kZT17dGhlbWVNb2RlfVxuICAgICAgICAgICAgICAgIGhlYWRlckxvZ289e2hlYWRlckxvZ299XG4gICAgICAgICAgICAgICAgb25DbG9zZT17XG4gICAgICAgICAgICAgICAgICBoaWRlWEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6ICgpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkRpc21pc3MgJiYgb25EaXNtaXNzKERpc21pc3NPcmlnaW4uSGVhZGVyQ2xvc2VCdXR0b24pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHtib2R5SW1nICYmIDxJbWFnZVdyYXBwZXI+e2JvZHlJbWd9PC9JbWFnZVdyYXBwZXI+fVxuICAgICAgICAgICAgPFN0eWxlZENhcHRpb24gcG9zaXRpb249e3Bvc2l0aW9ufT5cbiAgICAgICAgICAgICAgPFN0eWxlZENhcHRpb25UZXh0IHNpemU9ezF9IHNjYWxlPVwibGdcIj5cbiAgICAgICAgICAgICAgICB7dGl0bGV9XG4gICAgICAgICAgICAgIDwvU3R5bGVkQ2FwdGlvblRleHQ+XG4gICAgICAgICAgICA8L1N0eWxlZENhcHRpb24+XG4gICAgICAgICAgICA8RmxleFJvdyBqdXN0aWZ5PVwibGVmdFwiPlxuICAgICAgICAgICAgICA8U3R5bGVkSW5mb3JtYXRpb25UZXh0IHBvc2l0aW9uPXtwb3NpdGlvbn0gc2l6ZT17M30gc2NhbGU9XCJzbVwiPlxuICAgICAgICAgICAgICAgIHtpbmZvcm1hdGlvbn1cbiAgICAgICAgICAgICAgPC9TdHlsZWRJbmZvcm1hdGlvblRleHQ+XG4gICAgICAgICAgICA8L0ZsZXhSb3c+XG4gICAgICAgICAgICB7IWluZm9ybWF0aW9uT25seU1vZGUgJiYgKFxuICAgICAgICAgICAgICA8RmxleFJvdz5cbiAgICAgICAgICAgICAgICA8U3R5bGVkSW5wdXRcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17aGFuZGxlRW50ZXJLZXlEb3dufVxuICAgICAgICAgICAgICAgICAgbGFiZWw9ezxCb2R5VGV4dCBzaXplPXsyfT57aW5wdXRMYWJlbH08L0JvZHlUZXh0Pn1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtwbGFjZWhvbGRlcn1cbiAgICAgICAgICAgICAgICAgIG1hcmdpbj17JzE2cHggMCd9XG4gICAgICAgICAgICAgICAgICBlcnJvcj17ISFmb3JtRXJyb3J9XG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uVHlwZT17aW5wdXRUeXBlfVxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvblRleHQ9e2Zvcm1FcnJvcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0ZsZXhSb3c+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgeyFpbmZvcm1hdGlvbk9ubHlNb2RlICYmIHJlcGVhdElucHV0ICYmIChcbiAgICAgICAgICAgICAgPEZsZXhSb3c+XG4gICAgICAgICAgICAgICAgPFN0eWxlZElucHV0XG4gICAgICAgICAgICAgICAgICByZXF1aXJlZD17cmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgICB2YWx1ZT17cmVwZWF0VmFsdWV9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlUmVwZWF0SW5wdXRDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICBvbktleURvd249e2hhbmRsZUVudGVyS2V5RG93bn1cbiAgICAgICAgICAgICAgICAgIGxhYmVsPXs8Qm9keVRleHQgc2l6ZT17Mn0+e3JlcGVhdElucHV0Py5sYWJlbH08L0JvZHlUZXh0Pn1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtyZXBlYXRJbnB1dD8ucGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgICAgICBlcnJvcj17ISFyZXBlYXRJbnB1dEVycm9yfVxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvblR5cGU9e2lucHV0VHlwZX1cbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25UZXh0PXtyZXBlYXRJbnB1dEVycm9yfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvRmxleFJvdz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7d2FybmluZ01lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICA8V2FybmluZ01lc3NhZ2VcbiAgICAgICAgICAgICAgICB0aXRsZT17d2FybmluZ01lc3NhZ2UudGl0bGV9XG4gICAgICAgICAgICAgICAgbWVzc2FnZT17d2FybmluZ01lc3NhZ2UubWVzc2FnZX1cbiAgICAgICAgICAgICAgICBtYXJnaW49e3dhcm5pbmdNZXNzYWdlLm1hcmdpbn1cbiAgICAgICAgICAgICAgICBpY29uU3JjPXt3YXJuaW5nTWVzc2FnZS5pY29uU3JjfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHtjaGVja2JveExhYmVsICYmIChcbiAgICAgICAgICAgICAgPENoZWNrQm94Q29udGFpbmVyIHBvc2l0aW9uPXtwb3NpdGlvbn0+XG4gICAgICAgICAgICAgICAgPENoZWNrYm94XG4gICAgICAgICAgICAgICAgICBjaGVja2VkPXtpc0NoZWNrZWR9XG4gICAgICAgICAgICAgICAgICBsYWJlbD17Y2hlY2tib3hMYWJlbH1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGVja0JveH1cbiAgICAgICAgICAgICAgICAgIGNoZWNrYm94Rm9udFNpemU9e0NoZWNrYm94Rm9udFNpemUuc21hbGx9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9DaGVja0JveENvbnRhaW5lcj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8QnV0dG9uc0NvbnRhaW5lclxuICAgICAgICAgICAgICBwb3NpdGlvbj17cG9zaXRpb259XG4gICAgICAgICAgICAgIGdhcD17JzE2cHgnfVxuICAgICAgICAgICAgICBqdXN0aWZ5PXsnc3BhY2UtYmV0d2Vlbid9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtkaXNtaXNzTGFiZWwgJiYgKFxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgIGNvbG9yPXsnc2Vjb25kYXJ5Qmx1ZSd9XG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICBvbkRpc21pc3MgJiYgb25EaXNtaXNzKERpc21pc3NPcmlnaW4uRGlzbWlzc0J1dHRvbilcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshIWRpc21pc3NEaXNhYmxlZH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7ZGlzbWlzc0xhYmVsfVxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgY29sb3I9e2NvbmZpcm1Db2xvciA9PT0gJ3JlZCcgPyAncHJpbWFyeVJlZCcgOiAncHJpbWFyeUJsdWUnfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZU9uU3VibWl0fVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtoYW5kbGVEaXNhYmxlQnV0dG9uKCl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7Y29uZmlybUxhYmVsfVxuICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvQnV0dG9uc0NvbnRhaW5lcj5cbiAgICAgICAgICA8L01vZGFsQ29udGFpbmVyPlxuICAgICAgICA8L1JlYWN0TW9kYWw+XG4gICAgICApfVxuICAgIDwvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVXNlcklucHV0V2luZG93O1xuIl19