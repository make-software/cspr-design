import { __assign } from "tslib";
import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { useEffect, useState } from 'react';
import styled, { useTheme } from 'styled-components';
import FlexRow from '../flex-row/flex-row';
import FlexColumn from '../flex-column/flex-column';
import Button from '../button/button';
import Input from '../input/input';
import BodyText from '../body-text/body-text';
import ReactModal from 'react-modal';
import { useClickAway } from '../../hooks/use-click-away';
import { useEscapeKey } from '../../hooks/use-escape-key';
import ModalHeader from '../modal-header/modal-header';
import SubtitleText from '../subtitle-text/subtitle-text';
import { ModalPosition, } from '../confirmation-window/confirmation-window';
import Checkbox, { CheckboxFontSize } from '../checkbox/checkbox';
import WarningMessage from '../warning-message/warning-message';
export var DismissOrigin;
(function (DismissOrigin) {
    DismissOrigin[DismissOrigin["HeaderCloseButton"] = 0] = "HeaderCloseButton";
    DismissOrigin[DismissOrigin["DismissButton"] = 1] = "DismissButton";
    DismissOrigin[DismissOrigin["Overlay"] = 2] = "Overlay";
    DismissOrigin[DismissOrigin["ESC"] = 3] = "ESC";
})(DismissOrigin || (DismissOrigin = {}));
var centerModalStyles = {
    left: '50%',
    right: 'auto',
    bottom: 'auto',
    border: 'none',
    borderRadius: '12px',
    padding: '32px 24px 24px 24px',
    top: '50%',
    transform: 'translate(-50%, -50%)',
};
var topModalStyles = {
    top: '40px',
    left: 'auto',
    right: '40px',
    border: 'none',
    bottom: 'auto',
    borderRadius: '12px',
    padding: '16px 24px 24px 24px',
};
var ModalContainer = styled(FlexColumn)(function (_a) {
    var theme = _a.theme, position = _a.position;
    return theme.withMedia({
        width: position === ModalPosition.TopRight
            ? ['300px', '350px', '350px']
            : ['300px', '440px', '496px'],
        background: theme.styleguideColors.backgroundPrimary,
        borderColor: theme.styleguideColors.backgroundPrimary,
    });
});
var ImageWrapper = styled(FlexRow)(function (_a) {
    var theme = _a.theme;
    return theme.withMedia({
        margin: '15px 0 24px 0',
    });
});
var StyledCaption = styled.div(function (_a) {
    var theme = _a.theme, position = _a.position;
    return theme.withMedia({
        textAlign: 'left',
        marginBottom: '16px',
    });
});
var StyledCaptionText = styled(SubtitleText)(function (_a) {
    var theme = _a.theme;
    return theme.withMedia({
        fontWeight: [600, 600, 700],
        fontSize: ['20px', '24px', '24px'],
        color: theme.styleguideColors.contentPrimary,
    });
});
var StyledInformationText = styled(BodyText)(function (_a) {
    var theme = _a.theme, position = _a.position;
    return theme.withMedia({
        color: theme.styleguideColors.contentSecondary,
    });
});
var ButtonsContainer = styled(FlexRow)(function (_a) {
    var theme = _a.theme, position = _a.position;
    return theme.withMedia({
        marginTop: position === ModalPosition.TopRight ? '40px' : ['32px', '32px', '56px'],
        flexDirection: ['column', 'row', 'row'],
    });
});
var StyledInput = styled(Input)(function (_a) {
    var theme = _a.theme, margin = _a.margin;
    return theme.withMedia({
        width: '100%',
        margin: margin,
        ':focus': {
            outline: 'none',
        },
    });
});
var CheckBoxContainer = styled.div(function (_a) {
    var theme = _a.theme, position = _a.position;
    return theme.withMedia({
        margin: position === ModalPosition.TopRight
            ? '40px 0 -20px 0'
            : ['40px 0 -20px 0', '40px 0 -20px 0', '72px 0 -40px 0'],
    });
});
var handleTheme = function (theme, position) {
    var modalStyle = {
        overlay: {
            backgroundColor: theme.styleguideColors.backgroundOverlay,
            zIndex: 15,
        },
        content: position === ModalPosition.TopRight
            ? __assign(__assign({}, topModalStyles), {
                backgroundColor: theme.styleguideColors.backgroundPrimary,
                borderColor: theme.styleguideColors.backgroundPrimary,
            }) : __assign(__assign({}, centerModalStyles), {
            backgroundColor: theme.styleguideColors.backgroundPrimary,
            borderColor: theme.styleguideColors.backgroundPrimary,
        }),
    };
    return modalStyle;
};
export var UserInputWindow = function (_a) {
    var isOpen = _a.isOpen, position = _a.position, title = _a.title, withHeader = _a.withHeader, headerLogo = _a.headerLogo, bodyImg = _a.bodyImg, information = _a.information, confirmLabel = _a.confirmLabel, confirmDisabled = _a.confirmDisabled, confirmColor = _a.confirmColor, onConfirm = _a.onConfirm, dismissLabel = _a.dismissLabel, dismissDisabled = _a.dismissDisabled, shouldCloseOnEsc = _a.shouldCloseOnEsc, shouldCloseOnOverlayClick = _a.shouldCloseOnOverlayClick, onDismiss = _a.onDismiss, themeMode = _a.themeMode, inputType = _a.inputType, placeholder = _a.placeholder, _b = _a.required, required = _b === void 0 ? false : _b, inputLabel = _a.inputLabel, checkboxLabel = _a.checkboxLabel, validationSetting = _a.validationSetting, repeatInput = _a.repeatInput, warningMessage = _a.warningMessage, informationOnlyMode = _a.informationOnlyMode, isMandatoryCheckBox = _a.isMandatoryCheckBox, hideXButton = _a.hideXButton, resetForm = _a.resetForm, _c = _a.portalClass, portalClass = _c === void 0 ? 'portal' : _c;
    var theme = useTheme();
    var _d = useState(''), value = _d[0], setValue = _d[1];
    var _e = useState(''), repeatValue = _e[0], setRepeatValue = _e[1];
    var _f = useState(false), isChecked = _f[0], setIsChecked = _f[1];
    var _g = useState(null), formError = _g[0], setFormError = _g[1];
    var _h = useState(null), repeatInputError = _h[0], setRepeatInputError = _h[1];
    var _j = useState(isOpen), showModal = _j[0], setShowModal = _j[1];
    useEscapeKey(function () {
        if (shouldCloseOnEsc) {
            setShowModal(false);
            onDismiss && onDismiss(DismissOrigin.ESC);
        }
    });
    useEffect(function () {
        resetForm && setValue('');
    }, [resetForm]);
    var ref = useClickAway({
        callback: function () {
            if (shouldCloseOnOverlayClick) {
                setShowModal(false);
                onDismiss && onDismiss(DismissOrigin.Overlay);
            }
        },
    }).ref;
    var regexMatched = function (val) {
        return !!val && (validationSetting === null || validationSetting === void 0 ? void 0 : validationSetting.regexpPattern.test(val));
    };
    var isValueEqual = function (firstVal, secondVal) {
        return firstVal && secondVal && firstVal === secondVal;
    };
    var handleEnterKeyDown = function (e) {
        var val = e.target.value;
        if (val && !formError) {
            if (e.key === 'Enter') {
                onConfirm(val, isChecked);
            }
        }
        else
            return;
    };
    var handleOnSubmit = function () {
        onConfirm(value, isChecked);
    };
    var handleInputChange = function (e) {
        var passVal = e.target.value;
        repeatInput && repeatValue && setRepeatValue('');
        if ((validationSetting === null || validationSetting === void 0 ? void 0 : validationSetting.regexpPattern) &&
            (validationSetting === null || validationSetting === void 0 ? void 0 : validationSetting.validationMessage)) {
            !!passVal && regexMatched(passVal)
                ? setFormError(null)
                : setFormError("".concat(validationSetting === null || validationSetting === void 0 ? void 0 : validationSetting.validationMessage));
        }
        setValue(passVal);
    };
    var handleRepeatInputChange = function (e) {
        var repeatVal = e.target.value;
        if (repeatInput === null || repeatInput === void 0 ? void 0 : repeatInput.validationMessage) {
            !!repeatVal && isValueEqual(value, repeatVal)
                ? setRepeatInputError(null)
                : setRepeatInputError("".concat(repeatInput === null || repeatInput === void 0 ? void 0 : repeatInput.validationMessage));
        }
        setRepeatValue(repeatVal);
    };
    var handleDisableButton = function () {
        if (confirmDisabled)
            return true;
        if (isMandatoryCheckBox && !isChecked)
            return true;
        if (informationOnlyMode)
            return false;
        if (repeatInput) {
            return repeatValue ? !!repeatInputError : true;
        }
        else {
            return value ? !!formError : true;
        }
    };
    var handleCheckBox = function () {
        setIsChecked(!isChecked);
    };
    return (_jsx(_Fragment, { children: showModal && (_jsx(ReactModal, __assign({ isOpen: showModal, style: handleTheme(theme, position), shouldCloseOnEsc: true, shouldCloseOnOverlayClick: true, portalClassName: portalClass, role: "dialog", "aria-modal": "true" }, { children: _jsxs(ModalContainer, __assign({ position: position, ref: ref }, { children: [withHeader && (_jsx(ModalHeader, { themeMode: themeMode, headerLogo: headerLogo, onClose: hideXButton
                            ? undefined
                            : function () {
                                return onDismiss && onDismiss(DismissOrigin.HeaderCloseButton);
                            } })), bodyImg && _jsx(ImageWrapper, { children: bodyImg }), _jsx(StyledCaption, __assign({ position: position }, { children: _jsx(StyledCaptionText, __assign({ size: 1, scale: "lg" }, { children: title })) })), _jsx(FlexRow, __assign({ justify: "left" }, { children: _jsx(StyledInformationText, __assign({ position: position, size: 3, scale: "sm" }, { children: information })) })), !informationOnlyMode && (_jsx(FlexRow, { children: _jsx(StyledInput, { required: required, value: value, onChange: handleInputChange, onKeyDown: handleEnterKeyDown, label: _jsx(BodyText, __assign({ size: 2 }, { children: inputLabel })), placeholder: placeholder, margin: '16px 0', error: !!formError, validationType: inputType, validationText: formError }) })), !informationOnlyMode && repeatInput && (_jsx(FlexRow, { children: _jsx(StyledInput, { required: required, value: repeatValue, onChange: handleRepeatInputChange, onKeyDown: handleEnterKeyDown, label: _jsx(BodyText, __assign({ size: 2 }, { children: repeatInput === null || repeatInput === void 0 ? void 0 : repeatInput.label })), placeholder: repeatInput === null || repeatInput === void 0 ? void 0 : repeatInput.placeholder, error: !!repeatInputError, validationType: inputType, validationText: repeatInputError }) })), warningMessage && (_jsx(WarningMessage, { title: warningMessage.title, message: warningMessage.message, margin: warningMessage.margin, iconSrc: warningMessage.iconSrc })), checkboxLabel && (_jsx(CheckBoxContainer, __assign({ position: position }, { children: _jsx(Checkbox, { checked: isChecked, label: checkboxLabel, onChange: handleCheckBox, checkboxFontSize: CheckboxFontSize.small }) }))), _jsxs(ButtonsContainer, __assign({ position: position, gap: '16px', justify: 'space-between' }, { children: [dismissLabel && (_jsx(Button, __assign({ color: 'secondaryBlue', onClick: function () {
                                    return onDismiss && onDismiss(DismissOrigin.DismissButton);
                                }, disabled: !!dismissDisabled }, { children: dismissLabel }))), _jsx(Button, __assign({ color: confirmColor === 'red' ? 'primaryRed' : 'primaryBlue', onClick: handleOnSubmit, disabled: handleDisableButton() }, { children: confirmLabel }))] }))] })) }))) }));
};
export default UserInputWindow;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci1pbnB1dC13aW5kb3cuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvdXNlci1pbnB1dC13aW5kb3cvdXNlci1pbnB1dC13aW5kb3cudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBYyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFDbkQsT0FBTyxNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNyRCxPQUFPLE9BQU8sTUFBTSxzQkFBc0IsQ0FBQztBQUMzQyxPQUFPLFVBQVUsTUFBTSw0QkFBNEIsQ0FBQztBQUNwRCxPQUFPLE1BQU0sTUFBTSxrQkFBa0IsQ0FBQztBQUN0QyxPQUFPLEtBQThCLE1BQU0sZ0JBQWdCLENBQUM7QUFDNUQsT0FBTyxRQUFRLE1BQU0sd0JBQXdCLENBQUM7QUFDOUMsT0FBTyxVQUFVLE1BQU0sYUFBYSxDQUFDO0FBQ3JDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDMUQsT0FBTyxXQUFXLE1BQU0sOEJBQThCLENBQUM7QUFDdkQsT0FBTyxZQUFZLE1BQU0sZ0NBQWdDLENBQUM7QUFFMUQsT0FBTyxFQUNMLGFBQWEsR0FFZCxNQUFNLDRDQUE0QyxDQUFDO0FBQ3BELE9BQU8sUUFBUSxFQUFFLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNsRSxPQUFPLGNBRU4sTUFBTSxvQ0FBb0MsQ0FBQztBQThDNUMsTUFBTSxDQUFOLElBQVksYUFLWDtBQUxELFdBQVksYUFBYTtJQUN2QiwyRUFBaUIsQ0FBQTtJQUNqQixtRUFBYSxDQUFBO0lBQ2IsdURBQU8sQ0FBQTtJQUNQLCtDQUFHLENBQUE7QUFDTCxDQUFDLEVBTFcsYUFBYSxLQUFiLGFBQWEsUUFLeEI7QUFF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QUV2QixZQUFZLElBQUksQ0FDZixLQUFDLE1BQU0sYUFDTCxLQUFLLEVBQUUsZUFBZSxFQUN0QixPQUFPLEVBQUU7b0NBQ1AsT0FBQSxTQUFTLElBQUksU0FBUyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUM7Z0NBQW5ELENBQW1ELEVBRXJELFFBQVEsRUFBRSxDQUFDLENBQUMsZUFBZSxnQkFFMUIsWUFBWSxJQUNOLENBQ1YsRUFDRCxLQUFDLE1BQU0sYUFDTCxLQUFLLEVBQUUsWUFBWSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxhQUFhLEVBQzVELE9BQU8sRUFBRSxjQUFjLEVBQ3ZCLFFBQVEsRUFBRSxtQkFBbUIsRUFBRSxnQkFFOUIsWUFBWSxJQUNOLEtBQ1EsS0FDSixJQUNOLENBQ2QsR0FDQSxDQUNKLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixlQUFlLGVBQWUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCwgeyB1c2VUaGVtZSB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCBGbGV4Um93IGZyb20gJy4uL2ZsZXgtcm93L2ZsZXgtcm93JztcbmltcG9ydCBGbGV4Q29sdW1uIGZyb20gJy4uL2ZsZXgtY29sdW1uL2ZsZXgtY29sdW1uJztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vYnV0dG9uL2J1dHRvbic7XG5pbXBvcnQgSW5wdXQsIHsgSW5wdXRWYWxpZGF0aW9uVHlwZSB9IGZyb20gJy4uL2lucHV0L2lucHV0JztcbmltcG9ydCBCb2R5VGV4dCBmcm9tICcuLi9ib2R5LXRleHQvYm9keS10ZXh0JztcbmltcG9ydCBSZWFjdE1vZGFsIGZyb20gJ3JlYWN0LW1vZGFsJztcbmltcG9ydCB7IHVzZUNsaWNrQXdheSB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZS1jbGljay1hd2F5JztcbmltcG9ydCB7IHVzZUVzY2FwZUtleSB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZS1lc2NhcGUta2V5JztcbmltcG9ydCBNb2RhbEhlYWRlciBmcm9tICcuLi9tb2RhbC1oZWFkZXIvbW9kYWwtaGVhZGVyJztcbmltcG9ydCBTdWJ0aXRsZVRleHQgZnJvbSAnLi4vc3VidGl0bGUtdGV4dC9zdWJ0aXRsZS10ZXh0JztcbmltcG9ydCB7IFRoZW1lTW9kZVR5cGUgfSBmcm9tICcuLi9uYXZpZ2F0aW9uL2NzcHItcHJvZHVjdHMtbWVudS9wcm9kdWN0cy1tZW51LWl0ZW0nO1xuaW1wb3J0IHtcbiAgTW9kYWxQb3NpdGlvbixcbiAgTW9kYWxQb3NpdGlvblByb3BzLFxufSBmcm9tICcuLi9jb25maXJtYXRpb24td2luZG93L2NvbmZpcm1hdGlvbi13aW5kb3cnO1xuaW1wb3J0IENoZWNrYm94LCB7IENoZWNrYm94Rm9udFNpemUgfSBmcm9tICcuLi9jaGVja2JveC9jaGVja2JveCc7XG5pbXBvcnQgV2FybmluZ01lc3NhZ2UsIHtcbiAgV2FybmluZ01lc3NhZ2VQcm9wcyxcbn0gZnJvbSAnLi4vd2FybmluZy1tZXNzYWdlL3dhcm5pbmctbWVzc2FnZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvblByb3BzIHtcbiAgdmFsaWRhdGlvbk1lc3NhZ2U6IHN0cmluZztcbiAgcmVnZXhwUGF0dGVybjogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcGVhdElucHV0UHJvcHMge1xuICB2YWxpZGF0aW9uTWVzc2FnZTogc3RyaW5nO1xuICBsYWJlbD86IHN0cmluZztcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlcklucHV0V2luZG93U2NlbmVQcm9wcyB7XG4gIGlzT3BlbjogYm9vbGVhbjtcbiAgYm9keUltZz86IFJlYWN0LlJlYWN0RWxlbWVudDtcbiAgcG9zaXRpb246IE1vZGFsUG9zaXRpb247XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHdpdGhIZWFkZXI/OiBib29sZWFuO1xuICByZXNldEZvcm0/OiBib29sZWFuO1xuICBoZWFkZXJMb2dvPzogUmVhY3QuUmVhY3RFbGVtZW50O1xuICBpbmZvcm1hdGlvbj86IFJlYWN0LlJlYWN0RWxlbWVudCB8IHN0cmluZztcbiAgcmVwZWF0SW5wdXQ/OiBSZXBlYXRJbnB1dFByb3BzO1xuICB3YXJuaW5nTWVzc2FnZT86IFdhcm5pbmdNZXNzYWdlUHJvcHM7XG4gIGluZm9ybWF0aW9uT25seU1vZGU/OiBib29sZWFuO1xuICBoaWRlWEJ1dHRvbj86IGJvb2xlYW47XG4gIGNvbmZpcm1MYWJlbDogc3RyaW5nO1xuICBjb25maXJtRGlzYWJsZWQ/OiBib29sZWFuO1xuICBvbkNvbmZpcm06ICh2YWx1ZTogc3RyaW5nLCBpc0NoZWNrZWQ/OiBib29sZWFuKSA9PiB2b2lkO1xuICBjb25maXJtQ29sb3I/OiBzdHJpbmc7XG4gIGRpc21pc3NMYWJlbD86IHN0cmluZztcbiAgZGlzbWlzc0Rpc2FibGVkPzogYm9vbGVhbjtcbiAgb25EaXNtaXNzPzogKG9yaWdpbjogRGlzbWlzc09yaWdpbikgPT4gdm9pZDtcbiAgaXNNYW5kYXRvcnlDaGVja0JveD86IGJvb2xlYW47XG4gIGlucHV0TGFiZWw/OiBzdHJpbmc7XG4gIGlucHV0VHlwZT86IElucHV0VmFsaWRhdGlvblR5cGU7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICByZXF1aXJlZD86IGJvb2xlYW47XG4gIHNob3VsZENsb3NlT25Fc2M/OiBib29sZWFuO1xuICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrPzogYm9vbGVhbjtcbiAgdGhlbWVNb2RlPzogVGhlbWVNb2RlVHlwZTtcbiAgY2hlY2tib3hMYWJlbD86IHN0cmluZyB8IFJlYWN0LlJlYWN0RWxlbWVudDtcbiAgdmFsaWRhdGlvblNldHRpbmc/OiBWYWxpZGF0aW9uUHJvcHM7XG4gIHBvcnRhbENsYXNzPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBEaXNtaXNzT3JpZ2luIHtcbiAgSGVhZGVyQ2xvc2VCdXR0b24sXG4gIERpc21pc3NCdXR0b24sXG4gIE92ZXJsYXksXG4gIEVTQyxcbn1cblxuY29uc3QgY2VudGVyTW9kYWxTdHlsZXMgPSB7XG4gIGxlZnQ6ICc1MCUnLFxuICByaWdodDogJ2F1dG8nLFxuICBib3R0b206ICdhdXRvJyxcbiAgYm9yZGVyOiAnbm9uZScsXG4gIGJvcmRlclJhZGl1czogJzEycHgnLFxuICBwYWRkaW5nOiAnMzJweCAyNHB4IDI0cHggMjRweCcsXG4gIHRvcDogJzUwJScsXG4gIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG59O1xuXG5jb25zdCB0b3BNb2RhbFN0eWxlcyA9IHtcbiAgdG9wOiAnNDBweCcsXG4gIGxlZnQ6ICdhdXRvJyxcbiAgcmlnaHQ6ICc0MHB4JyxcbiAgYm9yZGVyOiAnbm9uZScsXG4gIGJvdHRvbTogJ2F1dG8nLFxuICBib3JkZXJSYWRpdXM6ICcxMnB4JyxcbiAgcGFkZGluZzogJzE2cHggMjRweCAyNHB4IDI0cHgnLFxufTtcblxuY29uc3QgTW9kYWxDb250YWluZXIgPSBzdHlsZWQoRmxleENvbHVtbik8TW9kYWxQb3NpdGlvblByb3BzPihcbiAgKHsgdGhlbWUsIHBvc2l0aW9uIH0pID0+XG4gICAgdGhlbWUud2l0aE1lZGlhKHtcbiAgICAgIHdpZHRoOlxuICAgICAgICBwb3NpdGlvbiA9PT0gTW9kYWxQb3NpdGlvbi5Ub3BSaWdodFxuICAgICAgICAgID8gWyczMDBweCcsICczNTBweCcsICczNTBweCddXG4gICAgICAgICAgOiBbJzMwMHB4JywgJzQ0MHB4JywgJzQ5NnB4J10sXG4gICAgICBiYWNrZ3JvdW5kOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmJhY2tncm91bmRQcmltYXJ5LFxuICAgICAgYm9yZGVyQ29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuYmFja2dyb3VuZFByaW1hcnksXG4gICAgfSlcbik7XG5cbmNvbnN0IEltYWdlV3JhcHBlciA9IHN0eWxlZChGbGV4Um93KSgoeyB0aGVtZSB9KSA9PlxuICB0aGVtZS53aXRoTWVkaWEoe1xuICAgIG1hcmdpbjogJzE1cHggMCAyNHB4IDAnLFxuICB9KVxuKTtcblxuY29uc3QgU3R5bGVkQ2FwdGlvbiA9IHN0eWxlZC5kaXY8TW9kYWxQb3NpdGlvblByb3BzPigoeyB0aGVtZSwgcG9zaXRpb24gfSkgPT5cbiAgdGhlbWUud2l0aE1lZGlhKHtcbiAgICB0ZXh0QWxpZ246ICdsZWZ0JyxcbiAgICBtYXJnaW5Cb3R0b206ICcxNnB4JyxcbiAgfSlcbik7XG5cbmNvbnN0IFN0eWxlZENhcHRpb25UZXh0ID0gc3R5bGVkKFN1YnRpdGxlVGV4dCkoKHsgdGhlbWUgfSkgPT5cbiAgdGhlbWUud2l0aE1lZGlhKHtcbiAgICBmb250V2VpZ2h0OiBbNjAwLCA2MDAsIDcwMF0sXG4gICAgZm9udFNpemU6IFsnMjBweCcsICcyNHB4JywgJzI0cHgnXSxcbiAgICBjb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5jb250ZW50UHJpbWFyeSxcbiAgfSlcbik7XG5cbmNvbnN0IFN0eWxlZEluZm9ybWF0aW9uVGV4dCA9IHN0eWxlZChCb2R5VGV4dCk8TW9kYWxQb3NpdGlvblByb3BzPihcbiAgKHsgdGhlbWUsIHBvc2l0aW9uIH0pID0+XG4gICAgdGhlbWUud2l0aE1lZGlhKHtcbiAgICAgIGNvbG9yOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmNvbnRlbnRTZWNvbmRhcnksXG4gICAgfSlcbik7XG5cbmNvbnN0IEJ1dHRvbnNDb250YWluZXIgPSBzdHlsZWQoRmxleFJvdyk8TW9kYWxQb3NpdGlvblByb3BzPihcbiAgKHsgdGhlbWUsIHBvc2l0aW9uIH0pID0+XG4gICAgdGhlbWUud2l0aE1lZGlhKHtcbiAgICAgIG1hcmdpblRvcDpcbiAgICAgICAgcG9zaXRpb24gPT09IE1vZGFsUG9zaXRpb24uVG9wUmlnaHQgPyAnNDBweCcgOiBbJzMycHgnLCAnMzJweCcsICc1NnB4J10sXG4gICAgICBmbGV4RGlyZWN0aW9uOiBbJ2NvbHVtbicsICdyb3cnLCAncm93J10sXG4gICAgfSlcbik7XG5cbmNvbnN0IFN0eWxlZElucHV0ID0gc3R5bGVkKElucHV0KTx7IG1hcmdpbj86IHN0cmluZyB9PigoeyB0aGVtZSwgbWFyZ2luIH0pID0+XG4gIHRoZW1lLndpdGhNZWRpYSh7XG4gICAgd2lkdGg6ICcxMDAlJyxcbiAgICBtYXJnaW46IG1hcmdpbixcbiAgICAnOmZvY3VzJzoge1xuICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgIH0sXG4gIH0pXG4pO1xuXG5jb25zdCBDaGVja0JveENvbnRhaW5lciA9IHN0eWxlZC5kaXY8TW9kYWxQb3NpdGlvblByb3BzPihcbiAgKHsgdGhlbWUsIHBvc2l0aW9uIH0pID0+XG4gICAgdGhlbWUud2l0aE1lZGlhKHtcbiAgICAgIG1hcmdpbjpcbiAgICAgICAgcG9zaXRpb24gPT09IE1vZGFsUG9zaXRpb24uVG9wUmlnaHRcbiAgICAgICAgICA/ICc0MHB4IDAgLTIwcHggMCdcbiAgICAgICAgICA6IFsnNDBweCAwIC0yMHB4IDAnLCAnNDBweCAwIC0yMHB4IDAnLCAnNzJweCAwIC00MHB4IDAnXSxcbiAgICB9KVxuKTtcblxuY29uc3QgaGFuZGxlVGhlbWUgPSAodGhlbWUsIHBvc2l0aW9uKSA9PiB7XG4gIGNvbnN0IG1vZGFsU3R5bGUgPSB7XG4gICAgb3ZlcmxheToge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmJhY2tncm91bmRPdmVybGF5LFxuICAgICAgekluZGV4OiAxNSxcbiAgICB9LFxuICAgIGNvbnRlbnQ6XG4gICAgICBwb3NpdGlvbiA9PT0gTW9kYWxQb3NpdGlvbi5Ub3BSaWdodFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIC4uLnRvcE1vZGFsU3R5bGVzLFxuICAgICAgICAgICAgLi4ue1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuYmFja2dyb3VuZFByaW1hcnksXG4gICAgICAgICAgICAgIGJvcmRlckNvbG9yOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmJhY2tncm91bmRQcmltYXJ5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgLi4uY2VudGVyTW9kYWxTdHlsZXMsXG4gICAgICAgICAgICAuLi57XG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5iYWNrZ3JvdW5kUHJpbWFyeSxcbiAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuYmFja2dyb3VuZFByaW1hcnksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gIH07XG5cbiAgcmV0dXJuIG1vZGFsU3R5bGU7XG59O1xuXG5leHBvcnQgY29uc3QgVXNlcklucHV0V2luZG93ID0gKHtcbiAgaXNPcGVuLFxuICBwb3NpdGlvbixcbiAgdGl0bGUsXG4gIHdpdGhIZWFkZXIsXG4gIGhlYWRlckxvZ28sXG4gIGJvZHlJbWcsXG4gIGluZm9ybWF0aW9uLFxuICBjb25maXJtTGFiZWwsXG4gIGNvbmZpcm1EaXNhYmxlZCxcbiAgY29uZmlybUNvbG9yLFxuICBvbkNvbmZpcm0sXG4gIGRpc21pc3NMYWJlbCxcbiAgZGlzbWlzc0Rpc2FibGVkLFxuICBzaG91bGRDbG9zZU9uRXNjLFxuICBzaG91bGRDbG9zZU9uT3ZlcmxheUNsaWNrLFxuICBvbkRpc21pc3MsXG4gIHRoZW1lTW9kZSxcbiAgaW5wdXRUeXBlLFxuICBwbGFjZWhvbGRlcixcbiAgcmVxdWlyZWQgPSBmYWxzZSxcbiAgaW5wdXRMYWJlbCxcbiAgY2hlY2tib3hMYWJlbCxcbiAgdmFsaWRhdGlvblNldHRpbmcsXG4gIHJlcGVhdElucHV0LFxuICB3YXJuaW5nTWVzc2FnZSxcbiAgaW5mb3JtYXRpb25Pbmx5TW9kZSxcbiAgaXNNYW5kYXRvcnlDaGVja0JveCxcbiAgaGlkZVhCdXR0b24sXG4gIHJlc2V0Rm9ybSxcbiAgcG9ydGFsQ2xhc3MgPSAncG9ydGFsJyxcbn06IFVzZXJJbnB1dFdpbmRvd1NjZW5lUHJvcHMpID0+IHtcbiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xuICBjb25zdCBbdmFsdWUsIHNldFZhbHVlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3JlcGVhdFZhbHVlLCBzZXRSZXBlYXRWYWx1ZV0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtpc0NoZWNrZWQsIHNldElzQ2hlY2tlZF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtmb3JtRXJyb3IsIHNldEZvcm1FcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3JlcGVhdElucHV0RXJyb3IsIHNldFJlcGVhdElucHV0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzaG93TW9kYWwsIHNldFNob3dNb2RhbF0gPSB1c2VTdGF0ZTxib29sZWFuPihpc09wZW4pO1xuXG4gIHVzZUVzY2FwZUtleSgoKSA9PiB7XG4gICAgaWYgKHNob3VsZENsb3NlT25Fc2MpIHtcbiAgICAgIHNldFNob3dNb2RhbChmYWxzZSk7XG4gICAgICBvbkRpc21pc3MgJiYgb25EaXNtaXNzKERpc21pc3NPcmlnaW4uRVNDKTtcbiAgICB9XG4gIH0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVzZXRGb3JtICYmIHNldFZhbHVlKCcnKTtcbiAgfSwgW3Jlc2V0Rm9ybV0pO1xuXG4gIGNvbnN0IHsgcmVmIH0gPSB1c2VDbGlja0F3YXkoe1xuICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICBpZiAoc2hvdWxkQ2xvc2VPbk92ZXJsYXlDbGljaykge1xuICAgICAgICBzZXRTaG93TW9kYWwoZmFsc2UpO1xuICAgICAgICBvbkRpc21pc3MgJiYgb25EaXNtaXNzKERpc21pc3NPcmlnaW4uT3ZlcmxheSk7XG4gICAgICB9XG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgcmVnZXhNYXRjaGVkID0gKHZhbCkgPT5cbiAgICAhIXZhbCAmJiB2YWxpZGF0aW9uU2V0dGluZz8ucmVnZXhwUGF0dGVybi50ZXN0KHZhbCk7XG5cbiAgY29uc3QgaXNWYWx1ZUVxdWFsID0gKGZpcnN0VmFsLCBzZWNvbmRWYWwpID0+XG4gICAgZmlyc3RWYWwgJiYgc2Vjb25kVmFsICYmIGZpcnN0VmFsID09PSBzZWNvbmRWYWw7XG5cbiAgY29uc3QgaGFuZGxlRW50ZXJLZXlEb3duID0gKGUpID0+IHtcbiAgICBsZXQgdmFsID0gZS50YXJnZXQudmFsdWU7XG5cbiAgICBpZiAodmFsICYmICFmb3JtRXJyb3IpIHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICBvbkNvbmZpcm0odmFsLCBpc0NoZWNrZWQpO1xuICAgICAgfVxuICAgIH0gZWxzZSByZXR1cm47XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlT25TdWJtaXQgPSAoKSA9PiB7XG4gICAgb25Db25maXJtKHZhbHVlLCBpc0NoZWNrZWQpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUlucHV0Q2hhbmdlID0gKGUpID0+IHtcbiAgICBsZXQgcGFzc1ZhbCA9IGUudGFyZ2V0LnZhbHVlO1xuXG4gICAgcmVwZWF0SW5wdXQgJiYgcmVwZWF0VmFsdWUgJiYgc2V0UmVwZWF0VmFsdWUoJycpO1xuXG4gICAgaWYgKFxuICAgICAgdmFsaWRhdGlvblNldHRpbmc/LnJlZ2V4cFBhdHRlcm4gJiZcbiAgICAgIHZhbGlkYXRpb25TZXR0aW5nPy52YWxpZGF0aW9uTWVzc2FnZVxuICAgICkge1xuICAgICAgISFwYXNzVmFsICYmIHJlZ2V4TWF0Y2hlZChwYXNzVmFsKVxuICAgICAgICA/IHNldEZvcm1FcnJvcihudWxsKVxuICAgICAgICA6IHNldEZvcm1FcnJvcihgJHt2YWxpZGF0aW9uU2V0dGluZz8udmFsaWRhdGlvbk1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHNldFZhbHVlKHBhc3NWYWwpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVJlcGVhdElucHV0Q2hhbmdlID0gKGUpID0+IHtcbiAgICBsZXQgcmVwZWF0VmFsID0gZS50YXJnZXQudmFsdWU7XG5cbiAgICBpZiAocmVwZWF0SW5wdXQ/LnZhbGlkYXRpb25NZXNzYWdlKSB7XG4gICAgICAhIXJlcGVhdFZhbCAmJiBpc1ZhbHVlRXF1YWwodmFsdWUsIHJlcGVhdFZhbClcbiAgICAgICAgPyBzZXRSZXBlYXRJbnB1dEVycm9yKG51bGwpXG4gICAgICAgIDogc2V0UmVwZWF0SW5wdXRFcnJvcihgJHtyZXBlYXRJbnB1dD8udmFsaWRhdGlvbk1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHNldFJlcGVhdFZhbHVlKHJlcGVhdFZhbCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRGlzYWJsZUJ1dHRvbiA9ICgpID0+IHtcbiAgICBpZiAoY29uZmlybURpc2FibGVkKSByZXR1cm4gdHJ1ZTtcblxuICAgIGlmIChpc01hbmRhdG9yeUNoZWNrQm94ICYmICFpc0NoZWNrZWQpIHJldHVybiB0cnVlO1xuXG4gICAgaWYgKGluZm9ybWF0aW9uT25seU1vZGUpIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChyZXBlYXRJbnB1dCkge1xuICAgICAgcmV0dXJuIHJlcGVhdFZhbHVlID8gISFyZXBlYXRJbnB1dEVycm9yIDogdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlID8gISFmb3JtRXJyb3IgOiB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVDaGVja0JveCA9ICgpID0+IHtcbiAgICBzZXRJc0NoZWNrZWQoIWlzQ2hlY2tlZCk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAge3Nob3dNb2RhbCAmJiAoXG4gICAgICAgIDxSZWFjdE1vZGFsXG4gICAgICAgICAgaXNPcGVuPXtzaG93TW9kYWx9XG4gICAgICAgICAgc3R5bGU9e2hhbmRsZVRoZW1lKHRoZW1lLCBwb3NpdGlvbil9XG4gICAgICAgICAgc2hvdWxkQ2xvc2VPbkVzY1xuICAgICAgICAgIHNob3VsZENsb3NlT25PdmVybGF5Q2xpY2tcbiAgICAgICAgICBwb3J0YWxDbGFzc05hbWU9e3BvcnRhbENsYXNzfVxuICAgICAgICAgIHJvbGU9XCJkaWFsb2dcIlxuICAgICAgICAgIGFyaWEtbW9kYWw9XCJ0cnVlXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxNb2RhbENvbnRhaW5lciBwb3NpdGlvbj17cG9zaXRpb259IHJlZj17cmVmfT5cbiAgICAgICAgICAgIHt3aXRoSGVhZGVyICYmIChcbiAgICAgICAgICAgICAgPE1vZGFsSGVhZGVyXG4gICAgICAgICAgICAgICAgdGhlbWVNb2RlPXt0aGVtZU1vZGV9XG4gICAgICAgICAgICAgICAgaGVhZGVyTG9nbz17aGVhZGVyTG9nb31cbiAgICAgICAgICAgICAgICBvbkNsb3NlPXtcbiAgICAgICAgICAgICAgICAgIGhpZGVYQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogKCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRGlzbWlzcyAmJiBvbkRpc21pc3MoRGlzbWlzc09yaWdpbi5IZWFkZXJDbG9zZUJ1dHRvbilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2JvZHlJbWcgJiYgPEltYWdlV3JhcHBlcj57Ym9keUltZ308L0ltYWdlV3JhcHBlcj59XG4gICAgICAgICAgICA8U3R5bGVkQ2FwdGlvbiBwb3NpdGlvbj17cG9zaXRpb259PlxuICAgICAgICAgICAgICA8U3R5bGVkQ2FwdGlvblRleHQgc2l6ZT17MX0gc2NhbGU9XCJsZ1wiPlxuICAgICAgICAgICAgICAgIHt0aXRsZX1cbiAgICAgICAgICAgICAgPC9TdHlsZWRDYXB0aW9uVGV4dD5cbiAgICAgICAgICAgIDwvU3R5bGVkQ2FwdGlvbj5cbiAgICAgICAgICAgIDxGbGV4Um93IGp1c3RpZnk9XCJsZWZ0XCI+XG4gICAgICAgICAgICAgIDxTdHlsZWRJbmZvcm1hdGlvblRleHQgcG9zaXRpb249e3Bvc2l0aW9ufSBzaXplPXszfSBzY2FsZT1cInNtXCI+XG4gICAgICAgICAgICAgICAge2luZm9ybWF0aW9ufVxuICAgICAgICAgICAgICA8L1N0eWxlZEluZm9ybWF0aW9uVGV4dD5cbiAgICAgICAgICAgIDwvRmxleFJvdz5cbiAgICAgICAgICAgIHshaW5mb3JtYXRpb25Pbmx5TW9kZSAmJiAoXG4gICAgICAgICAgICAgIDxGbGV4Um93PlxuICAgICAgICAgICAgICAgIDxTdHlsZWRJbnB1dFxuICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3JlcXVpcmVkfVxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXtoYW5kbGVFbnRlcktleURvd259XG4gICAgICAgICAgICAgICAgICBsYWJlbD17PEJvZHlUZXh0IHNpemU9ezJ9PntpbnB1dExhYmVsfTwvQm9keVRleHQ+fVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgICAgICAgICAgICAgbWFyZ2luPXsnMTZweCAwJ31cbiAgICAgICAgICAgICAgICAgIGVycm9yPXshIWZvcm1FcnJvcn1cbiAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25UeXBlPXtpbnB1dFR5cGV9XG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uVGV4dD17Zm9ybUVycm9yfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvRmxleFJvdz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7IWluZm9ybWF0aW9uT25seU1vZGUgJiYgcmVwZWF0SW5wdXQgJiYgKFxuICAgICAgICAgICAgICA8RmxleFJvdz5cbiAgICAgICAgICAgICAgICA8U3R5bGVkSW5wdXRcbiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtyZXBlYXRWYWx1ZX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVSZXBlYXRJbnB1dENoYW5nZX1cbiAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17aGFuZGxlRW50ZXJLZXlEb3dufVxuICAgICAgICAgICAgICAgICAgbGFiZWw9ezxCb2R5VGV4dCBzaXplPXsyfT57cmVwZWF0SW5wdXQ/LmxhYmVsfTwvQm9keVRleHQ+fVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3JlcGVhdElucHV0Py5wbGFjZWhvbGRlcn1cbiAgICAgICAgICAgICAgICAgIGVycm9yPXshIXJlcGVhdElucHV0RXJyb3J9XG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uVHlwZT17aW5wdXRUeXBlfVxuICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvblRleHQ9e3JlcGVhdElucHV0RXJyb3J9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9GbGV4Um93PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHt3YXJuaW5nTWVzc2FnZSAmJiAoXG4gICAgICAgICAgICAgIDxXYXJuaW5nTWVzc2FnZVxuICAgICAgICAgICAgICAgIHRpdGxlPXt3YXJuaW5nTWVzc2FnZS50aXRsZX1cbiAgICAgICAgICAgICAgICBtZXNzYWdlPXt3YXJuaW5nTWVzc2FnZS5tZXNzYWdlfVxuICAgICAgICAgICAgICAgIG1hcmdpbj17d2FybmluZ01lc3NhZ2UubWFyZ2lufVxuICAgICAgICAgICAgICAgIGljb25TcmM9e3dhcm5pbmdNZXNzYWdlLmljb25TcmN9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2NoZWNrYm94TGFiZWwgJiYgKFxuICAgICAgICAgICAgICA8Q2hlY2tCb3hDb250YWluZXIgcG9zaXRpb249e3Bvc2l0aW9ufT5cbiAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2lzQ2hlY2tlZH1cbiAgICAgICAgICAgICAgICAgIGxhYmVsPXtjaGVja2JveExhYmVsfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoZWNrQm94fVxuICAgICAgICAgICAgICAgICAgY2hlY2tib3hGb250U2l6ZT17Q2hlY2tib3hGb250U2l6ZS5zbWFsbH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0NoZWNrQm94Q29udGFpbmVyPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxCdXR0b25zQ29udGFpbmVyXG4gICAgICAgICAgICAgIHBvc2l0aW9uPXtwb3NpdGlvbn1cbiAgICAgICAgICAgICAgZ2FwPXsnMTZweCd9XG4gICAgICAgICAgICAgIGp1c3RpZnk9eydzcGFjZS1iZXR3ZWVuJ31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2Rpc21pc3NMYWJlbCAmJiAoXG4gICAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgICAgY29sb3I9eydzZWNvbmRhcnlCbHVlJ31cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgICAgICAgICAgIG9uRGlzbWlzcyAmJiBvbkRpc21pc3MoRGlzbWlzc09yaWdpbi5EaXNtaXNzQnV0dG9uKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyEhZGlzbWlzc0Rpc2FibGVkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtkaXNtaXNzTGFiZWx9XG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICBjb2xvcj17Y29uZmlybUNvbG9yID09PSAncmVkJyA/ICdwcmltYXJ5UmVkJyA6ICdwcmltYXJ5Qmx1ZSd9XG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlT25TdWJtaXR9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2hhbmRsZURpc2FibGVCdXR0b24oKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtjb25maXJtTGFiZWx9XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9CdXR0b25zQ29udGFpbmVyPlxuICAgICAgICAgIDwvTW9kYWxDb250YWluZXI+XG4gICAgICAgIDwvUmVhY3RNb2RhbD5cbiAgICAgICl9XG4gICAgPC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5wdXRXaW5kb3c7XG4iXX0=