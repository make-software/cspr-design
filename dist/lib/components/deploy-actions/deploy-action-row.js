import { jsx as _jsx } from "react/jsx-runtime";
import Skeleton from 'react-loading-skeleton';
import { ExecutionTypesMap, isTransferDeploy, isWASMProxyTransaction, isWASMTransaction, } from './utils/contract';
import TransferActionRow from './components/TransferActionRow';
import DeployActionCsprFun from './components/DeployActionCsprFun';
import DeployActionAuction from './components/DeployActionAuction';
import DeployActionAssociatedKeys from './components/DeployActionAssociatedKeys';
import DeployActionMarket from './components/DeployActionMarket';
import { DeployActionCep18 } from './components/DeployActionCep18';
import { DeployActionNft } from './components/DeployActionNft';
import DeployActionDefault from './components/DeployActionDefault';
import { DeployActionDataProvider } from './services/deploy-action-context';
import BodyText from '../body-text/body-text';
import { ContractTypeId, } from '../../types/types';
import { Transaction } from 'casper-js-sdk';
import { getWasmProxyArgumentsFromRawData } from "../../utils/deploy-action-helpers";
export const DeployActionRowComponent = ({ deploy, deployRawData, loading, actionIdentificationHashes, }) => {
    const { executionTypeId, entryPoint, contractPackage, contractHash, contractPackageHash, } = deploy;
    const isWASMProxy = isWASMProxyTransaction(executionTypeId);
    const convertedArgs = isWASMProxy && deployRawData?.data
        ? getWasmProxyArgumentsFromRawData(Transaction.fromJSON(deployRawData?.data))
        : null;
    const deployWithConvertedArgs = {
        ...deploy,
        args: {
            ...deploy.args,
            ...(convertedArgs ? convertedArgs : null),
        },
    };
    const deployType = ExecutionTypesMap[executionTypeId];
    const isTransfer = isTransferDeploy(contractHash, entryPoint?.name, actionIdentificationHashes?.native_transfer_contract_hash || '');
    const isWasm = isWASMTransaction(executionTypeId); // deployType !== WASM_DEPLOY;
    const isCSPRFun = deployWithConvertedArgs.args?.csprfun_contract_hash_key &&
        deployWithConvertedArgs?.args?.token_to_trade_contract_hash_key;
    if (loading) {
        return (_jsx(BodyText, { size: 3, scale: 'xs', lineHeight: 'xs', children: _jsx(Skeleton, {}) }));
    }
    if (isTransfer && deployWithConvertedArgs.transfers) {
        return (_jsx(TransferActionRow, { loading: loading, timeTransactionCurrencyRate: deployWithConvertedArgs.timeTransactionCurrencyRate, transfer: deployWithConvertedArgs.transfers[0], actionPoolAccountHash: actionIdentificationHashes.auction_pool_account_hash }));
    }
    if (isWasm && !isCSPRFun) {
        return (_jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, monotype: true, children: deployType }));
    }
    if (isCSPRFun) {
        return _jsx(DeployActionCsprFun, { deploy: deployWithConvertedArgs });
    }
    if (!contractPackage) {
        return (_jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, monotype: true, children: "N/A" }));
    }
    const contractTypeId = contractPackage.latest_version_contract_type_id ||
        contractPackage.contract_type_id;
    if (contractHash === actionIdentificationHashes.auction_manager_contract_hash) {
        return _jsx(DeployActionAuction, { deploy: deployWithConvertedArgs });
    }
    if (contractHash === actionIdentificationHashes.associated_keys_contract_hash) {
        return (_jsx(DeployActionAssociatedKeys, { deploy: deployWithConvertedArgs, deployRawData: deployRawData }));
    }
    if (contractPackageHash ===
        actionIdentificationHashes.cspr_market_contract_package_hash) {
        return _jsx(DeployActionMarket, { deploy: deployWithConvertedArgs });
    }
    if (contractTypeId === ContractTypeId.CustomCep18 ||
        contractTypeId === ContractTypeId.Cep18) {
        return _jsx(DeployActionCep18, { deploy: deployWithConvertedArgs });
    }
    if (contractTypeId === ContractTypeId.CEP78Nft ||
        contractTypeId === ContractTypeId.CEP47Nft ||
        contractTypeId === ContractTypeId.CustomCEP78Nft ||
        contractTypeId === ContractTypeId.CustomCEP47Nft ||
        contractTypeId === ContractTypeId.CEP95Nft) {
        return _jsx(DeployActionNft, { deploy: deployWithConvertedArgs });
    }
    return _jsx(DeployActionDefault, { deploy: deployWithConvertedArgs });
};
export const DeployActionRow = (props) => {
    const { getAccountInfo, getContractPackageInfoByHash, getContractInfoByHash, deployRawData, loading, deploy, actionIdentificationHashes, csprLiveDomainPath, } = props;
    return (_jsx(DeployActionDataProvider, { getAccountInfo: getAccountInfo, getContractPackageInfoByHash: getContractPackageInfoByHash, getContractInfoByHash: getContractInfoByHash, csprLiveDomainPath: csprLiveDomainPath, children: _jsx(DeployActionRowComponent, { deploy: deploy, deployRawData: deployRawData, loading: loading, actionIdentificationHashes: actionIdentificationHashes }) }));
};
export default DeployActionRow;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwbG95LWFjdGlvbi1yb3cuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvZGVwbG95LWFjdGlvbnMvZGVwbG95LWFjdGlvbi1yb3cudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxPQUFPLFFBQVEsTUFBTSx3QkFBd0IsQ0FBQztBQUM5QyxPQUFPLEVBQ0wsaUJBQWlCLEVBQ2pCLGdCQUFnQixFQUNoQixzQkFBc0IsRUFDdEIsaUJBQWlCLEdBQ2xCLE1BQU0sa0JBQWtCLENBQUM7QUFDMUIsT0FBTyxpQkFBaUIsTUFBTSxnQ0FBZ0MsQ0FBQztBQUMvRCxPQUFPLG1CQUFtQixNQUFNLGtDQUFrQyxDQUFDO0FBQ25FLE9BQU8sbUJBQW1CLE1BQU0sa0NBQWtDLENBQUM7QUFDbkUsT0FBTywwQkFBMEIsTUFBTSx5Q0FBeUMsQ0FBQztBQUNqRixPQUFPLGtCQUFrQixNQUFNLGlDQUFpQyxDQUFDO0FBQ2pFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ25FLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUMvRCxPQUFPLG1CQUFtQixNQUFNLGtDQUFrQyxDQUFDO0FBQ25FLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQzVFLE9BQU8sUUFBUSxNQUFNLHdCQUF3QixDQUFDO0FBQzlDLE9BQU8sRUFHTCxjQUFjLEdBS2YsTUFBTSxtQkFBbUIsQ0FBQztBQUMzQixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzVDLE9BQU8sRUFBQyxnQ0FBZ0MsRUFBQyxNQUFNLG1DQUFtQyxDQUFDO0FBaUJuRixNQUFNLENBQUMsTUFBTSx3QkFBd0IsR0FBRyxDQUFDLEVBQ3ZDLE1BQU0sRUFDTixhQUFhLEVBQ2IsT0FBTyxFQUNQLDBCQUEwQixHQUNJLEVBQUUsRUFBRTtJQUNsQyxNQUFNLEVBQ0os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QUFxQixFQUM1QyxrQkFBa0IsRUFBRSxrQkFBa0IsWUFFdEMsS0FBQyx3QkFBd0IsSUFDdkIsTUFBTSxFQUFFLE1BQU0sRUFDZCxhQUFhLEVBQUUsYUFBYSxFQUM1QixPQUFPLEVBQUUsT0FBTyxFQUNoQiwwQkFBMEIsRUFBRSwwQkFBMEIsR0FDdEQsR0FDdUIsQ0FDNUIsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLGVBQWUsZUFBZSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBTa2VsZXRvbiBmcm9tICdyZWFjdC1sb2FkaW5nLXNrZWxldG9uJztcbmltcG9ydCB7XG4gIEV4ZWN1dGlvblR5cGVzTWFwLFxuICBpc1RyYW5zZmVyRGVwbG95LFxuICBpc1dBU01Qcm94eVRyYW5zYWN0aW9uLFxuICBpc1dBU01UcmFuc2FjdGlvbixcbn0gZnJvbSAnLi91dGlscy9jb250cmFjdCc7XG5pbXBvcnQgVHJhbnNmZXJBY3Rpb25Sb3cgZnJvbSAnLi9jb21wb25lbnRzL1RyYW5zZmVyQWN0aW9uUm93JztcbmltcG9ydCBEZXBsb3lBY3Rpb25Dc3ByRnVuIGZyb20gJy4vY29tcG9uZW50cy9EZXBsb3lBY3Rpb25Dc3ByRnVuJztcbmltcG9ydCBEZXBsb3lBY3Rpb25BdWN0aW9uIGZyb20gJy4vY29tcG9uZW50cy9EZXBsb3lBY3Rpb25BdWN0aW9uJztcbmltcG9ydCBEZXBsb3lBY3Rpb25Bc3NvY2lhdGVkS2V5cyBmcm9tICcuL2NvbXBvbmVudHMvRGVwbG95QWN0aW9uQXNzb2NpYXRlZEtleXMnO1xuaW1wb3J0IERlcGxveUFjdGlvbk1hcmtldCBmcm9tICcuL2NvbXBvbmVudHMvRGVwbG95QWN0aW9uTWFya2V0JztcbmltcG9ydCB7IERlcGxveUFjdGlvbkNlcDE4IH0gZnJvbSAnLi9jb21wb25lbnRzL0RlcGxveUFjdGlvbkNlcDE4JztcbmltcG9ydCB7IERlcGxveUFjdGlvbk5mdCB9IGZyb20gJy4vY29tcG9uZW50cy9EZXBsb3lBY3Rpb25OZnQnO1xuaW1wb3J0IERlcGxveUFjdGlvbkRlZmF1bHQgZnJvbSAnLi9jb21wb25lbnRzL0RlcGxveUFjdGlvbkRlZmF1bHQnO1xuaW1wb3J0IHsgRGVwbG95QWN0aW9uRGF0YVByb3ZpZGVyIH0gZnJvbSAnLi9zZXJ2aWNlcy9kZXBsb3ktYWN0aW9uLWNvbnRleHQnO1xuaW1wb3J0IEJvZHlUZXh0IGZyb20gJy4uL2JvZHktdGV4dC9ib2R5LXRleHQnO1xuaW1wb3J0IHtcbiAgQWNjb3VudEluZm9SZXN1bHQsXG4gIENvbnRyYWN0UmVzdWx0LFxuICBDb250cmFjdFR5cGVJZCxcbiAgRGF0YVJlc3BvbnNlLFxuICBEZXBsb3ksXG4gIERlcGxveUNvbnRyYWN0UGFja2FnZVJlc3VsdCxcbiAgR2V0RGVwbG95UmVzdWx0LFxufSBmcm9tICcuLi8uLi90eXBlcy90eXBlcyc7XG5pbXBvcnQgeyBUcmFuc2FjdGlvbiB9IGZyb20gJ2Nhc3Blci1qcy1zZGsnO1xuaW1wb3J0IHtnZXRXYXNtUHJveHlBcmd1bWVudHNGcm9tUmF3RGF0YX0gZnJvbSBcIi4uLy4uL3V0aWxzL2RlcGxveS1hY3Rpb24taGVscGVyc1wiO1xuXG5leHBvcnQgdHlwZSBBY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlc1R5cGUgPSB7XG4gIGF1Y3Rpb25fbWFuYWdlcl9jb250cmFjdF9oYXNoPzogc3RyaW5nO1xuICBhc3NvY2lhdGVkX2tleXNfY29udHJhY3RfaGFzaD86IHN0cmluZztcbiAgY3Nwcl9tYXJrZXRfY29udHJhY3RfcGFja2FnZV9oYXNoPzogc3RyaW5nO1xuICBhdWN0aW9uX3Bvb2xfYWNjb3VudF9oYXNoPzogc3RyaW5nO1xuICBuYXRpdmVfdHJhbnNmZXJfY29udHJhY3RfaGFzaD86IHN0cmluZztcbn07XG5cbmludGVyZmFjZSBEZXBsb3lBY3Rpb25Sb3dDb21wb25lbnRQcm9wcyB7XG4gIGRlcGxveTogRGVwbG95O1xuICBkZXBsb3lSYXdEYXRhPzogRGF0YVJlc3BvbnNlPEdldERlcGxveVJlc3VsdD4gfCB1bmRlZmluZWQgfCBudWxsO1xuICBsb2FkaW5nOiBib29sZWFuO1xuICBhY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlczogQWN0aW9uSWRlbnRpZmljYXRpb25IYXNoZXNUeXBlO1xufVxuXG5leHBvcnQgY29uc3QgRGVwbG95QWN0aW9uUm93Q29tcG9uZW50ID0gKHtcbiAgZGVwbG95LFxuICBkZXBsb3lSYXdEYXRhLFxuICBsb2FkaW5nLFxuICBhY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlcyxcbn06IERlcGxveUFjdGlvblJvd0NvbXBvbmVudFByb3BzKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBleGVjdXRpb25UeXBlSWQsXG4gICAgZW50cnlQb2ludCxcbiAgICBjb250cmFjdFBhY2thZ2UsXG4gICAgY29udHJhY3RIYXNoLFxuICAgIGNvbnRyYWN0UGFja2FnZUhhc2gsXG4gIH0gPSBkZXBsb3k7XG5cbiAgY29uc3QgaXNXQVNNUHJveHkgPSBpc1dBU01Qcm94eVRyYW5zYWN0aW9uKGV4ZWN1dGlvblR5cGVJZCk7XG4gIGNvbnN0IGNvbnZlcnRlZEFyZ3MgPVxuICAgIGlzV0FTTVByb3h5ICYmIGRlcGxveVJhd0RhdGE/LmRhdGFcbiAgICAgID8gZ2V0V2FzbVByb3h5QXJndW1lbnRzRnJvbVJhd0RhdGEoXG4gICAgICAgICAgVHJhbnNhY3Rpb24uZnJvbUpTT04oZGVwbG95UmF3RGF0YT8uZGF0YSksXG4gICAgICAgIClcbiAgICAgIDogbnVsbDtcblxuICBjb25zdCBkZXBsb3lXaXRoQ29udmVydGVkQXJncyA9IHtcbiAgICAuLi5kZXBsb3ksXG4gICAgYXJnczoge1xuICAgICAgLi4uZGVwbG95LmFyZ3MsXG4gICAgICAuLi4oY29udmVydGVkQXJncyA/IGNvbnZlcnRlZEFyZ3MgOiBudWxsKSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0IGRlcGxveVR5cGUgPSBFeGVjdXRpb25UeXBlc01hcFtleGVjdXRpb25UeXBlSWRdO1xuICBjb25zdCBpc1RyYW5zZmVyID0gaXNUcmFuc2ZlckRlcGxveShcbiAgICBjb250cmFjdEhhc2gsXG4gICAgZW50cnlQb2ludD8ubmFtZSxcbiAgICBhY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlcz8ubmF0aXZlX3RyYW5zZmVyX2NvbnRyYWN0X2hhc2ggfHwgJycsXG4gICk7XG4gIGNvbnN0IGlzV2FzbSA9IGlzV0FTTVRyYW5zYWN0aW9uKGV4ZWN1dGlvblR5cGVJZCk7IC8vIGRlcGxveVR5cGUgIT09IFdBU01fREVQTE9ZO1xuICBjb25zdCBpc0NTUFJGdW4gPVxuICAgIGRlcGxveVdpdGhDb252ZXJ0ZWRBcmdzLmFyZ3M/LmNzcHJmdW5fY29udHJhY3RfaGFzaF9rZXkgJiZcbiAgICBkZXBsb3lXaXRoQ29udmVydGVkQXJncz8uYXJncz8udG9rZW5fdG9fdHJhZGVfY29udHJhY3RfaGFzaF9rZXk7XG5cbiAgaWYgKGxvYWRpbmcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPEJvZHlUZXh0IHNpemU9ezN9IHNjYWxlPXsneHMnfSBsaW5lSGVpZ2h0PXsneHMnfT5cbiAgICAgICAgPFNrZWxldG9uIC8+XG4gICAgICA8L0JvZHlUZXh0PlxuICAgICk7XG4gIH1cblxuICBpZiAoaXNUcmFuc2ZlciAmJiBkZXBsb3lXaXRoQ29udmVydGVkQXJncy50cmFuc2ZlcnMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFRyYW5zZmVyQWN0aW9uUm93XG4gICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgIHRpbWVUcmFuc2FjdGlvbkN1cnJlbmN5UmF0ZT17XG4gICAgICAgICAgZGVwbG95V2l0aENvbnZlcnRlZEFyZ3MudGltZVRyYW5zYWN0aW9uQ3VycmVuY3lSYXRlXG4gICAgICAgIH1cbiAgICAgICAgdHJhbnNmZXI9e2RlcGxveVdpdGhDb252ZXJ0ZWRBcmdzLnRyYW5zZmVyc1swXX1cbiAgICAgICAgYWN0aW9uUG9vbEFjY291bnRIYXNoPXtcbiAgICAgICAgICBhY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlcy5hdWN0aW9uX3Bvb2xfYWNjb3VudF9oYXNoXG4gICAgICAgIH1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuXG4gIGlmIChpc1dhc20gJiYgIWlzQ1NQUkZ1bikge1xuICAgIHJldHVybiAoXG4gICAgICA8Qm9keVRleHQgc2NhbGU9eyd4cyd9IGxpbmVIZWlnaHQ9eyd4cyd9IHNpemU9ezN9IG1vbm90eXBlPlxuICAgICAgICB7ZGVwbG95VHlwZX1cbiAgICAgIDwvQm9keVRleHQ+XG4gICAgKTtcbiAgfVxuXG4gIGlmIChpc0NTUFJGdW4pIHtcbiAgICByZXR1cm4gPERlcGxveUFjdGlvbkNzcHJGdW4gZGVwbG95PXtkZXBsb3lXaXRoQ29udmVydGVkQXJnc30gLz47XG4gIH1cblxuICBpZiAoIWNvbnRyYWN0UGFja2FnZSkge1xuICAgIHJldHVybiAoXG4gICAgICA8Qm9keVRleHQgc2NhbGU9eyd4cyd9IGxpbmVIZWlnaHQ9eyd4cyd9IHNpemU9ezN9IG1vbm90eXBlPlxuICAgICAgICBOL0FcbiAgICAgIDwvQm9keVRleHQ+XG4gICAgKTtcbiAgfVxuICBjb25zdCBjb250cmFjdFR5cGVJZCA9XG4gICAgY29udHJhY3RQYWNrYWdlLmxhdGVzdF92ZXJzaW9uX2NvbnRyYWN0X3R5cGVfaWQgfHxcbiAgICBjb250cmFjdFBhY2thZ2UuY29udHJhY3RfdHlwZV9pZDtcblxuICBpZiAoXG4gICAgY29udHJhY3RIYXNoID09PSBhY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlcy5hdWN0aW9uX21hbmFnZXJfY29udHJhY3RfaGFzaFxuICApIHtcbiAgICByZXR1cm4gPERlcGxveUFjdGlvbkF1Y3Rpb24gZGVwbG95PXtkZXBsb3lXaXRoQ29udmVydGVkQXJnc30gLz47XG4gIH1cblxuICBpZiAoXG4gICAgY29udHJhY3RIYXNoID09PSBhY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlcy5hc3NvY2lhdGVkX2tleXNfY29udHJhY3RfaGFzaFxuICApIHtcbiAgICByZXR1cm4gKFxuICAgICAgPERlcGxveUFjdGlvbkFzc29jaWF0ZWRLZXlzXG4gICAgICAgIGRlcGxveT17ZGVwbG95V2l0aENvbnZlcnRlZEFyZ3N9XG4gICAgICAgIGRlcGxveVJhd0RhdGE9e2RlcGxveVJhd0RhdGF9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICBpZiAoXG4gICAgY29udHJhY3RQYWNrYWdlSGFzaCA9PT1cbiAgICBhY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlcy5jc3ByX21hcmtldF9jb250cmFjdF9wYWNrYWdlX2hhc2hcbiAgKSB7XG4gICAgcmV0dXJuIDxEZXBsb3lBY3Rpb25NYXJrZXQgZGVwbG95PXtkZXBsb3lXaXRoQ29udmVydGVkQXJnc30gLz47XG4gIH1cblxuICBpZiAoXG4gICAgY29udHJhY3RUeXBlSWQgPT09IENvbnRyYWN0VHlwZUlkLkN1c3RvbUNlcDE4IHx8XG4gICAgY29udHJhY3RUeXBlSWQgPT09IENvbnRyYWN0VHlwZUlkLkNlcDE4XG4gICkge1xuICAgIHJldHVybiA8RGVwbG95QWN0aW9uQ2VwMTggZGVwbG95PXtkZXBsb3lXaXRoQ29udmVydGVkQXJnc30gLz47XG4gIH1cblxuICBpZiAoXG4gICAgY29udHJhY3RUeXBlSWQgPT09IENvbnRyYWN0VHlwZUlkLkNFUDc4TmZ0IHx8XG4gICAgY29udHJhY3RUeXBlSWQgPT09IENvbnRyYWN0VHlwZUlkLkNFUDQ3TmZ0IHx8XG4gICAgY29udHJhY3RUeXBlSWQgPT09IENvbnRyYWN0VHlwZUlkLkN1c3RvbUNFUDc4TmZ0IHx8XG4gICAgY29udHJhY3RUeXBlSWQgPT09IENvbnRyYWN0VHlwZUlkLkN1c3RvbUNFUDQ3TmZ0IHx8XG4gICAgY29udHJhY3RUeXBlSWQgPT09IENvbnRyYWN0VHlwZUlkLkNFUDk1TmZ0XG4gICkge1xuICAgIHJldHVybiA8RGVwbG95QWN0aW9uTmZ0IGRlcGxveT17ZGVwbG95V2l0aENvbnZlcnRlZEFyZ3N9IC8+O1xuICB9XG5cbiAgcmV0dXJuIDxEZXBsb3lBY3Rpb25EZWZhdWx0IGRlcGxveT17ZGVwbG95V2l0aENvbnZlcnRlZEFyZ3N9IC8+O1xufTtcblxudHlwZSBEZXBsb3lBY3Rpb25Sb3dQcm9wcyA9IERlcGxveUFjdGlvblJvd0NvbXBvbmVudFByb3BzICYge1xuICBnZXRBY2NvdW50SW5mbzogKHB1YmxpY0tleTogc3RyaW5nKSA9PiBBY2NvdW50SW5mb1Jlc3VsdCB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIGdldENvbnRyYWN0SW5mb0J5SGFzaD86IChcbiAgICBjb250cmFjdEhhc2g6IHN0cmluZyxcbiAgKSA9PiBDb250cmFjdFJlc3VsdCB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIGdldENvbnRyYWN0UGFja2FnZUluZm9CeUhhc2g/OiAoXG4gICAgY29udHJhY3RQYWNrYWdlSGFzaDogc3RyaW5nLFxuICApID0+IERlcGxveUNvbnRyYWN0UGFja2FnZVJlc3VsdCB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIGNzcHJMaXZlRG9tYWluUGF0aDogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNvbnN0IERlcGxveUFjdGlvblJvdyA9IChwcm9wczogRGVwbG95QWN0aW9uUm93UHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIGdldEFjY291bnRJbmZvLFxuICAgIGdldENvbnRyYWN0UGFja2FnZUluZm9CeUhhc2gsXG4gICAgZ2V0Q29udHJhY3RJbmZvQnlIYXNoLFxuICAgIGRlcGxveVJhd0RhdGEsXG4gICAgbG9hZGluZyxcbiAgICBkZXBsb3ksXG4gICAgYWN0aW9uSWRlbnRpZmljYXRpb25IYXNoZXMsXG4gICAgY3NwckxpdmVEb21haW5QYXRoLFxuICB9ID0gcHJvcHM7XG4gIHJldHVybiAoXG4gICAgPERlcGxveUFjdGlvbkRhdGFQcm92aWRlclxuICAgICAgZ2V0QWNjb3VudEluZm89e2dldEFjY291bnRJbmZvfVxuICAgICAgZ2V0Q29udHJhY3RQYWNrYWdlSW5mb0J5SGFzaD17Z2V0Q29udHJhY3RQYWNrYWdlSW5mb0J5SGFzaH1cbiAgICAgIGdldENvbnRyYWN0SW5mb0J5SGFzaD17Z2V0Q29udHJhY3RJbmZvQnlIYXNofVxuICAgICAgY3NwckxpdmVEb21haW5QYXRoPXtjc3ByTGl2ZURvbWFpblBhdGh9XG4gICAgPlxuICAgICAgPERlcGxveUFjdGlvblJvd0NvbXBvbmVudFxuICAgICAgICBkZXBsb3k9e2RlcGxveX1cbiAgICAgICAgZGVwbG95UmF3RGF0YT17ZGVwbG95UmF3RGF0YX1cbiAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgYWN0aW9uSWRlbnRpZmljYXRpb25IYXNoZXM9e2FjdGlvbklkZW50aWZpY2F0aW9uSGFzaGVzfVxuICAgICAgLz5cbiAgICA8L0RlcGxveUFjdGlvbkRhdGFQcm92aWRlcj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IERlcGxveUFjdGlvblJvdzsiXX0=