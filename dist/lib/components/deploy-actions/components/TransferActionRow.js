import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import Skeleton from 'react-loading-skeleton';
import Avatar from '../../../components/avatar/avatar';
import DeployFiatAmount from './DeployFiatAmount';
import { useDeployActionDataContext } from '../services/deploy-action-context';
import { AccountModel, deriveAccountInfo } from '../../../utils/account';
import FlexRow from '../../flex-row/flex-row';
import BodyText from '../../body-text/body-text';
import Address from '../../address/address';
import { TableDataNamedKey } from '../../table-data-named-key/table-data-named-key';
import Link from '../../link/link';
import { AuctionContractIcon } from '../../../icons-index';
const TransferActionAccount = ({ publicKey, accountHash, loading, purse, renderAsResultAction, actionPoolAccountHash, purseAccountInfoFromTransfer, }) => {
    const { getAccountInfo, csprLiveDomainPath } = useDeployActionDataContext();
    const accountInfo = getAccountInfo(publicKey || accountHash || '');
    const accountInfoDetails = deriveAccountInfo(accountInfo?.account_info ||
        accountInfo?.centralized_account_info ||
        purseAccountInfoFromTransfer);
    const logo = accountInfoDetails && accountInfoDetails?.logo;
    const name = accountInfoDetails?.name;
    const csprName = accountInfo?.cspr_name;
    const isAuctionPoolAccount = accountHash === actionPoolAccountHash;
    if (isAuctionPoolAccount && renderAsResultAction) {
        return (_jsxs(FlexRow, { itemsSpacing: 8, align: 'center', children: [_jsx(Avatar, { size: 'small', path: AuctionContractIcon, loading: loading, alt: 'Auction contract logo' }), _jsx(Link, { href: `${csprLiveDomainPath}/account/${actionPoolAccountHash}`, color: 'hash', ariaDescription: 'Link to account details', children: "Auction Pool" })] }));
    }
    return publicKey || accountHash ? (_jsx(Address, { logo: logo, name: name, hash: publicKey || accountHash, csprName: csprName, loading: loading, navigateToPath: `${csprLiveDomainPath}/account/${publicKey || accountHash}`, avatarSize: 'small', hashFontSize: 'sm', minifiedCopyNotification: true })) : (_jsx(TableDataNamedKey, { purse: purse, fontSize: 'sm', csprLiveDomainPath: csprLiveDomainPath }));
};
const TransferActionRow = ({ timeTransactionCurrencyRate, transfer, loading, actionPoolAccountHash, renderAsResultAction = false, }) => {
    const fromAccountHash = transfer.from_purse_public_key
        ? AccountModel({
            publicKeyHex: transfer.from_purse_public_key,
        }).getAccountHash()
        : '';
    if (loading) {
        return (_jsx(BodyText, { size: 3, children: _jsx(Skeleton, {}) }));
    }
    const deployActionText = renderAsResultAction ? 'Transferred' : 'Transfer';
    return (_jsxs(FlexRow, { align: 'center', itemsSpacing: 8, wrap: 'nowrap', children: [_jsx(BodyText, { size: 3, monotype: true, variation: 'black', children: deployActionText }), ' ', _jsx(DeployFiatAmount, { amount: transfer.amount, rate: timeTransactionCurrencyRate }), renderAsResultAction && (_jsxs(_Fragment, { children: [_jsx(BodyText, { size: 3, variation: "darkGray", children: "from" }), _jsx(BodyText, { size: 3, monotype: true, variation: "black", children: _jsx(TransferActionAccount, { publicKey: transfer.from_purse_public_key, accountHash: transfer.from_purse_public_key ? fromAccountHash : null, purse: transfer.from_purse, purseAccountInfoFromTransfer: transfer.from_purse_account_info ||
                                transfer.from_purse_centralized_account_info, loading: loading, renderAsResultAction: renderAsResultAction, actionPoolAccountHash: actionPoolAccountHash }) })] })), _jsx(BodyText, { size: 3, variation: "darkGray", children: "to" }), _jsx(BodyText, { size: 3, monotype: true, variation: "black", children: _jsx(TransferActionAccount, { publicKey: transfer.to_purse_public_key, accountHash: transfer.to_account_hash, purse: transfer.to_purse, purseAccountInfoFromTransfer: transfer.to_purse_account_info ||
                        transfer.to_purse_centralized_account_info, loading: loading, renderAsResultAction: renderAsResultAction, actionPoolAccountHash: actionPoolAccountHash }) })] }));
};
export default TransferActionRow;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNmZXJBY3Rpb25Sb3cuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvZGVwbG95LWFjdGlvbnMvY29tcG9uZW50cy9UcmFuc2ZlckFjdGlvblJvdy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLE9BQU8sUUFBUSxNQUFNLHdCQUF3QixDQUFDO0FBQzlDLE9BQU8sTUFBTSxNQUFNLG1DQUFtQyxDQUFDO0FBQ3ZELE9BQU8sZ0JBQWdCLE1BQU0sb0JBQW9CLENBQUM7QUFDbEQsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFNL0UsT0FBTyxFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3pFLE9BQU8sT0FBTyxNQUFNLHlCQUF5QixDQUFDO0FBQzlDLE9BQU8sUUFBUSxNQUFNLDJCQUEyQixDQUFDO0FBQ2pELE9BQU8sT0FBTyxNQUFNLHVCQUF1QixDQUFDO0FBQzVDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGlEQUFpRCxDQUFDO0FBQ3BGLE9BQU8sSUFBSSxNQUFNLGlCQUFpQixDQUFDO0FBQ25DLE9BQU8sRUFBQyxtQkFBbUIsRUFBQyxNQUFNLHNCQUFzQixDQUFDO0FBZXpELE1BQU0scUJBQXFCLEdBQUcsQ0FBQyxFQUM3QixTQUFTLEVBQ1QsV0FBVyxFQUNYLE9BQU8sRUFDUCxLQUFLLEVBQ0wsb0JBQW9CLEVBQ3BCLHFCQUFxQixFQUNyQiw0QkFBNEIsR0FDRCxFQUFFLEVBQUU7SUFDL0IsTUFBTSxFQUFFLGNBQWMsRUFBRSxrQkFBa0IsRUFBRSxHQUFHLDBCQUEwQixFQUFFLENBQUM7SUFFNUUsTUFBTSxXQUFXLEdBQUcsY0FBYyxDQUNoQyxTQUFTLElBQUksV0FBVyxJQUFJLEVBQUUsQ0FDL0IsQ0FBQztJQUNGLE1BQU0sa0JBQWtCLEdBQUcsaUJBQWlCLENBQzFDLFdBQVcsRUFBRSxZQUFZO1FBQ3ZCLFdBQVcsRUFBRSx3QkFBd0I7UUFDckMsNEJBQTRCLENBQy9CLENBQUM7SUFFRixNQUFNLElBQUksR0FBRyxrQkFBa0IsSUFBSSxrQkFBa0IsRUFBRSxJQUFJLENBQUM7SUFDNUQsTUFBTSxJQUFJLEdBQUcsa0JBQWtCLEVBQUUsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sUUFBUSxHQUFHLFdBQVcsRUFBRSxTQUFTLENBQUM7SUFFeEMsTUFBTSxvQkFBb0IsR0FBRyxXQUFXLEtBQUsscUJBQXFCLENBQUM7SUFFbkUsSUFBSSxvQkFBb0IsSUFBSSxvQkFBb0IsRUFBRSxDQUFDO1FBQ2pELE9BQU8sQ0FDTCxNQUFDLE9BQU8sSUFBQyxZQUFZLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxRQUFRLGFBQ3ZDLEtBQUMsTUFBTSxJQUNMLElBQUksRUFBRSxPQUFPLEVBQ2IsSUFBSSxFQUFFLG1CQUFtQixFQUN6QixPQUFPLEVBQUUsT0FBTyxFQUNoQixHQUFHLEVBQUUsdUJBQXVCLEdBQzVCLEVBQ0YsS0FBQyxJQUFJLElBQ0gsSUFBSSxFQUFFLEdBQUcsa0JBQWtCLFlBQVkscUJBQXFCLEVBQUUsRUFDOUQsS0FBSyxFQUFFLE1BQU0sRUFDYixlQUFlLEVBQUUseUJBQXlCLDZCQUdyQyxJQUNDLENBQ1gsQ0FBQztJQUNKLENBQUM7SUFFRCxPQUFPLFNBQVMsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQ2hDLEtBQUMsT0FBTyxJQUNOLElBQUksRUFBRSxJQUFJLEVBQ1YsSUFBSSxFQUFFLElBQUksRUFDVixJQUFJLEVBQUUsU0FBUyxJQUFJLFdBQVcsRUFDOUIsUUFBUSxFQUFFLFFBQVEsRUFDbEIsT0FBTyxFQUFFLE9BQU8sRUFDaEIsY0FBYyxFQUFFLEdBQUcsa0JBQWtCLFlBQVksU0FBUyxJQUFJLFdBQVcsRUFBRSxFQUMzRSxVQUFVLEVBQUUsT0FBTyxFQUNuQixZQUFZLEVBQUUsSUFBSSxFQUNsQix3QkFBd0IsU0FDeEIsQ0FDSCxDQUFDLENBQUMsQ0FBQyxDQUNGLEtBQUMsaUJBQWlCLElBQ2hCLEtBQUssRUFBRSxLQUFLLEVBQ1osUUFBUSxFQUFFLElBQUksRUFDZCxrQkFBa0IsRUFBRSxrQkFBa0IsR0FDdEMsQ0FDSCxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBVUYsTUFBTSxpQkFBaUIsR0FBRyxDQUFDLEVBQ3pCLDJCQUEyQixFQUMzQixRQUFRLEVBQ1IsT0FBTyxFQUNQLHFCQUFxQixFQUNyQixvQkFBb0IsR0FBRyxLQUFLLEdBQ0wsRUFBRSxFQUFFO0lBQzNCLE1BQU0sZUFBZSxHQUFHLFFBQVEsQ0FBQyxxQkFBcUI7UUFDcEQsQ0FBQyxDQUFDLFlBQVksQ0FBQztZQUNYLFlBQVksRUFBRSxRQUFRLENBQUMscUJBQXFCO1NBQzdDLENBQUMsQ0FBQyxjQUFjLEVBQUU7UUFDckIsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUVQLElBQUksT0FBTyxFQUFFLENBQUM7UUFDWixPQUFPLENBQ0wsS0FBQyxRQUFRLElBQUMsSUFBSSxFQUFFLENBQUMsWUFDZixLQUFDLFFBQVEsS0FBRyxHQUNILENBQ1osQ0FBQztJQUNKLENBQUM7SUFFRCxNQUFNLGdCQUFnQixHQUFHLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQztJQUUzRSxPQUFPLENBQ0wsTUFBQyxPQUFPLElBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLGFBQ3ZELEtBQUMsUUFBUSxJQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsUUFBUSxRQUFDLFNBQVMsRUFBRSxPQUFPLFlBQzNDLGdCQUFnQixHQUNSLEVBQUMsR0FBRyxFQUNmLEtBQUMsZ0JBQWdCLElBQ2YsTUFBTSxFQUFFLFFBQVEsQ0FBQyxNQUFNLEVBQ3ZCLElBQUksRUFBRSwyQkFBMkIsR0FDakMsRUFDRCxvQkFBb0IsSUFBSSxDQUN2Qiw4QkFDRSxLQUFDLFFBQVEsSUFBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBQyxVQUFVLHFCQUU1QixFQUNYLEtBQUMsUUFBUSxJQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsUUFBUSxRQUFDLFNBQVMsRUFBQyxPQUFPLFlBQzNDLEtBQUMscUJBQXFCLElBQ3BCLFNBQVMsRUFBRSxRQUFRLENBQUMscUJBQXFCLEVBQ3pDLFdBQVcsRUFDVCxRQUFRLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUV6RCxLQUFLLEVBQUUsUUFBUSxDQUFDLFVBQVUsRUFDMUIsNEJBQTRCLEVBQzFCLFFBQVEsQ0FBQyx1QkFBdUI7Z0NBQ2hDLFFBQVEsQ0FBQyxtQ0FBbUMsRUFFOUMsT0FBTyxFQUFFLE9BQU8sRUFDaEIsb0JBQW9CLEVBQUUsb0JBQW9CLEVBQzFDLHFCQUFxQixFQUFFLHFCQUFxQixHQUM1QyxHQUNPLElBQ1YsQ0FDSixFQUNELEtBQUMsUUFBUSxJQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFDLFVBQVUsbUJBRTVCLEVBQ1gsS0FBQyxRQUFRLElBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxRQUFRLFFBQUMsU0FBUyxFQUFDLE9BQU8sWUFDM0MsS0FBQyxxQkFBcUIsSUFDcEIsU0FBUyxFQUFFLFFBQVEsQ0FBQyxtQkFBbUIsRUFDdkMsV0FBVyxFQUFFLFFBQVEsQ0FBQyxlQUFlLEVBQ3JDLEtBQUssRUFBRSxRQUFRLENBQUMsUUFBUSxFQUN4Qiw0QkFBNEIsRUFDMUIsUUFBUSxDQUFDLHFCQUFxQjt3QkFDOUIsUUFBUSxDQUFDLGlDQUFpQyxFQUU1QyxPQUFPLEVBQUUsT0FBTyxFQUNoQixvQkFBb0IsRUFBRSxvQkFBb0IsRUFDMUMscUJBQXFCLEVBQUUscUJBQXFCLEdBQzVDLEdBQ08sSUFDSCxDQUNYLENBQUM7QUFDSixDQUFDLENBQUM7QUFDRixlQUFlLGlCQUFpQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBTa2VsZXRvbiBmcm9tICdyZWFjdC1sb2FkaW5nLXNrZWxldG9uJztcbmltcG9ydCBBdmF0YXIgZnJvbSAnLi4vLi4vLi4vY29tcG9uZW50cy9hdmF0YXIvYXZhdGFyJztcbmltcG9ydCBEZXBsb3lGaWF0QW1vdW50IGZyb20gJy4vRGVwbG95RmlhdEFtb3VudCc7XG5pbXBvcnQgeyB1c2VEZXBsb3lBY3Rpb25EYXRhQ29udGV4dCB9IGZyb20gJy4uL3NlcnZpY2VzL2RlcGxveS1hY3Rpb24tY29udGV4dCc7XG5pbXBvcnQge1xuICBBY2NvdW50Q2VudHJhbGl6ZWRJbmZvLFxuICBBY2NvdW50SW5mb1Jlc3VsdCxcbiAgRGVwbG95VHJhbnNmZXJSZXN1bHQsXG59IGZyb20gJy4uLy4uLy4uL3R5cGVzL3R5cGVzJztcbmltcG9ydCB7IEFjY291bnRNb2RlbCwgZGVyaXZlQWNjb3VudEluZm8gfSBmcm9tICcuLi8uLi8uLi91dGlscy9hY2NvdW50JztcbmltcG9ydCBGbGV4Um93IGZyb20gJy4uLy4uL2ZsZXgtcm93L2ZsZXgtcm93JztcbmltcG9ydCBCb2R5VGV4dCBmcm9tICcuLi8uLi9ib2R5LXRleHQvYm9keS10ZXh0JztcbmltcG9ydCBBZGRyZXNzIGZyb20gJy4uLy4uL2FkZHJlc3MvYWRkcmVzcyc7XG5pbXBvcnQgeyBUYWJsZURhdGFOYW1lZEtleSB9IGZyb20gJy4uLy4uL3RhYmxlLWRhdGEtbmFtZWQta2V5L3RhYmxlLWRhdGEtbmFtZWQta2V5JztcbmltcG9ydCBMaW5rIGZyb20gJy4uLy4uL2xpbmsvbGluayc7XG5pbXBvcnQge0F1Y3Rpb25Db250cmFjdEljb259IGZyb20gJy4uLy4uLy4uL2ljb25zLWluZGV4JztcblxuaW50ZXJmYWNlIFRyYW5zZmVyQWN0aW9uQWNjb3VudFByb3BzIHtcbiAgcHVibGljS2V5Pzogc3RyaW5nIHwgbnVsbDtcbiAgYWNjb3VudEhhc2g/OiBzdHJpbmcgfCBudWxsO1xuICBsb2FkaW5nOiBib29sZWFuO1xuICBwdXJzZTogc3RyaW5nO1xuICByZW5kZXJBc1Jlc3VsdEFjdGlvbjogYm9vbGVhbjtcbiAgYWN0aW9uUG9vbEFjY291bnRIYXNoPzogc3RyaW5nO1xuICBwdXJzZUFjY291bnRJbmZvRnJvbVRyYW5zZmVyPzpcbiAgICB8IEFjY291bnRJbmZvUmVzdWx0XG4gICAgfCBBY2NvdW50Q2VudHJhbGl6ZWRJbmZvXG4gICAgfCBudWxsO1xufVxuXG5jb25zdCBUcmFuc2ZlckFjdGlvbkFjY291bnQgPSAoe1xuICBwdWJsaWNLZXksXG4gIGFjY291bnRIYXNoLFxuICBsb2FkaW5nLFxuICBwdXJzZSxcbiAgcmVuZGVyQXNSZXN1bHRBY3Rpb24sXG4gIGFjdGlvblBvb2xBY2NvdW50SGFzaCxcbiAgcHVyc2VBY2NvdW50SW5mb0Zyb21UcmFuc2Zlcixcbn06IFRyYW5zZmVyQWN0aW9uQWNjb3VudFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgZ2V0QWNjb3VudEluZm8sIGNzcHJMaXZlRG9tYWluUGF0aCB9ID0gdXNlRGVwbG95QWN0aW9uRGF0YUNvbnRleHQoKTtcblxuICBjb25zdCBhY2NvdW50SW5mbyA9IGdldEFjY291bnRJbmZvPEFjY291bnRJbmZvUmVzdWx0PihcbiAgICBwdWJsaWNLZXkgfHwgYWNjb3VudEhhc2ggfHwgJycsXG4gICk7XG4gIGNvbnN0IGFjY291bnRJbmZvRGV0YWlscyA9IGRlcml2ZUFjY291bnRJbmZvKFxuICAgIGFjY291bnRJbmZvPy5hY2NvdW50X2luZm8gfHxcbiAgICAgIGFjY291bnRJbmZvPy5jZW50cmFsaXplZF9hY2NvdW50X2luZm8gfHxcbiAgICAgIHB1cnNlQWNjb3VudEluZm9Gcm9tVHJhbnNmZXIsXG4gICk7XG5cbiAgY29uc3QgbG9nbyA9IGFjY291bnRJbmZvRGV0YWlscyAmJiBhY2NvdW50SW5mb0RldGFpbHM/LmxvZ287XG4gIGNvbnN0IG5hbWUgPSBhY2NvdW50SW5mb0RldGFpbHM/Lm5hbWU7XG4gIGNvbnN0IGNzcHJOYW1lID0gYWNjb3VudEluZm8/LmNzcHJfbmFtZTtcblxuICBjb25zdCBpc0F1Y3Rpb25Qb29sQWNjb3VudCA9IGFjY291bnRIYXNoID09PSBhY3Rpb25Qb29sQWNjb3VudEhhc2g7XG5cbiAgaWYgKGlzQXVjdGlvblBvb2xBY2NvdW50ICYmIHJlbmRlckFzUmVzdWx0QWN0aW9uKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxGbGV4Um93IGl0ZW1zU3BhY2luZz17OH0gYWxpZ249eydjZW50ZXInfT5cbiAgICAgICAgPEF2YXRhclxuICAgICAgICAgIHNpemU9eydzbWFsbCd9XG4gICAgICAgICAgcGF0aD17QXVjdGlvbkNvbnRyYWN0SWNvbn1cbiAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgIGFsdD17J0F1Y3Rpb24gY29udHJhY3QgbG9nbyd9XG4gICAgICAgIC8+XG4gICAgICAgIDxMaW5rXG4gICAgICAgICAgaHJlZj17YCR7Y3NwckxpdmVEb21haW5QYXRofS9hY2NvdW50LyR7YWN0aW9uUG9vbEFjY291bnRIYXNofWB9XG4gICAgICAgICAgY29sb3I9eydoYXNoJ31cbiAgICAgICAgICBhcmlhRGVzY3JpcHRpb249eydMaW5rIHRvIGFjY291bnQgZGV0YWlscyd9XG4gICAgICAgID5cbiAgICAgICAgICBBdWN0aW9uIFBvb2xcbiAgICAgICAgPC9MaW5rPlxuICAgICAgPC9GbGV4Um93PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gcHVibGljS2V5IHx8IGFjY291bnRIYXNoID8gKFxuICAgIDxBZGRyZXNzXG4gICAgICBsb2dvPXtsb2dvfVxuICAgICAgbmFtZT17bmFtZX1cbiAgICAgIGhhc2g9e3B1YmxpY0tleSB8fCBhY2NvdW50SGFzaH1cbiAgICAgIGNzcHJOYW1lPXtjc3ByTmFtZX1cbiAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICBuYXZpZ2F0ZVRvUGF0aD17YCR7Y3NwckxpdmVEb21haW5QYXRofS9hY2NvdW50LyR7cHVibGljS2V5IHx8IGFjY291bnRIYXNofWB9XG4gICAgICBhdmF0YXJTaXplPXsnc21hbGwnfVxuICAgICAgaGFzaEZvbnRTaXplPXsnc20nfVxuICAgICAgbWluaWZpZWRDb3B5Tm90aWZpY2F0aW9uXG4gICAgLz5cbiAgKSA6IChcbiAgICA8VGFibGVEYXRhTmFtZWRLZXlcbiAgICAgIHB1cnNlPXtwdXJzZX1cbiAgICAgIGZvbnRTaXplPXsnc20nfVxuICAgICAgY3NwckxpdmVEb21haW5QYXRoPXtjc3ByTGl2ZURvbWFpblBhdGh9XG4gICAgLz5cbiAgKTtcbn07XG5cbmludGVyZmFjZSBUcmFuc2ZlckFjdGlvblJvd1Byb3BzIHtcbiAgdGltZVRyYW5zYWN0aW9uQ3VycmVuY3lSYXRlOiBudW1iZXI7XG4gIHRyYW5zZmVyOiBEZXBsb3lUcmFuc2ZlclJlc3VsdDtcbiAgbG9hZGluZzogYm9vbGVhbjtcbiAgYWN0aW9uUG9vbEFjY291bnRIYXNoOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIHJlbmRlckFzUmVzdWx0QWN0aW9uPzogYm9vbGVhbjtcbn1cblxuY29uc3QgVHJhbnNmZXJBY3Rpb25Sb3cgPSAoe1xuICB0aW1lVHJhbnNhY3Rpb25DdXJyZW5jeVJhdGUsXG4gIHRyYW5zZmVyLFxuICBsb2FkaW5nLFxuICBhY3Rpb25Qb29sQWNjb3VudEhhc2gsXG4gIHJlbmRlckFzUmVzdWx0QWN0aW9uID0gZmFsc2UsXG59OiBUcmFuc2ZlckFjdGlvblJvd1Byb3BzKSA9PiB7XG4gIGNvbnN0IGZyb21BY2NvdW50SGFzaCA9IHRyYW5zZmVyLmZyb21fcHVyc2VfcHVibGljX2tleVxuICAgID8gQWNjb3VudE1vZGVsKHtcbiAgICAgICAgcHVibGljS2V5SGV4OiB0cmFuc2Zlci5mcm9tX3B1cnNlX3B1YmxpY19rZXksXG4gICAgICB9KS5nZXRBY2NvdW50SGFzaCgpXG4gICAgOiAnJztcblxuICBpZiAobG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8Qm9keVRleHQgc2l6ZT17M30+XG4gICAgICAgIDxTa2VsZXRvbiAvPlxuICAgICAgPC9Cb2R5VGV4dD5cbiAgICApO1xuICB9XG5cbiAgY29uc3QgZGVwbG95QWN0aW9uVGV4dCA9IHJlbmRlckFzUmVzdWx0QWN0aW9uID8gJ1RyYW5zZmVycmVkJyA6ICdUcmFuc2Zlcic7XG5cbiAgcmV0dXJuIChcbiAgICA8RmxleFJvdyBhbGlnbj17J2NlbnRlcid9IGl0ZW1zU3BhY2luZz17OH0gd3JhcD17J25vd3JhcCd9PlxuICAgICAgPEJvZHlUZXh0IHNpemU9ezN9IG1vbm90eXBlIHZhcmlhdGlvbj17J2JsYWNrJ30+XG4gICAgICAgIHtkZXBsb3lBY3Rpb25UZXh0fVxuICAgICAgPC9Cb2R5VGV4dD57JyAnfVxuICAgICAgPERlcGxveUZpYXRBbW91bnRcbiAgICAgICAgYW1vdW50PXt0cmFuc2Zlci5hbW91bnR9XG4gICAgICAgIHJhdGU9e3RpbWVUcmFuc2FjdGlvbkN1cnJlbmN5UmF0ZX1cbiAgICAgIC8+XG4gICAgICB7cmVuZGVyQXNSZXN1bHRBY3Rpb24gJiYgKFxuICAgICAgICA8PlxuICAgICAgICAgIDxCb2R5VGV4dCBzaXplPXszfSB2YXJpYXRpb249XCJkYXJrR3JheVwiPlxuICAgICAgICAgICAgZnJvbVxuICAgICAgICAgIDwvQm9keVRleHQ+XG4gICAgICAgICAgPEJvZHlUZXh0IHNpemU9ezN9IG1vbm90eXBlIHZhcmlhdGlvbj1cImJsYWNrXCI+XG4gICAgICAgICAgICA8VHJhbnNmZXJBY3Rpb25BY2NvdW50XG4gICAgICAgICAgICAgIHB1YmxpY0tleT17dHJhbnNmZXIuZnJvbV9wdXJzZV9wdWJsaWNfa2V5fVxuICAgICAgICAgICAgICBhY2NvdW50SGFzaD17XG4gICAgICAgICAgICAgICAgdHJhbnNmZXIuZnJvbV9wdXJzZV9wdWJsaWNfa2V5ID8gZnJvbUFjY291bnRIYXNoIDogbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHB1cnNlPXt0cmFuc2Zlci5mcm9tX3B1cnNlfVxuICAgICAgICAgICAgICBwdXJzZUFjY291bnRJbmZvRnJvbVRyYW5zZmVyPXtcbiAgICAgICAgICAgICAgICB0cmFuc2Zlci5mcm9tX3B1cnNlX2FjY291bnRfaW5mbyB8fFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyLmZyb21fcHVyc2VfY2VudHJhbGl6ZWRfYWNjb3VudF9pbmZvXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICAgICAgcmVuZGVyQXNSZXN1bHRBY3Rpb249e3JlbmRlckFzUmVzdWx0QWN0aW9ufVxuICAgICAgICAgICAgICBhY3Rpb25Qb29sQWNjb3VudEhhc2g9e2FjdGlvblBvb2xBY2NvdW50SGFzaH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9Cb2R5VGV4dD5cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgICAgPEJvZHlUZXh0IHNpemU9ezN9IHZhcmlhdGlvbj1cImRhcmtHcmF5XCI+XG4gICAgICAgIHRvXG4gICAgICA8L0JvZHlUZXh0PlxuICAgICAgPEJvZHlUZXh0IHNpemU9ezN9IG1vbm90eXBlIHZhcmlhdGlvbj1cImJsYWNrXCI+XG4gICAgICAgIDxUcmFuc2ZlckFjdGlvbkFjY291bnRcbiAgICAgICAgICBwdWJsaWNLZXk9e3RyYW5zZmVyLnRvX3B1cnNlX3B1YmxpY19rZXl9XG4gICAgICAgICAgYWNjb3VudEhhc2g9e3RyYW5zZmVyLnRvX2FjY291bnRfaGFzaH1cbiAgICAgICAgICBwdXJzZT17dHJhbnNmZXIudG9fcHVyc2V9XG4gICAgICAgICAgcHVyc2VBY2NvdW50SW5mb0Zyb21UcmFuc2Zlcj17XG4gICAgICAgICAgICB0cmFuc2Zlci50b19wdXJzZV9hY2NvdW50X2luZm8gfHxcbiAgICAgICAgICAgIHRyYW5zZmVyLnRvX3B1cnNlX2NlbnRyYWxpemVkX2FjY291bnRfaW5mb1xuICAgICAgICAgIH1cbiAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgIHJlbmRlckFzUmVzdWx0QWN0aW9uPXtyZW5kZXJBc1Jlc3VsdEFjdGlvbn1cbiAgICAgICAgICBhY3Rpb25Qb29sQWNjb3VudEhhc2g9e2FjdGlvblBvb2xBY2NvdW50SGFzaH1cbiAgICAgICAgLz5cbiAgICAgIDwvQm9keVRleHQ+XG4gICAgPC9GbGV4Um93PlxuICApO1xufTtcbmV4cG9ydCBkZWZhdWx0IFRyYW5zZmVyQWN0aW9uUm93O1xuIl19