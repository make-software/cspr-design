import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import styled from 'styled-components';
import Big from 'big.js';
import { deriveAccountInfo } from '../../utils/account';
import { isValidPublicKey } from 'casper-js-sdk';
import TooltipWithExtendedInfo from '../../components/tooltip-with-extended-info/tooltip-with-extended-info';
import { PrecisionCase } from '../../utils/currency';
import CsprAmount from '../cspr-amount/cspr-amount';
import { DeployResultRow, ResultRowVariation, } from '../deploy-actions/deploy-result-row';
import { DeployActionRow, } from '../deploy-actions/deploy-action-row';
import PageTile from '../page-tile/page-tile';
import FlexColumn from '../flex-column/flex-column';
import FlexRow from '../flex-row/flex-row';
import BodyText from '../body-text/body-text';
import Link from '../link/link';
import { formatHash, formatNumber, formatTimestampAge, HashLength, } from '../../utils/formatters';
import Tooltip from '../tooltip/tooltip';
import Avatar from '../avatar/avatar';
import TruncateBox from '../truncate-box/truncate-box';
import { isWASMProxyTransaction } from '../deploy-actions/utils/contract';
import { useMatchMedia } from '../../utils/match-media';
import { DeployStatus, DeployStatusSize } from '../deploy-status/deploy-status';
import { WasmProxyBadge } from './wasm-proxy-badge';
import Address from '../address/address';
const StyledPageTile = styled(PageTile)(() => ({
    marginBottom: 8,
    height: 'auto',
}));
const DesktopFeedItemContainer = styled(FlexColumn)(({ theme }) => theme.withMedia({
    boxSizing: 'border-box',
    padding: '20px',
    width: '100%',
    '> * + *': {
        width: '100%',
    },
}));
const MobileFeedItemContainer = styled(DesktopFeedItemContainer)(({ theme }) => theme.withMedia({
    padding: '16px',
    '> * + *': {
        marginTop: [16, 0],
        paddingTop: 16,
    },
    '> div:not(:first-child)': {
        position: 'relative',
        flexWrap: 'wrap',
    },
    '>div:not(:first-child):after': {
        content: "''",
        position: 'absolute',
        left: 0,
        right: 0,
        top: 0,
        borderBottom: theme.border.tableRowSeparator,
    },
}));
const CommonDataContainer = styled(FlexRow)(({ theme }) => ({
    width: '100%',
    justifyContent: 'space-between',
    position: 'relative',
    paddingBottom: 12,
    ':after': {
        content: "''",
        position: 'absolute',
        left: 0,
        right: 0,
        bottom: 0,
        borderBottom: theme.border.tableRowSeparator,
    },
}));
const WrappedContainer = styled(FlexRow)(({ theme }) => ({
    '> div': {
        flexWrap: 'wrap',
    },
    flexWrap: 'wrap',
}));
const StyledFlexColumn = styled(FlexColumn)(({ theme }) => theme.withMedia({
    width: '100%',
}));
const BlockFeedInfo = ({ deploy, path }) => (_jsxs(FlexRow, { itemsSpacing: 8, align: 'center', children: [_jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, noWrap: true, variation: 'darkGray', children: "Block:" }), _jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, monotype: true, children: deploy.blockHash == null ? ('N/A') : (_jsx(Link, { href: path, ariaDescription: 'Link to block details', color: 'primaryBlue', children: formatNumber(deploy.blockHeight) })) }), _jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, noWrap: true, children: "\u00B7" }), _jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, noWrap: true, variation: 'darkGray', children: formatTimestampAge(deploy.timestamp) })] }));
export const ActivityFeedItem = ({ deploy, loading, actionIdentificationHashes, getAccountInfo, getContractPackageInfoByHash, getContractInfoByHash, csprLiveDomainPath, }) => {
    const { callerPublicKey, callerHash, deployHash, paymentAmount, refundAmount, callerCsprName, } = deploy;
    const accountInfo = getAccountInfo(callerPublicKey || callerHash);
    const accountInfoDetails = deriveAccountInfo(accountInfo?.account_info || accountInfo?.centralized_account_info);
    const logo = accountInfoDetails && accountInfoDetails?.logo;
    const name = accountInfoDetails?.name;
    const csprName = accountInfo?.cspr_name || deploy.callerCsprName;
    const keyTooltipCaption = isValidPublicKey(callerPublicKey)
        ? 'Public Key'
        : 'Account hash';
    const chargedAmount = Big(paymentAmount || '0')
        .minus(refundAmount || '0')
        .toString();
    const onAbove = (_jsxs(DesktopFeedItemContainer, { itemsSpacing: 12, children: [_jsxs(CommonDataContainer, { children: [_jsxs(FlexRow, { align: 'center', children: [_jsx(DeployStatus, { deployResult: deploy, size: DeployStatusSize.Small }), _jsx(Tooltip, { scale: 'xs', lineHeight: 'xs', tooltipContent: deployHash, children: _jsx(BodyText, { size: 3, scale: 'sm', monotype: true, children: _jsx(Link, { href: `${csprLiveDomainPath}/transaction/${deploy.deployHash}`, ariaDescription: 'Link to deploy details', color: 'primaryBlue', children: formatHash(deployHash, HashLength.TINY) }) }) })] }), _jsxs(FlexRow, { justify: 'flex-end', itemsSpacing: 8, align: 'baseline', children: [_jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, noWrap: true, variation: 'darkGray', children: formatTimestampAge(deploy.timestamp) }), _jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, noWrap: true, children: "\u00B7" }), _jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, noWrap: true, variation: 'darkGray', children: "Block:" }), _jsx(BodyText, { size: 3, monotype: true, children: deploy.blockHash == null ? ('N/A') : (_jsx(Link, { href: `${csprLiveDomainPath}/block/${deploy.blockHash}`, ariaDescription: 'Link to block details', color: 'primaryBlue', children: formatNumber(deploy.blockHeight) })) }), _jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, noWrap: true, children: "\u00B7" }), _jsxs(FlexRow, { itemsSpacing: 4, align: 'baseline', children: [_jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, variation: 'darkGray', children: "Charge:" }), _jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, monotype: true, noWrap: true, children: _jsx(CsprAmount, { motes: chargedAmount, precisionCase: PrecisionCase.deployCost }) })] })] })] }), _jsxs(FlexRow, { itemsSpacing: 12, children: [logo ? (_jsx(Avatar, { src: logo, loading: loading, alt: 'Account logo' })) : (_jsx(Avatar, { hash: callerPublicKey || callerHash, loading: loading })), _jsxs(StyledFlexColumn, { itemsSpacing: 12, children: [_jsx(FlexRow, { justify: 'space-between', children: _jsxs(FlexRow, { itemsSpacing: 8, children: [_jsx(TooltipWithExtendedInfo, { extendedLine: { title: csprName, caption: 'CSPR.name' }, tooltipCaption: keyTooltipCaption, hash: callerPublicKey || callerHash, children: _jsx(FlexColumn, { children: _jsx(BodyText, { lineHeight: 'xs', size: 3, scale: "sm", monotype: !csprName, children: _jsx(Link, { href: `${csprLiveDomainPath}/account/${callerPublicKey}`, ariaDescription: `Link to Account page`, color: 'primaryBlue', children: csprName || formatHash(callerPublicKey, HashLength.TINY) }) }) }) }), _jsx(FlexRow, { children: _jsx(TruncateBox, { size: 5, children: _jsx(BodyText, { size: 3, variation: "darkGray", noWrap: true, children: name }) }) })] }) }), _jsx(FlexRow, { children: _jsxs(FlexRow, { itemsSpacing: 8, children: [isWASMProxyTransaction(deploy.executionTypeId) && (_jsx(WasmProxyBadge, { lineHeight: 'xxs' })), _jsx(BodyText, { size: 3, scale: 'sm', lineHeight: 'xs', children: _jsx(WrappedContainer, { children: _jsx(DeployActionRow, { deploy: deploy, loading: loading, actionIdentificationHashes: actionIdentificationHashes, getAccountInfo: getAccountInfo, getContractInfoByHash: getContractInfoByHash, getContractPackageInfoByHash: getContractPackageInfoByHash, csprLiveDomainPath: csprLiveDomainPath }) }) })] }) }), _jsx(DeployResultRow, { deploy: deploy, loading: loading, actionIdentificationHashes: actionIdentificationHashes, variation: ResultRowVariation.gray, getAccountInfo: getAccountInfo, getContractPackageInfoByHash: getContractPackageInfoByHash, csprLiveDomainPath: csprLiveDomainPath, shouldCollapse: true })] })] })] }));
    const onMobile = (_jsxs(MobileFeedItemContainer, { children: [_jsxs(FlexRow, { justify: 'space-between', children: [_jsxs(FlexRow, { align: 'center', children: [_jsx(DeployStatus, { deployResult: deploy, size: DeployStatusSize.Small }), _jsx(Tooltip, { tooltipContent: deployHash, scale: 'xs', lineHeight: 'xs', children: _jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, monotype: true, children: _jsx(Link, { href: `${csprLiveDomainPath}/transaction/${deploy.deployHash}`, ariaDescription: 'Link to deploy details', color: 'primaryBlue', children: formatHash(deployHash, HashLength.TINY) }) }) })] }), _jsxs(FlexRow, { itemsSpacing: 4, align: 'baseline', children: [_jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, variation: 'darkGray', children: "Charge:" }), _jsx(BodyText, { scale: 'xs', lineHeight: 'xs', size: 3, monotype: true, noWrap: true, children: _jsx(CsprAmount, { motes: chargedAmount, precisionCase: PrecisionCase.deployCost }) })] })] }), _jsxs(FlexColumn, { itemsSpacing: 12, children: [_jsx(Address, { logo: logo, name: name, hash: callerPublicKey || callerHash, csprName: callerCsprName || csprName, loading: loading, navigateToPath: `${csprLiveDomainPath}/account/${callerPublicKey || callerHash}`, avatarSize: 'small', hashFontSize: 'sm', minifiedCopyNotification: true }), _jsxs(FlexRow, { itemsSpacing: 8, children: [isWASMProxyTransaction(deploy.executionTypeId) && (_jsx(WasmProxyBadge, { lineHeight: 'xxs' })), _jsx(BodyText, { size: 3, scale: 'sm', lineHeight: 'xs', children: _jsx(WrappedContainer, { children: _jsx(DeployActionRow, { deploy: deploy, loading: loading, actionIdentificationHashes: actionIdentificationHashes, getAccountInfo: getAccountInfo, getContractInfoByHash: getContractInfoByHash, getContractPackageInfoByHash: getContractPackageInfoByHash, csprLiveDomainPath: csprLiveDomainPath }) }) })] })] }), _jsxs(FlexColumn, { itemsSpacing: 16, children: [_jsx(BlockFeedInfo, { deploy: deploy, path: `${csprLiveDomainPath}/block/${deploy.blockHash}` }), _jsx(DeployResultRow, { deploy: deploy, loading: loading, variation: ResultRowVariation.gray, actionIdentificationHashes: actionIdentificationHashes, getAccountInfo: getAccountInfo, getContractPackageInfoByHash: getContractPackageInfoByHash, csprLiveDomainPath: csprLiveDomainPath, shouldCollapse: true })] })] }));
    const responsiveFeedItem = useMatchMedia([onMobile, onAbove, onAbove, onAbove], [deploy, accountInfo]);
    return _jsx(StyledPageTile, { children: responsiveFeedItem });
};
export default ActivityFeedItem;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aXZpdHktZmVlZC1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9jb21wb25lbnRzL2FjdGl2aXR5LWZlZWQtaXRlbS9hY3Rpdml0eS1mZWVkLWl0ZW0udHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxPQUFPLE1BQU0sTUFBTSxtQkFBbUIsQ0FBQztBQUN2QyxPQUFPLEdBQUcsTUFBTSxRQUFRLENBQUM7QUFDekIsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDeEQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2pELE9BQU8sdUJBQXVCLE1BQU0sd0VBQXdFLENBQUM7QUFDN0csT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3JELE9BQU8sVUFBVSxNQUFNLDRCQUE0QixDQUFDO0FBQ3BELE9BQU8sRUFDTCxlQUFlLEVBQ2Ysa0JBQWtCLEdBQ25CLE1BQU0scUNBQXFDLENBQUM7QUFDN0MsT0FBTyxFQUVMLGVBQWUsR0FDaEIsTUFBTSxxQ0FBcUMsQ0FBQztBQUM3QyxPQUFPLFFBQVEsTUFBTSx3QkFBd0IsQ0FBQztBQUM5QyxPQUFPLFVBQVUsTUFBTSw0QkFBNEIsQ0FBQztBQUNwRCxPQUFPLE9BQU8sTUFBTSxzQkFBc0IsQ0FBQztBQU8zQyxPQUFPLFFBQVEsTUFBTSx3QkFBd0IsQ0FBQztBQUM5QyxPQUFPLElBQUksTUFBTSxjQUFjLENBQUM7QUFDaEMsT0FBTyxFQUNMLFVBQVUsRUFDVixZQUFZLEVBQ1osa0JBQWtCLEVBQ2xCLFVBQVUsR0FDWCxNQUFNLHdCQUF3QixDQUFDO0FBQ2hDLE9BQU8sT0FBTyxNQUFNLG9CQUFvQixDQUFDO0FBQ3pDLE9BQU8sTUFBTSxNQUFNLGtCQUFrQixDQUFDO0FBQ3RDLE9BQU8sV0FBVyxNQUFNLDhCQUE4QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxN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a0IsVUFBVSxNQUFNLENBQUMsU0FBUyxFQUFFLEdBQ3ZELEVBQ0YsS0FBQyxlQUFlLElBQ2QsTUFBTSxFQUFFLE1BQU0sRUFDZCxPQUFPLEVBQUUsT0FBTyxFQUNoQixTQUFTLEVBQUUsa0JBQWtCLENBQUMsSUFBSSxFQUNsQywwQkFBMEIsRUFBRSwwQkFBMEIsRUFDdEQsY0FBYyxFQUFFLGNBQWMsRUFDOUIsNEJBQTRCLEVBQUUsNEJBQTRCLEVBQzFELGtCQUFrQixFQUFFLGtCQUFrQixFQUN0QyxjQUFjLFNBQ2QsSUFDUyxJQUNXLENBQzNCLENBQUM7SUFDRixNQUFNLGtCQUFrQixHQUFHLGFBQWEsQ0FDdEMsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFDckMsQ0FBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLENBQ3RCLENBQUM7SUFFRixPQUFPLEtBQUMsY0FBYyxjQUFFLGtCQUFrQixHQUFrQixDQUFDO0FBQy9ELENBQUMsQ0FBQztBQUVGLGVBQWUsZ0JBQWdCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgQmlnIGZyb20gJ2JpZy5qcyc7XG5pbXBvcnQgeyBkZXJpdmVBY2NvdW50SW5mbyB9IGZyb20gJy4uLy4uL3V0aWxzL2FjY291bnQnO1xuaW1wb3J0IHsgaXNWYWxpZFB1YmxpY0tleSB9IGZyb20gJ2Nhc3Blci1qcy1zZGsnO1xuaW1wb3J0IFRvb2x0aXBXaXRoRXh0ZW5kZWRJbmZvIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvdG9vbHRpcC13aXRoLWV4dGVuZGVkLWluZm8vdG9vbHRpcC13aXRoLWV4dGVuZGVkLWluZm8nO1xuaW1wb3J0IHsgUHJlY2lzaW9uQ2FzZSB9IGZyb20gJy4uLy4uL3V0aWxzL2N1cnJlbmN5JztcbmltcG9ydCBDc3ByQW1vdW50IGZyb20gJy4uL2NzcHItYW1vdW50L2NzcHItYW1vdW50JztcbmltcG9ydCB7XG4gIERlcGxveVJlc3VsdFJvdyxcbiAgUmVzdWx0Um93VmFyaWF0aW9uLFxufSBmcm9tICcuLi9kZXBsb3ktYWN0aW9ucy9kZXBsb3ktcmVzdWx0LXJvdyc7XG5pbXBvcnQge1xuICBBY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlc1R5cGUsXG4gIERlcGxveUFjdGlvblJvdyxcbn0gZnJvbSAnLi4vZGVwbG95LWFjdGlvbnMvZGVwbG95LWFjdGlvbi1yb3cnO1xuaW1wb3J0IFBhZ2VUaWxlIGZyb20gJy4uL3BhZ2UtdGlsZS9wYWdlLXRpbGUnO1xuaW1wb3J0IEZsZXhDb2x1bW4gZnJvbSAnLi4vZmxleC1jb2x1bW4vZmxleC1jb2x1bW4nO1xuaW1wb3J0IEZsZXhSb3cgZnJvbSAnLi4vZmxleC1yb3cvZmxleC1yb3cnO1xuaW1wb3J0IHtcbiAgQWNjb3VudEluZm9SZXN1bHQsXG4gIENvbnRyYWN0UmVzdWx0LFxuICBEZXBsb3ksXG4gIERlcGxveUNvbnRyYWN0UGFja2FnZVJlc3VsdCxcbn0gZnJvbSAnLi4vLi4vdHlwZXMvdHlwZXMnO1xuaW1wb3J0IEJvZHlUZXh0IGZyb20gJy4uL2JvZHktdGV4dC9ib2R5LXRleHQnO1xuaW1wb3J0IExpbmsgZnJvbSAnLi4vbGluay9saW5rJztcbmltcG9ydCB7XG4gIGZvcm1hdEhhc2gsXG4gIGZvcm1hdE51bWJlcixcbiAgZm9ybWF0VGltZXN0YW1wQWdlLFxuICBIYXNoTGVuZ3RoLFxufSBmcm9tICcuLi8uLi91dGlscy9mb3JtYXR0ZXJzJztcbmltcG9ydCBUb29sdGlwIGZyb20gJy4uL3Rvb2x0aXAvdG9vbHRpcCc7XG5pbXBvcnQgQXZhdGFyIGZyb20gJy4uL2F2YXRhci9hdmF0YXInO1xuaW1wb3J0IFRydW5jYXRlQm94IGZyb20gJy4uL3RydW5jYXRlLWJveC90cnVuY2F0ZS1ib3gnO1xuaW1wb3J0IHsgaXNXQVNNUHJveHlUcmFuc2FjdGlvbiB9IGZyb20gJy4uL2RlcGxveS1hY3Rpb25zL3V0aWxzL2NvbnRyYWN0JztcbmltcG9ydCB7IHVzZU1hdGNoTWVkaWEgfSBmcm9tICcuLi8uLi91dGlscy9tYXRjaC1tZWRpYSc7XG5pbXBvcnQgeyBEZXBsb3lTdGF0dXMsIERlcGxveVN0YXR1c1NpemUgfSBmcm9tICcuLi9kZXBsb3ktc3RhdHVzL2RlcGxveS1zdGF0dXMnO1xuaW1wb3J0IHsgV2FzbVByb3h5QmFkZ2UgfSBmcm9tICcuL3dhc20tcHJveHktYmFkZ2UnO1xuaW1wb3J0IEFkZHJlc3MgZnJvbSAnLi4vYWRkcmVzcy9hZGRyZXNzJztcblxuY29uc3QgU3R5bGVkUGFnZVRpbGUgPSBzdHlsZWQoUGFnZVRpbGUpKCgpID0+ICh7XG4gIG1hcmdpbkJvdHRvbTogOCxcbiAgaGVpZ2h0OiAnYXV0bycsXG59KSk7XG5cbmNvbnN0IERlc2t0b3BGZWVkSXRlbUNvbnRhaW5lciA9IHN0eWxlZChGbGV4Q29sdW1uKSgoeyB0aGVtZSB9KSA9PlxuICB0aGVtZS53aXRoTWVkaWEoe1xuICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgIHBhZGRpbmc6ICcyMHB4JyxcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgICc+ICogKyAqJzoge1xuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICB9LFxuICB9KSxcbik7XG5cbmNvbnN0IE1vYmlsZUZlZWRJdGVtQ29udGFpbmVyID0gc3R5bGVkKERlc2t0b3BGZWVkSXRlbUNvbnRhaW5lcikoKHsgdGhlbWUgfSkgPT5cbiAgdGhlbWUud2l0aE1lZGlhKHtcbiAgICBwYWRkaW5nOiAnMTZweCcsXG4gICAgJz4gKiArIConOiB7XG4gICAgICBtYXJnaW5Ub3A6IFsxNiwgMF0sXG4gICAgICBwYWRkaW5nVG9wOiAxNixcbiAgICB9LFxuICAgICc+IGRpdjpub3QoOmZpcnN0LWNoaWxkKSc6IHtcbiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgZmxleFdyYXA6ICd3cmFwJyxcbiAgICB9LFxuICAgICc+ZGl2Om5vdCg6Zmlyc3QtY2hpbGQpOmFmdGVyJzoge1xuICAgICAgY29udGVudDogXCInJ1wiLFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgcmlnaHQ6IDAsXG4gICAgICB0b3A6IDAsXG4gICAgICBib3JkZXJCb3R0b206IHRoZW1lLmJvcmRlci50YWJsZVJvd1NlcGFyYXRvcixcbiAgICB9LFxuICB9KSxcbik7XG5cbmNvbnN0IENvbW1vbkRhdGFDb250YWluZXIgPSBzdHlsZWQoRmxleFJvdykoKHsgdGhlbWUgfSkgPT4gKHtcbiAgd2lkdGg6ICcxMDAlJyxcbiAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gIHBhZGRpbmdCb3R0b206IDEyLFxuICAnOmFmdGVyJzoge1xuICAgIGNvbnRlbnQ6IFwiJydcIixcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBsZWZ0OiAwLFxuICAgIHJpZ2h0OiAwLFxuICAgIGJvdHRvbTogMCxcbiAgICBib3JkZXJCb3R0b206IHRoZW1lLmJvcmRlci50YWJsZVJvd1NlcGFyYXRvcixcbiAgfSxcbn0pKTtcblxuY29uc3QgV3JhcHBlZENvbnRhaW5lciA9IHN0eWxlZChGbGV4Um93KSgoeyB0aGVtZSB9KSA9PiAoe1xuICAnPiBkaXYnOiB7XG4gICAgZmxleFdyYXA6ICd3cmFwJyxcbiAgfSxcbiAgZmxleFdyYXA6ICd3cmFwJyxcbn0pKTtcblxuY29uc3QgU3R5bGVkRmxleENvbHVtbiA9IHN0eWxlZChGbGV4Q29sdW1uKSgoeyB0aGVtZSB9KSA9PlxuICB0aGVtZS53aXRoTWVkaWEoe1xuICAgIHdpZHRoOiAnMTAwJScsXG4gIH0pLFxuKTtcblxuY29uc3QgQmxvY2tGZWVkSW5mbyA9ICh7IGRlcGxveSwgcGF0aCB9OiB7IGRlcGxveTogRGVwbG95OyBwYXRoOiBzdHJpbmcgfSkgPT4gKFxuICA8RmxleFJvdyBpdGVtc1NwYWNpbmc9ezh9IGFsaWduPXsnY2VudGVyJ30+XG4gICAgPEJvZHlUZXh0XG4gICAgICBzY2FsZT17J3hzJ31cbiAgICAgIGxpbmVIZWlnaHQ9eyd4cyd9XG4gICAgICBzaXplPXszfVxuICAgICAgbm9XcmFwXG4gICAgICB2YXJpYXRpb249eydkYXJrR3JheSd9XG4gICAgPlxuICAgICAgQmxvY2s6XG4gICAgPC9Cb2R5VGV4dD5cbiAgICA8Qm9keVRleHQgc2NhbGU9eyd4cyd9IGxpbmVIZWlnaHQ9eyd4cyd9IHNpemU9ezN9IG1vbm90eXBlPlxuICAgICAge2RlcGxveS5ibG9ja0hhc2ggPT0gbnVsbCA/IChcbiAgICAgICAgJ04vQSdcbiAgICAgICkgOiAoXG4gICAgICAgIDxMaW5rXG4gICAgICAgICAgaHJlZj17cGF0aH1cbiAgICAgICAgICBhcmlhRGVzY3JpcHRpb249eydMaW5rIHRvIGJsb2NrIGRldGFpbHMnfVxuICAgICAgICAgIGNvbG9yPXsncHJpbWFyeUJsdWUnfVxuICAgICAgICA+XG4gICAgICAgICAge2Zvcm1hdE51bWJlcihkZXBsb3kuYmxvY2tIZWlnaHQpfVxuICAgICAgICA8L0xpbms+XG4gICAgICApfVxuICAgIDwvQm9keVRleHQ+XG4gICAgPEJvZHlUZXh0IHNjYWxlPXsneHMnfSBsaW5lSGVpZ2h0PXsneHMnfSBzaXplPXszfSBub1dyYXA+XG4gICAgICDCt1xuICAgIDwvQm9keVRleHQ+XG4gICAgPEJvZHlUZXh0XG4gICAgICBzY2FsZT17J3hzJ31cbiAgICAgIGxpbmVIZWlnaHQ9eyd4cyd9XG4gICAgICBzaXplPXszfVxuICAgICAgbm9XcmFwXG4gICAgICB2YXJpYXRpb249eydkYXJrR3JheSd9XG4gICAgPlxuICAgICAge2Zvcm1hdFRpbWVzdGFtcEFnZShkZXBsb3kudGltZXN0YW1wKX1cbiAgICA8L0JvZHlUZXh0PlxuICA8L0ZsZXhSb3c+XG4pO1xuXG5pbnRlcmZhY2UgQWN0aXZpdHlGZWVkSXRlbVByb3BzIHtcbiAgZGVwbG95OiBEZXBsb3k7XG4gIGxvYWRpbmc6IGJvb2xlYW47XG4gIGFjdGlvbklkZW50aWZpY2F0aW9uSGFzaGVzOiBBY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlc1R5cGU7XG4gIGNzcHJMaXZlRG9tYWluUGF0aDogc3RyaW5nO1xuICBnZXRBY2NvdW50SW5mbzogKFxuICAgIHB1YmxpY0tleTogc3RyaW5nLFxuICApID0+IEFjY291bnRJbmZvUmVzdWx0IHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgZ2V0Q29udHJhY3RJbmZvQnlIYXNoPzogKFxuICAgIGNvbnRyYWN0SGFzaDogc3RyaW5nLFxuICApID0+IENvbnRyYWN0UmVzdWx0IHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgZ2V0Q29udHJhY3RQYWNrYWdlSW5mb0J5SGFzaD86IChcbiAgICBjb250cmFjdFBhY2thZ2VIYXNoOiBzdHJpbmcsXG4gICkgPT4gRGVwbG95Q29udHJhY3RQYWNrYWdlUmVzdWx0IHwgbnVsbCB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGNvbnN0IEFjdGl2aXR5RmVlZEl0ZW0gPSAoe1xuICBkZXBsb3ksXG4gIGxvYWRpbmcsXG4gIGFjdGlvbklkZW50aWZpY2F0aW9uSGFzaGVzLFxuICBnZXRBY2NvdW50SW5mbyxcbiAgZ2V0Q29udHJhY3RQYWNrYWdlSW5mb0J5SGFzaCxcbiAgZ2V0Q29udHJhY3RJbmZvQnlIYXNoLFxuICBjc3ByTGl2ZURvbWFpblBhdGgsXG59OiBBY3Rpdml0eUZlZWRJdGVtUHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIGNhbGxlclB1YmxpY0tleSxcbiAgICBjYWxsZXJIYXNoLFxuICAgIGRlcGxveUhhc2gsXG4gICAgcGF5bWVudEFtb3VudCxcbiAgICByZWZ1bmRBbW91bnQsXG4gICAgY2FsbGVyQ3Nwck5hbWUsXG4gIH0gPSBkZXBsb3k7XG5cbiAgY29uc3QgYWNjb3VudEluZm8gPSBnZXRBY2NvdW50SW5mbzxBY2NvdW50SW5mb1Jlc3VsdD4oXG4gICAgY2FsbGVyUHVibGljS2V5IHx8IGNhbGxlckhhc2gsXG4gICk7XG5cbiAgY29uc3QgYWNjb3VudEluZm9EZXRhaWxzID0gZGVyaXZlQWNjb3VudEluZm8oXG4gICAgYWNjb3VudEluZm8/LmFjY291bnRfaW5mbyB8fCBhY2NvdW50SW5mbz8uY2VudHJhbGl6ZWRfYWNjb3VudF9pbmZvLFxuICApO1xuXG4gIGNvbnN0IGxvZ28gPSBhY2NvdW50SW5mb0RldGFpbHMgJiYgYWNjb3VudEluZm9EZXRhaWxzPy5sb2dvO1xuICBjb25zdCBuYW1lID0gYWNjb3VudEluZm9EZXRhaWxzPy5uYW1lO1xuICBjb25zdCBjc3ByTmFtZSA9IGFjY291bnRJbmZvPy5jc3ByX25hbWUgfHwgZGVwbG95LmNhbGxlckNzcHJOYW1lO1xuXG4gIGNvbnN0IGtleVRvb2x0aXBDYXB0aW9uID0gaXNWYWxpZFB1YmxpY0tleShjYWxsZXJQdWJsaWNLZXkpXG4gICAgPyAnUHVibGljIEtleSdcbiAgICA6ICdBY2NvdW50IGhhc2gnO1xuXG4gIGNvbnN0IGNoYXJnZWRBbW91bnQgPSBCaWcocGF5bWVudEFtb3VudCB8fCAnMCcpXG4gICAgLm1pbnVzKHJlZnVuZEFtb3VudCB8fCAnMCcpXG4gICAgLnRvU3RyaW5nKCk7XG5cbiAgY29uc3Qgb25BYm92ZSA9IChcbiAgICA8RGVza3RvcEZlZWRJdGVtQ29udGFpbmVyIGl0ZW1zU3BhY2luZz17MTJ9PlxuICAgICAgPENvbW1vbkRhdGFDb250YWluZXI+XG4gICAgICAgIDxGbGV4Um93IGFsaWduPXsnY2VudGVyJ30+XG4gICAgICAgICAgPERlcGxveVN0YXR1cyBkZXBsb3lSZXN1bHQ9e2RlcGxveX0gc2l6ZT17RGVwbG95U3RhdHVzU2l6ZS5TbWFsbH0gLz5cbiAgICAgICAgICA8VG9vbHRpcCBzY2FsZT17J3hzJ30gbGluZUhlaWdodD17J3hzJ30gdG9vbHRpcENvbnRlbnQ9e2RlcGxveUhhc2h9PlxuICAgICAgICAgICAgPEJvZHlUZXh0IHNpemU9ezN9IHNjYWxlPXsnc20nfSBtb25vdHlwZT5cbiAgICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgICBocmVmPXtgJHtjc3ByTGl2ZURvbWFpblBhdGh9L3RyYW5zYWN0aW9uLyR7ZGVwbG95LmRlcGxveUhhc2h9YH1cbiAgICAgICAgICAgICAgICBhcmlhRGVzY3JpcHRpb249eydMaW5rIHRvIGRlcGxveSBkZXRhaWxzJ31cbiAgICAgICAgICAgICAgICBjb2xvcj17J3ByaW1hcnlCbHVlJ31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtmb3JtYXRIYXNoKGRlcGxveUhhc2gsIEhhc2hMZW5ndGguVElOWSl9XG4gICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgIDwvQm9keVRleHQ+XG4gICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICA8L0ZsZXhSb3c+XG4gICAgICAgIDxGbGV4Um93IGp1c3RpZnk9eydmbGV4LWVuZCd9IGl0ZW1zU3BhY2luZz17OH0gYWxpZ249eydiYXNlbGluZSd9PlxuICAgICAgICAgIDxCb2R5VGV4dFxuICAgICAgICAgICAgc2NhbGU9eyd4cyd9XG4gICAgICAgICAgICBsaW5lSGVpZ2h0PXsneHMnfVxuICAgICAgICAgICAgc2l6ZT17M31cbiAgICAgICAgICAgIG5vV3JhcFxuICAgICAgICAgICAgdmFyaWF0aW9uPXsnZGFya0dyYXknfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtmb3JtYXRUaW1lc3RhbXBBZ2UoZGVwbG95LnRpbWVzdGFtcCl9XG4gICAgICAgICAgPC9Cb2R5VGV4dD5cbiAgICAgICAgICA8Qm9keVRleHQgc2NhbGU9eyd4cyd9IGxpbmVIZWlnaHQ9eyd4cyd9IHNpemU9ezN9IG5vV3JhcD5cbiAgICAgICAgICAgIMK3XG4gICAgICAgICAgPC9Cb2R5VGV4dD5cbiAgICAgICAgICA8Qm9keVRleHRcbiAgICAgICAgICAgIHNjYWxlPXsneHMnfVxuICAgICAgICAgICAgbGluZUhlaWdodD17J3hzJ31cbiAgICAgICAgICAgIHNpemU9ezN9XG4gICAgICAgICAgICBub1dyYXBcbiAgICAgICAgICAgIHZhcmlhdGlvbj17J2RhcmtHcmF5J31cbiAgICAgICAgICA+XG4gICAgICAgICAgICBCbG9jazpcbiAgICAgICAgICA8L0JvZHlUZXh0PlxuICAgICAgICAgIDxCb2R5VGV4dCBzaXplPXszfSBtb25vdHlwZT5cbiAgICAgICAgICAgIHtkZXBsb3kuYmxvY2tIYXNoID09IG51bGwgPyAoXG4gICAgICAgICAgICAgICdOL0EnXG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgIGhyZWY9e2Ake2NzcHJMaXZlRG9tYWluUGF0aH0vYmxvY2svJHtkZXBsb3kuYmxvY2tIYXNofWB9XG4gICAgICAgICAgICAgICAgYXJpYURlc2NyaXB0aW9uPXsnTGluayB0byBibG9jayBkZXRhaWxzJ31cbiAgICAgICAgICAgICAgICBjb2xvcj17J3ByaW1hcnlCbHVlJ31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtmb3JtYXROdW1iZXIoZGVwbG95LmJsb2NrSGVpZ2h0KX1cbiAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L0JvZHlUZXh0PlxuICAgICAgICAgIDxCb2R5VGV4dCBzY2FsZT17J3hzJ30gbGluZUhlaWdodD17J3hzJ30gc2l6ZT17M30gbm9XcmFwPlxuICAgICAgICAgICAgwrdcbiAgICAgICAgICA8L0JvZHlUZXh0PlxuXG4gICAgICAgICAgPEZsZXhSb3cgaXRlbXNTcGFjaW5nPXs0fSBhbGlnbj17J2Jhc2VsaW5lJ30+XG4gICAgICAgICAgICA8Qm9keVRleHRcbiAgICAgICAgICAgICAgc2NhbGU9eyd4cyd9XG4gICAgICAgICAgICAgIGxpbmVIZWlnaHQ9eyd4cyd9XG4gICAgICAgICAgICAgIHNpemU9ezN9XG4gICAgICAgICAgICAgIHZhcmlhdGlvbj17J2RhcmtHcmF5J31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQ2hhcmdlOlxuICAgICAgICAgICAgPC9Cb2R5VGV4dD5cbiAgICAgICAgICAgIDxCb2R5VGV4dCBzY2FsZT17J3hzJ30gbGluZUhlaWdodD17J3hzJ30gc2l6ZT17M30gbW9ub3R5cGUgbm9XcmFwPlxuICAgICAgICAgICAgICA8Q3NwckFtb3VudFxuICAgICAgICAgICAgICAgIG1vdGVzPXtjaGFyZ2VkQW1vdW50fVxuICAgICAgICAgICAgICAgIHByZWNpc2lvbkNhc2U9e1ByZWNpc2lvbkNhc2UuZGVwbG95Q29zdH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvQm9keVRleHQ+XG4gICAgICAgICAgPC9GbGV4Um93PlxuICAgICAgICA8L0ZsZXhSb3c+XG4gICAgICA8L0NvbW1vbkRhdGFDb250YWluZXI+XG5cbiAgICAgIDxGbGV4Um93IGl0ZW1zU3BhY2luZz17MTJ9PlxuICAgICAgICB7bG9nbyA/IChcbiAgICAgICAgICA8QXZhdGFyIHNyYz17bG9nb30gbG9hZGluZz17bG9hZGluZ30gYWx0PXsnQWNjb3VudCBsb2dvJ30gLz5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8QXZhdGFyIGhhc2g9e2NhbGxlclB1YmxpY0tleSB8fCBjYWxsZXJIYXNofSBsb2FkaW5nPXtsb2FkaW5nfSAvPlxuICAgICAgICApfVxuICAgICAgICA8U3R5bGVkRmxleENvbHVtbiBpdGVtc1NwYWNpbmc9ezEyfT5cbiAgICAgICAgICA8RmxleFJvdyBqdXN0aWZ5PXsnc3BhY2UtYmV0d2Vlbid9PlxuICAgICAgICAgICAgPEZsZXhSb3cgaXRlbXNTcGFjaW5nPXs4fT5cbiAgICAgICAgICAgICAgPFRvb2x0aXBXaXRoRXh0ZW5kZWRJbmZvXG4gICAgICAgICAgICAgICAgZXh0ZW5kZWRMaW5lPXt7IHRpdGxlOiBjc3ByTmFtZSwgY2FwdGlvbjogJ0NTUFIubmFtZScgfX1cbiAgICAgICAgICAgICAgICB0b29sdGlwQ2FwdGlvbj17a2V5VG9vbHRpcENhcHRpb259XG4gICAgICAgICAgICAgICAgaGFzaD17Y2FsbGVyUHVibGljS2V5IHx8IGNhbGxlckhhc2h9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8RmxleENvbHVtbj5cbiAgICAgICAgICAgICAgICAgIDxCb2R5VGV4dFxuICAgICAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0PXsneHMnfVxuICAgICAgICAgICAgICAgICAgICBzaXplPXszfVxuICAgICAgICAgICAgICAgICAgICBzY2FsZT1cInNtXCJcbiAgICAgICAgICAgICAgICAgICAgbW9ub3R5cGU9eyFjc3ByTmFtZX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgICAgICAgICBocmVmPXtgJHtjc3ByTGl2ZURvbWFpblBhdGh9L2FjY291bnQvJHtjYWxsZXJQdWJsaWNLZXl9YH1cbiAgICAgICAgICAgICAgICAgICAgICBhcmlhRGVzY3JpcHRpb249e2BMaW5rIHRvIEFjY291bnQgcGFnZWB9XG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I9eydwcmltYXJ5Qmx1ZSd9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7Y3Nwck5hbWUgfHwgZm9ybWF0SGFzaChjYWxsZXJQdWJsaWNLZXksIEhhc2hMZW5ndGguVElOWSl9XG4gICAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICAgIDwvQm9keVRleHQ+XG4gICAgICAgICAgICAgICAgPC9GbGV4Q29sdW1uPlxuICAgICAgICAgICAgICA8L1Rvb2x0aXBXaXRoRXh0ZW5kZWRJbmZvPlxuICAgICAgICAgICAgICA8RmxleFJvdz5cbiAgICAgICAgICAgICAgICA8VHJ1bmNhdGVCb3ggc2l6ZT17NX0+XG4gICAgICAgICAgICAgICAgICA8Qm9keVRleHQgc2l6ZT17M30gdmFyaWF0aW9uPVwiZGFya0dyYXlcIiBub1dyYXA+XG4gICAgICAgICAgICAgICAgICAgIHtuYW1lfVxuICAgICAgICAgICAgICAgICAgPC9Cb2R5VGV4dD5cbiAgICAgICAgICAgICAgICA8L1RydW5jYXRlQm94PlxuICAgICAgICAgICAgICA8L0ZsZXhSb3c+XG4gICAgICAgICAgICA8L0ZsZXhSb3c+XG4gICAgICAgICAgPC9GbGV4Um93PlxuICAgICAgICAgIDxGbGV4Um93PlxuICAgICAgICAgICAgPEZsZXhSb3cgaXRlbXNTcGFjaW5nPXs4fT5cbiAgICAgICAgICAgICAge2lzV0FTTVByb3h5VHJhbnNhY3Rpb24oZGVwbG95LmV4ZWN1dGlvblR5cGVJZCkgJiYgKFxuICAgICAgICAgICAgICAgIDxXYXNtUHJveHlCYWRnZSBsaW5lSGVpZ2h0PXsneHhzJ30gLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPEJvZHlUZXh0IHNpemU9ezN9IHNjYWxlPXsnc20nfSBsaW5lSGVpZ2h0PXsneHMnfT5cbiAgICAgICAgICAgICAgICA8V3JhcHBlZENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgIDxEZXBsb3lBY3Rpb25Sb3dcbiAgICAgICAgICAgICAgICAgICAgZGVwbG95PXtkZXBsb3l9XG4gICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbklkZW50aWZpY2F0aW9uSGFzaGVzPXthY3Rpb25JZGVudGlmaWNhdGlvbkhhc2hlc31cbiAgICAgICAgICAgICAgICAgICAgZ2V0QWNjb3VudEluZm89e2dldEFjY291bnRJbmZvfVxuICAgICAgICAgICAgICAgICAgICBnZXRDb250cmFjdEluZm9CeUhhc2g9e2dldENvbnRyYWN0SW5mb0J5SGFzaH1cbiAgICAgICAgICAgICAgICAgICAgZ2V0Q29udHJhY3RQYWNrYWdlSW5mb0J5SGFzaD17Z2V0Q29udHJhY3RQYWNrYWdlSW5mb0J5SGFzaH1cbiAgICAgICAgICAgICAgICAgICAgY3NwckxpdmVEb21haW5QYXRoPXtjc3ByTGl2ZURvbWFpblBhdGh9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvV3JhcHBlZENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPC9Cb2R5VGV4dD5cbiAgICAgICAgICAgIDwvRmxleFJvdz5cbiAgICAgICAgICA8L0ZsZXhSb3c+XG4gICAgICAgICAgPERlcGxveVJlc3VsdFJvd1xuICAgICAgICAgICAgZGVwbG95PXtkZXBsb3l9XG4gICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgICAgYWN0aW9uSWRlbnRpZmljYXRpb25IYXNoZXM9e2FjdGlvbklkZW50aWZpY2F0aW9uSGFzaGVzfVxuICAgICAgICAgICAgdmFyaWF0aW9uPXtSZXN1bHRSb3dWYXJpYXRpb24uZ3JheX1cbiAgICAgICAgICAgIGdldEFjY291bnRJbmZvPXtnZXRBY2NvdW50SW5mb31cbiAgICAgICAgICAgIGdldENvbnRyYWN0UGFja2FnZUluZm9CeUhhc2g9e2dldENvbnRyYWN0UGFja2FnZUluZm9CeUhhc2h9XG4gICAgICAgICAgICBjc3ByTGl2ZURvbWFpblBhdGg9e2NzcHJMaXZlRG9tYWluUGF0aH1cbiAgICAgICAgICAgIHNob3VsZENvbGxhcHNlXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9TdHlsZWRGbGV4Q29sdW1uPlxuICAgICAgPC9GbGV4Um93PlxuICAgIDwvRGVza3RvcEZlZWRJdGVtQ29udGFpbmVyPlxuICApO1xuXG4gIGNvbnN0IG9uTW9iaWxlID0gKFxuICAgIDxNb2JpbGVGZWVkSXRlbUNvbnRhaW5lcj5cbiAgICAgIDxGbGV4Um93IGp1c3RpZnk9eydzcGFjZS1iZXR3ZWVuJ30+XG4gICAgICAgIDxGbGV4Um93IGFsaWduPXsnY2VudGVyJ30+XG4gICAgICAgICAgPERlcGxveVN0YXR1cyBkZXBsb3lSZXN1bHQ9e2RlcGxveX0gc2l6ZT17RGVwbG95U3RhdHVzU2l6ZS5TbWFsbH0gLz5cbiAgICAgICAgICA8VG9vbHRpcCB0b29sdGlwQ29udGVudD17ZGVwbG95SGFzaH0gc2NhbGU9eyd4cyd9IGxpbmVIZWlnaHQ9eyd4cyd9PlxuICAgICAgICAgICAgPEJvZHlUZXh0IHNjYWxlPXsneHMnfSBsaW5lSGVpZ2h0PXsneHMnfSBzaXplPXszfSBtb25vdHlwZT5cbiAgICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgICBocmVmPXtgJHtjc3ByTGl2ZURvbWFpblBhdGh9L3RyYW5zYWN0aW9uLyR7ZGVwbG95LmRlcGxveUhhc2h9YH1cbiAgICAgICAgICAgICAgICBhcmlhRGVzY3JpcHRpb249eydMaW5rIHRvIGRlcGxveSBkZXRhaWxzJ31cbiAgICAgICAgICAgICAgICBjb2xvcj17J3ByaW1hcnlCbHVlJ31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtmb3JtYXRIYXNoKGRlcGxveUhhc2gsIEhhc2hMZW5ndGguVElOWSl9XG4gICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgIDwvQm9keVRleHQ+XG4gICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICA8L0ZsZXhSb3c+XG4gICAgICAgIDxGbGV4Um93IGl0ZW1zU3BhY2luZz17NH0gYWxpZ249eydiYXNlbGluZSd9PlxuICAgICAgICAgIDxCb2R5VGV4dFxuICAgICAgICAgICAgc2NhbGU9eyd4cyd9XG4gICAgICAgICAgICBsaW5lSGVpZ2h0PXsneHMnfVxuICAgICAgICAgICAgc2l6ZT17M31cbiAgICAgICAgICAgIHZhcmlhdGlvbj17J2RhcmtHcmF5J31cbiAgICAgICAgICA+XG4gICAgICAgICAgICBDaGFyZ2U6XG4gICAgICAgICAgPC9Cb2R5VGV4dD5cbiAgICAgICAgICA8Qm9keVRleHQgc2NhbGU9eyd4cyd9IGxpbmVIZWlnaHQ9eyd4cyd9IHNpemU9ezN9IG1vbm90eXBlIG5vV3JhcD5cbiAgICAgICAgICAgIDxDc3ByQW1vdW50XG4gICAgICAgICAgICAgIG1vdGVzPXtjaGFyZ2VkQW1vdW50fVxuICAgICAgICAgICAgICBwcmVjaXNpb25DYXNlPXtQcmVjaXNpb25DYXNlLmRlcGxveUNvc3R9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvQm9keVRleHQ+XG4gICAgICAgIDwvRmxleFJvdz5cbiAgICAgIDwvRmxleFJvdz5cbiAgICAgIDxGbGV4Q29sdW1uIGl0ZW1zU3BhY2luZz17MTJ9PlxuICAgICAgICA8QWRkcmVzc1xuICAgICAgICAgIGxvZ289e2xvZ299XG4gICAgICAgICAgbmFtZT17bmFtZX1cbiAgICAgICAgICBoYXNoPXtjYWxsZXJQdWJsaWNLZXkgfHwgY2FsbGVySGFzaH1cbiAgICAgICAgICBjc3ByTmFtZT17Y2FsbGVyQ3Nwck5hbWUgfHwgY3Nwck5hbWV9XG4gICAgICAgICAgbG9hZGluZz17bG9hZGluZ31cbiAgICAgICAgICBuYXZpZ2F0ZVRvUGF0aD17YCR7Y3NwckxpdmVEb21haW5QYXRofS9hY2NvdW50LyR7Y2FsbGVyUHVibGljS2V5IHx8IGNhbGxlckhhc2h9YH1cbiAgICAgICAgICBhdmF0YXJTaXplPXsnc21hbGwnfVxuICAgICAgICAgIGhhc2hGb250U2l6ZT17J3NtJ31cbiAgICAgICAgICBtaW5pZmllZENvcHlOb3RpZmljYXRpb25cbiAgICAgICAgLz5cblxuICAgICAgICA8RmxleFJvdyBpdGVtc1NwYWNpbmc9ezh9PlxuICAgICAgICAgIHtpc1dBU01Qcm94eVRyYW5zYWN0aW9uKGRlcGxveS5leGVjdXRpb25UeXBlSWQpICYmIChcbiAgICAgICAgICAgIDxXYXNtUHJveHlCYWRnZSBsaW5lSGVpZ2h0PXsneHhzJ30gLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxCb2R5VGV4dCBzaXplPXszfSBzY2FsZT17J3NtJ30gbGluZUhlaWdodD17J3hzJ30+XG4gICAgICAgICAgICA8V3JhcHBlZENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgPERlcGxveUFjdGlvblJvd1xuICAgICAgICAgICAgICAgIGRlcGxveT17ZGVwbG95fVxuICAgICAgICAgICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XG4gICAgICAgICAgICAgICAgYWN0aW9uSWRlbnRpZmljYXRpb25IYXNoZXM9e2FjdGlvbklkZW50aWZpY2F0aW9uSGFzaGVzfVxuICAgICAgICAgICAgICAgIGdldEFjY291bnRJbmZvPXtnZXRBY2NvdW50SW5mb31cbiAgICAgICAgICAgICAgICBnZXRDb250cmFjdEluZm9CeUhhc2g9e2dldENvbnRyYWN0SW5mb0J5SGFzaH1cbiAgICAgICAgICAgICAgICBnZXRDb250cmFjdFBhY2thZ2VJbmZvQnlIYXNoPXtnZXRDb250cmFjdFBhY2thZ2VJbmZvQnlIYXNofVxuICAgICAgICAgICAgICAgIGNzcHJMaXZlRG9tYWluUGF0aD17Y3NwckxpdmVEb21haW5QYXRofVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9XcmFwcGVkQ29udGFpbmVyPlxuICAgICAgICAgIDwvQm9keVRleHQ+XG4gICAgICAgIDwvRmxleFJvdz5cbiAgICAgIDwvRmxleENvbHVtbj5cbiAgICAgIDxGbGV4Q29sdW1uIGl0ZW1zU3BhY2luZz17MTZ9PlxuICAgICAgICA8QmxvY2tGZWVkSW5mb1xuICAgICAgICAgIGRlcGxveT17ZGVwbG95fVxuICAgICAgICAgIHBhdGg9e2Ake2NzcHJMaXZlRG9tYWluUGF0aH0vYmxvY2svJHtkZXBsb3kuYmxvY2tIYXNofWB9XG4gICAgICAgIC8+XG4gICAgICAgIDxEZXBsb3lSZXN1bHRSb3dcbiAgICAgICAgICBkZXBsb3k9e2RlcGxveX1cbiAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxuICAgICAgICAgIHZhcmlhdGlvbj17UmVzdWx0Um93VmFyaWF0aW9uLmdyYXl9XG4gICAgICAgICAgYWN0aW9uSWRlbnRpZmljYXRpb25IYXNoZXM9e2FjdGlvbklkZW50aWZpY2F0aW9uSGFzaGVzfVxuICAgICAgICAgIGdldEFjY291bnRJbmZvPXtnZXRBY2NvdW50SW5mb31cbiAgICAgICAgICBnZXRDb250cmFjdFBhY2thZ2VJbmZvQnlIYXNoPXtnZXRDb250cmFjdFBhY2thZ2VJbmZvQnlIYXNofVxuICAgICAgICAgIGNzcHJMaXZlRG9tYWluUGF0aD17Y3NwckxpdmVEb21haW5QYXRofVxuICAgICAgICAgIHNob3VsZENvbGxhcHNlXG4gICAgICAgIC8+XG4gICAgICA8L0ZsZXhDb2x1bW4+XG4gICAgPC9Nb2JpbGVGZWVkSXRlbUNvbnRhaW5lcj5cbiAgKTtcbiAgY29uc3QgcmVzcG9uc2l2ZUZlZWRJdGVtID0gdXNlTWF0Y2hNZWRpYTxhbnk+KFxuICAgIFtvbk1vYmlsZSwgb25BYm92ZSwgb25BYm92ZSwgb25BYm92ZV0sXG4gICAgW2RlcGxveSwgYWNjb3VudEluZm9dLFxuICApO1xuXG4gIHJldHVybiA8U3R5bGVkUGFnZVRpbGU+e3Jlc3BvbnNpdmVGZWVkSXRlbX08L1N0eWxlZFBhZ2VUaWxlPjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFjdGl2aXR5RmVlZEl0ZW07XG4iXX0=