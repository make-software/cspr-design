import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React from 'react';
import styled from 'styled-components';
import { matchSize } from '../../utils/match-size';
import { FormField, FormFieldStatus } from '../form-field/form-field';
import SvgIcon from '../svg-icon/svg-icon';
import { LabelFontSize } from '../../types';
import { ErrorIcon } from '../../icons-index';
const getThemeColorByError = (error) => {
    if (error == null || !error) {
        return 'fillSecondary';
    }
    return 'contentRed';
};
const InputContainer = styled('div')(({ theme, disabled, error, monotype, height = '36' }) => ({
    display: 'flex',
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
    padding: '0 16px',
    borderRadius: theme.borderRadius.base,
    color: theme.styleguideColors.contentPrimary,
    background: theme.styleguideColors.fillSecondary,
    caretColor: theme.styleguideColors.fillPrimaryRed,
    fontFamily: monotype
        ? theme.typography.fontFamily.mono
        : theme.typography.fontFamily.primary,
    fontSize: '0.875rem',
    lineHeight: matchSize({ '36': '20px', '40': '20px' }, height),
    height: matchSize({ '36': '36px', '40': '40px' }, height),
    path: {
        fill: theme.styleguideColors[getThemeColorByError(error)],
    },
    ...(error && {
        border: `1px solid ${theme.styleguideColors.borderRed}`,
    }),
    ...(disabled && {
        opacity: 0.5,
        color: theme.styleguideColors.contentTertiary,
    }),
}));
const StyledInput = styled.input(({ theme }) => ({
    color: 'inherit',
    background: 'inherit',
    fontFamily: 'inherit',
    fontSize: 'inherit',
    border: 'none',
    width: '100%',
    padding: 0,
    '&[type=number]:focus, &[type=number]:blur': {
        '-moz-appearance': 'number-input',
    },
    '&[type=number]': {
        '-moz-appearance': 'textfield',
        '&::-webkit-inner-spin-button, &::-webkit-outer-spin-button': {
            margin: 0,
            '-webkit-appearance': 'none',
            'pointer-events': 'none',
        },
    },
    '&::placeholder': {
        color: theme.styleguideColors.contentSecondary,
    },
}));
const PrefixContainer = styled('div')(({ theme }) => ({
    marginRight: 16,
    color: theme.styleguideColors.contentSecondary,
    path: {
        fill: theme.styleguideColors.contentSecondary,
    },
}));
const SuffixContainer = styled('div')(({ theme }) => ({
    marginLeft: 16,
}));
const SuffixTextContainer = styled(SuffixContainer)(({ theme }) => ({
    color: theme.styleguideColors.contentSecondary,
}));
export var InputValidationType;
(function (InputValidationType) {
    InputValidationType["PositiveInteger"] = "positive_int";
    InputValidationType["CSPR"] = "cspr";
    InputValidationType["email"] = "email";
    InputValidationType["password"] = "password";
})(InputValidationType || (InputValidationType = {}));
export const InputRef = React.forwardRef(function InputRef(props, ref) {
    return _jsx(StyledInput, { ...props, ref: ref });
});
export function Input({ id, className, style, disabled, monotype, height, label, rightLabel, prefixIcon, suffixIcon, suffixText, required, error, validationType, validationText, onFocus, name, labelFontSize = LabelFontSize.default, ...restProps }) {
    const validationProps = validationType == null
        ? undefined
        : {
            [InputValidationType.CSPR]: {
                type: 'number',
                min: '0',
                max: '0',
                step: '0',
            },
            [InputValidationType.PositiveInteger]: {
                type: 'number',
                min: '1',
                max: '1',
                step: '0',
            },
            [InputValidationType.email]: {
                type: 'email',
            },
            [InputValidationType.password]: {
                type: 'password',
            },
        }[validationType];
    const handleFocus = (event) => {
        event.target.select();
        onFocus && onFocus(event);
    };
    if (error) {
        suffixIcon = _jsx(SvgIcon, { src: ErrorIcon });
    }
    return (_jsx(FormField, { id: id, className: className, style: style, label: label, rightLabel: rightLabel, status: error ? FormFieldStatus.Error : undefined, statusText: validationText, disabled: disabled, labelFontSize: labelFontSize, children: _jsxs(InputContainer, { monotype: monotype, error: error, height: height, children: [prefixIcon && _jsx(PrefixContainer, { children: prefixIcon }), _jsx(InputRef, { title: "", disabled: disabled, onFocus: handleFocus, name: name, "aria-required": !!required, "aria-labelledby": id, ...validationProps, ...restProps }), suffixIcon && _jsx(SuffixContainer, { children: suffixIcon }), suffixText && _jsx(SuffixTextContainer, { children: suffixText })] }) }));
}
export default Input;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL2NvbXBvbmVudHMvaW5wdXQvaW5wdXQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEtBQW9CLE1BQU0sT0FBTyxDQUFDO0FBQ3pDLE9BQU8sTUFBTSxNQUFNLG1CQUFtQixDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsU0FBUyxFQUFFLGVBQWUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3RFLE9BQU8sT0FBTyxNQUFNLHNCQUFzQixDQUFDO0FBQzNDLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDNUMsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRTlDLE1BQU0sb0JBQW9CLEdBQUcsQ0FBQyxLQUFlLEVBQUUsRUFBRTtJQUMvQyxJQUFJLEtBQUssSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUM1QixPQUFPLGVBQWUsQ0FBQztJQUN6QixDQUFDO0lBRUQsT0FBTyxZQUFZLENBQUM7QUFDdEIsQ0FBQyxDQUFDO0FBRUYsTUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUNsQyxDQUFDLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLE1BQU0sR0FBRyxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN4RCxPQUFPLEVBQUUsTUFBTTtJQUNmLGFBQWEsRUFBRSxLQUFLO0lBQ3BCLGNBQWMsRUFBRSxlQUFlO0lBQy9CLFVBQVUsRUFBRSxRQUFRO0lBQ3BCLE9BQU8sRUFBRSxRQUFRO0lBQ2pCLFlBQVksRUFBRSxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUk7SUFDckMsS0FBSyxFQUFFLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjO0lBQzVD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Q1AsQ0FDYixDQUFDO0FBQ0osQ0FBQztBQUVELGVBQWUsS0FBSyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IFJlYWN0Tm9kZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgbWF0Y2hTaXplIH0gZnJvbSAnLi4vLi4vdXRpbHMvbWF0Y2gtc2l6ZSc7XG5pbXBvcnQgeyBGb3JtRmllbGQsIEZvcm1GaWVsZFN0YXR1cyB9IGZyb20gJy4uL2Zvcm0tZmllbGQvZm9ybS1maWVsZCc7XG5pbXBvcnQgU3ZnSWNvbiBmcm9tICcuLi9zdmctaWNvbi9zdmctaWNvbic7XG5pbXBvcnQgeyBMYWJlbEZvbnRTaXplIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuaW1wb3J0IHsgRXJyb3JJY29uIH0gZnJvbSAnLi4vLi4vaWNvbnMtaW5kZXgnO1xuXG5jb25zdCBnZXRUaGVtZUNvbG9yQnlFcnJvciA9IChlcnJvcj86IGJvb2xlYW4pID0+IHtcbiAgaWYgKGVycm9yID09IG51bGwgfHwgIWVycm9yKSB7XG4gICAgcmV0dXJuICdmaWxsU2Vjb25kYXJ5JztcbiAgfVxuXG4gIHJldHVybiAnY29udGVudFJlZCc7XG59O1xuXG5jb25zdCBJbnB1dENvbnRhaW5lciA9IHN0eWxlZCgnZGl2Jyk8SW5wdXRQcm9wcz4oXG4gICh7IHRoZW1lLCBkaXNhYmxlZCwgZXJyb3IsIG1vbm90eXBlLCBoZWlnaHQgPSAnMzYnIH0pID0+ICh7XG4gICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgcGFkZGluZzogJzAgMTZweCcsXG4gICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5ib3JkZXJSYWRpdXMuYmFzZSxcbiAgICBjb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5jb250ZW50UHJpbWFyeSxcbiAgICBiYWNrZ3JvdW5kOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmZpbGxTZWNvbmRhcnksXG4gICAgY2FyZXRDb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5maWxsUHJpbWFyeVJlZCxcbiAgICBmb250RmFtaWx5OiBtb25vdHlwZVxuICAgICAgPyB0aGVtZS50eXBvZ3JhcGh5LmZvbnRGYW1pbHkubW9ub1xuICAgICAgOiB0aGVtZS50eXBvZ3JhcGh5LmZvbnRGYW1pbHkucHJpbWFyeSxcbiAgICBmb250U2l6ZTogJzAuODc1cmVtJyxcbiAgICBsaW5lSGVpZ2h0OiBtYXRjaFNpemUoeyAnMzYnOiAnMjBweCcsICc0MCc6ICcyMHB4JyB9LCBoZWlnaHQpLFxuICAgIGhlaWdodDogbWF0Y2hTaXplKHsgJzM2JzogJzM2cHgnLCAnNDAnOiAnNDBweCcgfSwgaGVpZ2h0KSxcblxuICAgIHBhdGg6IHtcbiAgICAgIGZpbGw6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnNbZ2V0VGhlbWVDb2xvckJ5RXJyb3IoZXJyb3IpXSxcbiAgICB9LFxuXG4gICAgLi4uKGVycm9yICYmIHtcbiAgICAgIGJvcmRlcjogYDFweCBzb2xpZCAke3RoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuYm9yZGVyUmVkfWAsXG4gICAgfSksXG5cbiAgICAuLi4oZGlzYWJsZWQgJiYge1xuICAgICAgb3BhY2l0eTogMC41LFxuICAgICAgY29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuY29udGVudFRlcnRpYXJ5LFxuICAgIH0pLFxuICB9KSxcbik7XG5cbmNvbnN0IFN0eWxlZElucHV0ID0gc3R5bGVkLmlucHV0PElucHV0UHJvcHM+KCh7IHRoZW1lIH0pID0+ICh7XG4gIGNvbG9yOiAnaW5oZXJpdCcsXG4gIGJhY2tncm91bmQ6ICdpbmhlcml0JyxcbiAgZm9udEZhbWlseTogJ2luaGVyaXQnLFxuICBmb250U2l6ZTogJ2luaGVyaXQnLFxuICBib3JkZXI6ICdub25lJyxcbiAgd2lkdGg6ICcxMDAlJyxcbiAgcGFkZGluZzogMCxcbiAgJyZbdHlwZT1udW1iZXJdOmZvY3VzLCAmW3R5cGU9bnVtYmVyXTpibHVyJzoge1xuICAgICctbW96LWFwcGVhcmFuY2UnOiAnbnVtYmVyLWlucHV0JyxcbiAgfSxcbiAgJyZbdHlwZT1udW1iZXJdJzoge1xuICAgICctbW96LWFwcGVhcmFuY2UnOiAndGV4dGZpZWxkJyxcbiAgICAnJjo6LXdlYmtpdC1pbm5lci1zcGluLWJ1dHRvbiwgJjo6LXdlYmtpdC1vdXRlci1zcGluLWJ1dHRvbic6IHtcbiAgICAgIG1hcmdpbjogMCxcbiAgICAgICctd2Via2l0LWFwcGVhcmFuY2UnOiAnbm9uZScsXG4gICAgICAncG9pbnRlci1ldmVudHMnOiAnbm9uZScsXG4gICAgfSxcbiAgfSxcbiAgJyY6OnBsYWNlaG9sZGVyJzoge1xuICAgIGNvbG9yOiB0aGVtZS5zdHlsZWd1aWRlQ29sb3JzLmNvbnRlbnRTZWNvbmRhcnksXG4gIH0sXG59KSk7XG5cbmNvbnN0IFByZWZpeENvbnRhaW5lciA9IHN0eWxlZCgnZGl2JykoKHsgdGhlbWUgfSkgPT4gKHtcbiAgbWFyZ2luUmlnaHQ6IDE2LFxuICBjb2xvcjogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5jb250ZW50U2Vjb25kYXJ5LFxuICBwYXRoOiB7XG4gICAgZmlsbDogdGhlbWUuc3R5bGVndWlkZUNvbG9ycy5jb250ZW50U2Vjb25kYXJ5LFxuICB9LFxufSkpO1xuXG5jb25zdCBTdWZmaXhDb250YWluZXIgPSBzdHlsZWQoJ2RpdicpKCh7IHRoZW1lIH0pID0+ICh7XG4gIG1hcmdpbkxlZnQ6IDE2LFxufSkpO1xuXG5jb25zdCBTdWZmaXhUZXh0Q29udGFpbmVyID0gc3R5bGVkKFN1ZmZpeENvbnRhaW5lcikoKHsgdGhlbWUgfSkgPT4gKHtcbiAgY29sb3I6IHRoZW1lLnN0eWxlZ3VpZGVDb2xvcnMuY29udGVudFNlY29uZGFyeSxcbn0pKTtcblxuZXhwb3J0IGVudW0gSW5wdXRWYWxpZGF0aW9uVHlwZSB7XG4gIFBvc2l0aXZlSW50ZWdlciA9ICdwb3NpdGl2ZV9pbnQnLFxuICBDU1BSID0gJ2NzcHInLFxuICBlbWFpbCA9ICdlbWFpbCcsXG4gIHBhc3N3b3JkID0gJ3Bhc3N3b3JkJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnB1dFByb3BzXG4gIGV4dGVuZHMgUmVhY3QuSW5wdXRIVE1MQXR0cmlidXRlczxIVE1MSW5wdXRFbGVtZW50PiB7XG4gIHJlZj86IFJlYWN0LkZvcndhcmRlZFJlZjxIVE1MSW5wdXRFbGVtZW50PjtcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICBtb25vdHlwZT86IGJvb2xlYW47XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICB2YWx1ZT86IHN0cmluZyB8IG51bWJlcjtcbiAgb25DaGFuZ2U/OiAoZXY6IGFueSkgPT4gdm9pZDtcbiAgb25Gb2N1cz86IChldjogYW55KSA9PiB2b2lkO1xuICBvbkJsdXI/OiAoZXY6IGFueSkgPT4gdm9pZDtcbiAgb25LZXlEb3duPzogKGV2OiBhbnkpID0+IHZvaWQ7XG4gIGhlaWdodD86ICczNicgfCAnNDAnO1xuICBzdGVwPzogc3RyaW5nO1xuICBsYWJlbD86IFJlYWN0Tm9kZSB8IHN0cmluZztcbiAgbGFiZWxGb250U2l6ZT86IExhYmVsRm9udFNpemU7XG4gIHJpZ2h0TGFiZWw/OiBSZWFjdE5vZGUgfCBzdHJpbmc7XG4gIHByZWZpeEljb24/OiBSZWFjdE5vZGUgfCBudWxsO1xuICBzdWZmaXhJY29uPzogUmVhY3ROb2RlIHwgbnVsbDtcbiAgc3VmZml4VGV4dD86IHN0cmluZyB8IG51bGw7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIHJlcXVpcmVkPzogYm9vbGVhbjtcbiAgZXJyb3I/OiBib29sZWFuO1xuICB2YWxpZGF0aW9uVHlwZT86IElucHV0VmFsaWRhdGlvblR5cGU7XG4gIHZhbGlkYXRpb25UZXh0Pzogc3RyaW5nIHwgbnVsbDtcbn1cblxudHlwZSBSZWYgPSBIVE1MSW5wdXRFbGVtZW50O1xuXG5leHBvcnQgY29uc3QgSW5wdXRSZWYgPSBSZWFjdC5mb3J3YXJkUmVmPFJlZiwgSW5wdXRQcm9wcz4oZnVuY3Rpb24gSW5wdXRSZWYoXG4gIHByb3BzOiBJbnB1dFByb3BzLFxuICByZWYsXG4pIHtcbiAgcmV0dXJuIDxTdHlsZWRJbnB1dCB7Li4ucHJvcHN9IHJlZj17cmVmfSAvPjtcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gSW5wdXQoe1xuICBpZCxcbiAgY2xhc3NOYW1lLFxuICBzdHlsZSxcbiAgZGlzYWJsZWQsXG4gIG1vbm90eXBlLFxuICBoZWlnaHQsXG4gIGxhYmVsLFxuICByaWdodExhYmVsLFxuICBwcmVmaXhJY29uLFxuICBzdWZmaXhJY29uLFxuICBzdWZmaXhUZXh0LFxuICByZXF1aXJlZCxcbiAgZXJyb3IsXG4gIHZhbGlkYXRpb25UeXBlLFxuICB2YWxpZGF0aW9uVGV4dCxcbiAgb25Gb2N1cyxcbiAgbmFtZSxcbiAgbGFiZWxGb250U2l6ZSA9IExhYmVsRm9udFNpemUuZGVmYXVsdCxcbiAgLi4ucmVzdFByb3BzXG59OiBJbnB1dFByb3BzKSB7XG4gIGNvbnN0IHZhbGlkYXRpb25Qcm9wcyA9XG4gICAgdmFsaWRhdGlvblR5cGUgPT0gbnVsbFxuICAgICAgPyB1bmRlZmluZWRcbiAgICAgIDoge1xuICAgICAgICAgIFtJbnB1dFZhbGlkYXRpb25UeXBlLkNTUFJdOiB7XG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgIG1pbjogJzAnLFxuICAgICAgICAgICAgbWF4OiAnMCcsXG4gICAgICAgICAgICBzdGVwOiAnMCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBbSW5wdXRWYWxpZGF0aW9uVHlwZS5Qb3NpdGl2ZUludGVnZXJdOiB7XG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICAgIG1pbjogJzEnLFxuICAgICAgICAgICAgbWF4OiAnMScsXG4gICAgICAgICAgICBzdGVwOiAnMCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBbSW5wdXRWYWxpZGF0aW9uVHlwZS5lbWFpbF06IHtcbiAgICAgICAgICAgIHR5cGU6ICdlbWFpbCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBbSW5wdXRWYWxpZGF0aW9uVHlwZS5wYXNzd29yZF06IHtcbiAgICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgfVt2YWxpZGF0aW9uVHlwZV07XG5cbiAgY29uc3QgaGFuZGxlRm9jdXMgPSAoZXZlbnQpID0+IHtcbiAgICBldmVudC50YXJnZXQuc2VsZWN0KCk7XG4gICAgb25Gb2N1cyAmJiBvbkZvY3VzKGV2ZW50KTtcbiAgfTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICBzdWZmaXhJY29uID0gPFN2Z0ljb24gc3JjPXtFcnJvckljb259IC8+O1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8Rm9ybUZpZWxkXG4gICAgICBpZD17aWR9XG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgIGxhYmVsPXtsYWJlbH1cbiAgICAgIHJpZ2h0TGFiZWw9e3JpZ2h0TGFiZWx9XG4gICAgICBzdGF0dXM9e2Vycm9yID8gRm9ybUZpZWxkU3RhdHVzLkVycm9yIDogdW5kZWZpbmVkfVxuICAgICAgc3RhdHVzVGV4dD17dmFsaWRhdGlvblRleHR9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICBsYWJlbEZvbnRTaXplPXtsYWJlbEZvbnRTaXplfVxuICAgID5cbiAgICAgIDxJbnB1dENvbnRhaW5lciBtb25vdHlwZT17bW9ub3R5cGV9IGVycm9yPXtlcnJvcn0gaGVpZ2h0PXtoZWlnaHR9PlxuICAgICAgICB7cHJlZml4SWNvbiAmJiA8UHJlZml4Q29udGFpbmVyPntwcmVmaXhJY29ufTwvUHJlZml4Q29udGFpbmVyPn1cblxuICAgICAgICA8SW5wdXRSZWZcbiAgICAgICAgICB0aXRsZT1cIlwiXG4gICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgIG9uRm9jdXM9e2hhbmRsZUZvY3VzfVxuICAgICAgICAgIG5hbWU9e25hbWV9XG4gICAgICAgICAgYXJpYS1yZXF1aXJlZD17ISFyZXF1aXJlZH1cbiAgICAgICAgICBhcmlhLWxhYmVsbGVkYnk9e2lkfVxuICAgICAgICAgIHsuLi52YWxpZGF0aW9uUHJvcHN9XG4gICAgICAgICAgey4uLnJlc3RQcm9wc31cbiAgICAgICAgLz5cblxuICAgICAgICB7c3VmZml4SWNvbiAmJiA8U3VmZml4Q29udGFpbmVyPntzdWZmaXhJY29ufTwvU3VmZml4Q29udGFpbmVyPn1cblxuICAgICAgICB7c3VmZml4VGV4dCAmJiA8U3VmZml4VGV4dENvbnRhaW5lcj57c3VmZml4VGV4dH08L1N1ZmZpeFRleHRDb250YWluZXI+fVxuICAgICAgPC9JbnB1dENvbnRhaW5lcj5cbiAgICA8L0Zvcm1GaWVsZD5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSW5wdXQ7XG4iXX0=