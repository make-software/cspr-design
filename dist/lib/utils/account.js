import { isObjEmpty } from './object.tsx';
import { Conversions, PublicKey as CLPublicKey } from 'casper-js-sdk';
export const AccountModel = (input) => {
    const getRawPublicKey = () => {
        let value;
        if ('publicKeyHex' in input) {
            value = CLPublicKey.fromHex(input.publicKeyHex);
        }
        else if ('base64' in input) {
            // TODO: Seems like we are not using 'base64' input
            // TODO: base64 signer account will always use fromEd25519 because there is no prefix available
            // const bytes = Conversions.decodeBase64(input.base64);
            // value = CLPublicKey.fromEd25519(bytes);
        }
        else {
            throw Error('missing account key');
        }
        // @ts-ignore
        return value;
    };
    const getPublicKey = () => {
        // toAccountHex => sig key prefix + base16 (hex) hash
        return getRawPublicKey().toHex();
    };
    const getBase16AccountHash = () => {
        // toAccountHash => raw hash
        return Conversions.encodeBase16(getRawPublicKey().accountHash().toBytes());
    };
    const getBase64AccountHash = () => {
        // toAccountHash => raw hash
        return Conversions.encodeBase64(getRawPublicKey().accountHash().toBytes());
    };
    return {
        getPublicKey: getPublicKey,
        getAccountHash: getBase16AccountHash,
        getBase64AccountHash: getBase64AccountHash,
    };
};
export const getAccountInfoLogo = (accountInfo) => {
    if (!accountInfo)
        return null;
    const logo = accountInfo.info?.owner?.branding?.logo;
    if (logo?.svg) {
        return logo?.svg;
    }
    if (logo?.png_256) {
        return logo?.png_256;
    }
    return null;
};
export const getCentralizedAccountInfoLogo = (accountInfo) => {
    if (!accountInfo)
        return null;
    const logo = accountInfo.avatar_url;
    if (logo) {
        return logo;
    }
    return null;
};
/**
 * Derive account info from accountInfo or centralizedAccountInfo.
 * Reason for doing that, we have different interfaces for those objects.
 * @param accountInfoObj : AccountInfoResult | AccountCentralizedInfo
 */
export const deriveAccountInfo = (accountInfoObj) => {
    if (accountInfoObj == null) {
        return null;
    }
    const hasInfoStandard = !isObjEmpty(accountInfoObj?.info);
    if (hasInfoStandard) {
        return {
            name: accountInfoObj?.info?.owner?.name,
            logo: getAccountInfoLogo(accountInfoObj),
        };
    }
    return {
        name: accountInfoObj?.name,
        logo: getCentralizedAccountInfoLogo(accountInfoObj),
    };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjb3VudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvdXRpbHMvYWNjb3VudC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUUxQyxPQUFPLEVBQUUsV0FBVyxFQUFFLFNBQVMsSUFBSSxXQUFXLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFJdEUsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLENBQUMsS0FBWSxFQUFFLEVBQUU7SUFDM0MsTUFBTSxlQUFlLEdBQUcsR0FBRyxFQUFFO1FBQzNCLElBQUksS0FBa0IsQ0FBQztRQUV2QixJQUFJLGNBQWMsSUFBSSxLQUFLLEVBQUUsQ0FBQztZQUM1QixLQUFLLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDbEQsQ0FBQzthQUFNLElBQUksUUFBUSxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQzdCLG1EQUFtRDtZQUNuRCwrRkFBK0Y7WUFDL0Ysd0RBQXdEO1lBQ3hELDBDQUEwQztRQUM1QyxDQUFDO2FBQU0sQ0FBQztZQUNOLE1BQU0sS0FBSyxDQUFDLHFCQUFxQixDQUFDLENBQUM7UUFDckMsQ0FBQztRQUVELGFBQWE7UUFDYixPQUFPLEtBQUssQ0FBQztJQUNmLENBQUMsQ0FBQztJQUVGLE1BQU0sWUFBWSxHQUFHLEdBQUcsRUFBRTtRQUN4QixxREFBcUQ7UUFDckQsT0FBTyxlQUFlLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNuQyxDQUFDLENBQUM7SUFFRixNQUFNLG9CQUFvQixHQUFHLEdBQUcsRUFBRTtRQUNoQyw0QkFBNEI7UUFDNUIsT0FBTyxXQUFXLENBQUMsWUFBWSxDQUFDLGVBQWUsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDN0UsQ0FBQyxDQUFDO0lBRUYsTUFBTSxvQkFBb0IsR0FBRyxHQUFHLEVBQUU7UUFDaEMsNEJBQTRCO1FBQzVCLE9BQU8sV0FBVyxDQUFDLFlBQVksQ0FBQyxlQUFlLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBQzdFLENBQUMsQ0FBQztJQUVGLE9BQU87UUFDTCxZQUFZLEVBQUUsWUFBWTtRQUMxQixjQUFjLEVBQUUsb0JBQW9CO1FBQ3BDLG9CQUFvQixFQUFFLG9CQUFvQjtLQUMzQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sa0JBQWtCLEdBQUcsQ0FDOUIsV0FBaUQsRUFDcEMsRUFBRTtJQUNqQixJQUFJLENBQUMsV0FBVztRQUFFLE9BQU8sSUFBSSxDQUFDO0lBRTlCLE1BQU0sSUFBSSxHQUFHLFdBQVcsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUM7SUFFckQsSUFBSSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDZCxPQUFPLElBQUksRUFBRSxHQUFHLENBQUM7SUFDbkIsQ0FBQztJQUVELElBQUksSUFBSSxFQUFFLE9BQU8sRUFBRSxDQUFDO1FBQ2xCLE9BQU8sSUFBSSxFQUFFLE9BQU8sQ0FBQztJQUN2QixDQUFDO0lBRUQsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSw2QkFBNkIsR0FBRyxDQUN6QyxXQUFzRCxFQUN6QyxFQUFFO0lBQ2pCLElBQUksQ0FBQyxXQUFXO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFFOUIsTUFBTSxJQUFJLEdBQUcsV0FBVyxDQUFDLFVBQVUsQ0FBQztJQUVwQyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ1QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDLENBQUM7QUFFRjs7OztHQUlHO0FBQ0gsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQUcsQ0FDL0IsY0FBbUIsRUFDWSxFQUFFO0lBQ2pDLElBQUksY0FBYyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQzNCLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELE1BQU0sZUFBZSxHQUFHLENBQUMsVUFBVSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUUxRCxJQUFJLGVBQWUsRUFBRSxDQUFDO1FBQ3BCLE9BQU87WUFDTCxJQUFJLEVBQUUsY0FBYyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSTtZQUN2QyxJQUFJLEVBQUUsa0JBQWtCLENBQUMsY0FBYyxDQUFDO1NBQ3pDLENBQUM7SUFDSixDQUFDO0lBRUQsT0FBTztRQUNMLElBQUksRUFBRSxjQUFjLEVBQUUsSUFBSTtRQUMxQixJQUFJLEVBQUUsNkJBQTZCLENBQUMsY0FBYyxDQUFDO0tBQ3BELENBQUM7QUFDSixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc09iakVtcHR5IH0gZnJvbSAnLi9vYmplY3QudHN4JztcbmltcG9ydCB7QWNjb3VudENlbnRyYWxpemVkSW5mbywgQWNjb3VudEluZm9SZXN1bHQsIEdlbmVyYWxpemVkQWNjb3VudEluZm99IGZyb20gXCIuLi90eXBlcy90eXBlc1wiO1xuaW1wb3J0IHsgQ29udmVyc2lvbnMsIFB1YmxpY0tleSBhcyBDTFB1YmxpY0tleSB9IGZyb20gJ2Nhc3Blci1qcy1zZGsnO1xuXG50eXBlIElucHV0ID0geyBiYXNlNjQ6IHN0cmluZyB9IHwgeyBwdWJsaWNLZXlIZXg6IHN0cmluZyB9O1xuXG5leHBvcnQgY29uc3QgQWNjb3VudE1vZGVsID0gKGlucHV0OiBJbnB1dCkgPT4ge1xuICBjb25zdCBnZXRSYXdQdWJsaWNLZXkgPSAoKSA9PiB7XG4gICAgbGV0IHZhbHVlOiBDTFB1YmxpY0tleTtcblxuICAgIGlmICgncHVibGljS2V5SGV4JyBpbiBpbnB1dCkge1xuICAgICAgdmFsdWUgPSBDTFB1YmxpY0tleS5mcm9tSGV4KGlucHV0LnB1YmxpY0tleUhleCk7XG4gICAgfSBlbHNlIGlmICgnYmFzZTY0JyBpbiBpbnB1dCkge1xuICAgICAgLy8gVE9ETzogU2VlbXMgbGlrZSB3ZSBhcmUgbm90IHVzaW5nICdiYXNlNjQnIGlucHV0XG4gICAgICAvLyBUT0RPOiBiYXNlNjQgc2lnbmVyIGFjY291bnQgd2lsbCBhbHdheXMgdXNlIGZyb21FZDI1NTE5IGJlY2F1c2UgdGhlcmUgaXMgbm8gcHJlZml4IGF2YWlsYWJsZVxuICAgICAgLy8gY29uc3QgYnl0ZXMgPSBDb252ZXJzaW9ucy5kZWNvZGVCYXNlNjQoaW5wdXQuYmFzZTY0KTtcbiAgICAgIC8vIHZhbHVlID0gQ0xQdWJsaWNLZXkuZnJvbUVkMjU1MTkoYnl0ZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcignbWlzc2luZyBhY2NvdW50IGtleScpO1xuICAgIH1cblxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgY29uc3QgZ2V0UHVibGljS2V5ID0gKCkgPT4ge1xuICAgIC8vIHRvQWNjb3VudEhleCA9PiBzaWcga2V5IHByZWZpeCArIGJhc2UxNiAoaGV4KSBoYXNoXG4gICAgcmV0dXJuIGdldFJhd1B1YmxpY0tleSgpLnRvSGV4KCk7XG4gIH07XG5cbiAgY29uc3QgZ2V0QmFzZTE2QWNjb3VudEhhc2ggPSAoKSA9PiB7XG4gICAgLy8gdG9BY2NvdW50SGFzaCA9PiByYXcgaGFzaFxuICAgIHJldHVybiBDb252ZXJzaW9ucy5lbmNvZGVCYXNlMTYoZ2V0UmF3UHVibGljS2V5KCkuYWNjb3VudEhhc2goKS50b0J5dGVzKCkpO1xuICB9O1xuXG4gIGNvbnN0IGdldEJhc2U2NEFjY291bnRIYXNoID0gKCkgPT4ge1xuICAgIC8vIHRvQWNjb3VudEhhc2ggPT4gcmF3IGhhc2hcbiAgICByZXR1cm4gQ29udmVyc2lvbnMuZW5jb2RlQmFzZTY0KGdldFJhd1B1YmxpY0tleSgpLmFjY291bnRIYXNoKCkudG9CeXRlcygpKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldFB1YmxpY0tleTogZ2V0UHVibGljS2V5LFxuICAgIGdldEFjY291bnRIYXNoOiBnZXRCYXNlMTZBY2NvdW50SGFzaCxcbiAgICBnZXRCYXNlNjRBY2NvdW50SGFzaDogZ2V0QmFzZTY0QWNjb3VudEhhc2gsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QWNjb3VudEluZm9Mb2dvID0gKFxuICAgIGFjY291bnRJbmZvOiBBY2NvdW50SW5mb1Jlc3VsdCB8IG51bGwgfCB1bmRlZmluZWRcbik6IHN0cmluZyB8IG51bGwgPT4ge1xuICBpZiAoIWFjY291bnRJbmZvKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBsb2dvID0gYWNjb3VudEluZm8uaW5mbz8ub3duZXI/LmJyYW5kaW5nPy5sb2dvO1xuXG4gIGlmIChsb2dvPy5zdmcpIHtcbiAgICByZXR1cm4gbG9nbz8uc3ZnO1xuICB9XG5cbiAgaWYgKGxvZ28/LnBuZ18yNTYpIHtcbiAgICByZXR1cm4gbG9nbz8ucG5nXzI1NjtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldENlbnRyYWxpemVkQWNjb3VudEluZm9Mb2dvID0gKFxuICAgIGFjY291bnRJbmZvOiBBY2NvdW50Q2VudHJhbGl6ZWRJbmZvIHwgbnVsbCB8IHVuZGVmaW5lZFxuKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gIGlmICghYWNjb3VudEluZm8pIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IGxvZ28gPSBhY2NvdW50SW5mby5hdmF0YXJfdXJsO1xuXG4gIGlmIChsb2dvKSB7XG4gICAgcmV0dXJuIGxvZ287XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogRGVyaXZlIGFjY291bnQgaW5mbyBmcm9tIGFjY291bnRJbmZvIG9yIGNlbnRyYWxpemVkQWNjb3VudEluZm8uXG4gKiBSZWFzb24gZm9yIGRvaW5nIHRoYXQsIHdlIGhhdmUgZGlmZmVyZW50IGludGVyZmFjZXMgZm9yIHRob3NlIG9iamVjdHMuXG4gKiBAcGFyYW0gYWNjb3VudEluZm9PYmogOiBBY2NvdW50SW5mb1Jlc3VsdCB8IEFjY291bnRDZW50cmFsaXplZEluZm9cbiAqL1xuZXhwb3J0IGNvbnN0IGRlcml2ZUFjY291bnRJbmZvID0gKFxuICBhY2NvdW50SW5mb09iajogYW55XG4pOiBHZW5lcmFsaXplZEFjY291bnRJbmZvIHwgbnVsbCA9PiB7XG4gIGlmIChhY2NvdW50SW5mb09iaiA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBoYXNJbmZvU3RhbmRhcmQgPSAhaXNPYmpFbXB0eShhY2NvdW50SW5mb09iaj8uaW5mbyk7XG5cbiAgaWYgKGhhc0luZm9TdGFuZGFyZCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBhY2NvdW50SW5mb09iaj8uaW5mbz8ub3duZXI/Lm5hbWUsXG4gICAgICBsb2dvOiBnZXRBY2NvdW50SW5mb0xvZ28oYWNjb3VudEluZm9PYmopLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG5hbWU6IGFjY291bnRJbmZvT2JqPy5uYW1lLFxuICAgIGxvZ286IGdldENlbnRyYWxpemVkQWNjb3VudEluZm9Mb2dvKGFjY291bnRJbmZvT2JqKSxcbiAgfTtcbn07XG4iXX0=