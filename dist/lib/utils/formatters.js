import { createIntl, createIntlCache } from '@formatjs/intl';
var cache = createIntlCache();
var intl = createIntl({
    locale: 'en-US',
    messages: {
        'components.transaction_status': 'Success',
    },
}, cache);
export var HashLength;
(function (HashLength) {
    HashLength[HashLength["FULL"] = 0] = "FULL";
    HashLength[HashLength["TINY"] = 5] = "TINY";
    HashLength[HashLength["LITTLE"] = 10] = "LITTLE";
    HashLength[HashLength["SMALL"] = 15] = "SMALL";
    HashLength[HashLength["MEDIUM"] = 20] = "MEDIUM";
    HashLength[HashLength["LARGE"] = 25] = "LARGE";
})(HashLength || (HashLength = {}));
export var DEFAULT_PRECISION = 5;
export var FULL_PRECISION = 9;
var formatDistanceTokens = {
    lessThanXSeconds: 'second',
    xSeconds: 'second',
    lessThanXMinutes: 'minute',
    xMinutes: 'minute',
    xHours: 'hour',
    xDays: 'day',
    xMonths: 'month',
    xYears: 'year',
};
var BIG_NUMBERS_NOTATION_SYMBOL = [
    '',
    'k',
    'M',
    'B',
    'T',
    'Qa',
    'Qi',
    'Sx',
    'Sp',
    'O',
    'N',
    'D',
    'Ud',
    'Dd',
    'Td',
    'Qad',
    'Qid',
    'Sxd',
    'Spd',
    'Od',
    'Nd',
    'V',
    'Uv',
    'Dv',
    'Tv',
    'Qav',
    'Qiv',
    'Sxv',
    'Spv',
    'Ov',
    'Nv',
    'Tr',
    'Ut',
    'Dt',
    'G',
    'Tt', //Tretrigintillion
];
export var formatBigNumbers = function (value) {
    // determines symbol
    var tier = (Math.log10(Math.abs(value)) / 3) | 0;
    var tiersWithoutSuffixes = [0, 1, 2];
    if (tiersWithoutSuffixes.includes(tier)) {
        return formatNumber(value, {
            precision: 5,
        });
    }
    // get suffix and determine scale
    var suffix = BIG_NUMBERS_NOTATION_SYMBOL[tier];
    var scale = Math.pow(10, tier * 3);
    var scaledNumber = value / scale;
    return scaledNumber.toFixed(5) + suffix;
};
export var formatNumber = function (value, _a) {
    var _b = _a === void 0 ? {} : _a, precision = _b.precision, notation = _b.notation, compactDisplay = _b.compactDisplay;
    return intl.formatNumber(value, {
        minimumFractionDigits: precision || 0,
        maximumFractionDigits: precision || 0,
        notation: notation,
        compactDisplay: compactDisplay,
    });
};
export var formatCurrency = function (value, code, _a) {
    var _b = _a === void 0 ? {} : _a, precision = _b.precision;
    return intl.formatNumber(value, {
        style: 'currency',
        currency: code,
        minimumFractionDigits: precision,
        maximumFractionDigits: precision,
    });
};
export var formatTimestamp = function (value, locale) {
    if (locale === void 0) { locale = 'en'; }
    var date = new Date(value);
    var nativeIntl = new Intl.DateTimeFormat(locale, {
        month: 'short',
        day: 'numeric',
        year: 'numeric',
        hour: 'numeric',
        minute: 'numeric',
        second: 'numeric',
        timeZoneName: 'short',
    });
    return "".concat(nativeIntl.format(date));
};
export var formatDistance = function (token, count, options) {
    options = options || {};
    var locale = options.locale.code || 'en';
    return new Intl.RelativeTimeFormat(locale, {
        style: 'short',
    })
        .format(-count, formatDistanceTokens[token])
        .replace('.', '');
};
export var formatDate = function (value) {
    var date = new Date(value);
    return "".concat(intl.formatDate(date, {
        month: 'short',
        day: 'numeric',
        year: 'numeric',
    }), ", ").concat(intl.formatTime(date, {
        hour: 'numeric',
        minute: 'numeric',
    }));
};
export var formatDateShort = function (value) {
    var date = new Date(value);
    return "".concat(intl.formatDate(date, {
        month: 'short',
        day: 'numeric',
    }));
};
export var formatHash = function (hash, visibleHashLength) {
    if (visibleHashLength === void 0) { visibleHashLength = HashLength.TINY; }
    var MIN_TRUNCATE_HASH_LENGTH = HashLength.TINY * 2 + 3;
    var _a = hash.split('-'), hashWithoutSuffix = _a[0], lastDigits = _a[1];
    var hashLength = hashWithoutSuffix.length;
    if (visibleHashLength === HashLength.FULL ||
        hashLength <= MIN_TRUNCATE_HASH_LENGTH) {
        return hash;
    }
    var firstPart = hashWithoutSuffix.substring(0, visibleHashLength);
    var secondPart = hashWithoutSuffix.substring(hashLength - visibleHashLength);
    var truncatedHash = "".concat(firstPart, "...").concat(secondPart);
    return lastDigits ? "".concat(truncatedHash, "-").concat(lastDigits) : "".concat(truncatedHash);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWF0dGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvdXRpbHMvZm9ybWF0dGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTdELElBQU0sS0FBSyxHQUFHLGVBQWUsRUFBRSxDQUFDO0FBQ2hDLElBQU0sSUFBSSxHQUFHLFVBQVUsQ0FDckI7SUFDRSxNQUFNLEVBQUUsT0FBTztJQUNmLFFBQVEsRUFBRTtRQUNSLCtCQUErQixFQUFFLFNBQVM7S0FDM0M7Q0FDRixFQUNELEtBQUssQ0FDTixDQUFDO0FBRUYsTUFBTSxDQUFOLElBQVksVUFPWDtBQVBELFdBQVksVUFBVTtJQUNwQiwyQ0FBUSxDQUFBO0lBQ1IsMkNBQVEsQ0FBQTtJQUNSLGdEQUFXLENBQUE7SUFDWCw4Q0FBVSxDQUFBO0lBQ1YsZ0RBQVcsQ0FBQTtJQUNYLDhDQUFVLENBQUE7QUFDWixDQUFDLEVBUFcsVUFBVSxLQUFWLFVBQVUsUUFPckI7QUFFRCxNQUFNLENBQUMsSUFBTSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7QUFDbkMsTUFBTSxDQUFDLElBQU0sY0FBYyxHQUFHLENBQUMsQ0FBQztBQUVoQyxJQUFNLG9CQUFvQixHQUFHO0lBQzNCLGdCQUFnQixFQUFFLFFBQVE7SUFDMUIsUUFBUSxFQUFFLFFBQVE7SUFDbEIsZ0JBQWdCLEVBQUUsUUFBUTtJQUMxQixRQUFRLEVBQUUsUUFBUTtJQUNsQixNQUFNLEVBQUUsTUFBTTtJQUNkLEtBQUssRUFBRSxLQUFLO0lBQ1osT0FBTyxFQUFFLE9BQU87SUFDaEIsTUFBTSxFQUFFLE1BQU07Q0FDZixDQUFDO0FBRUYsSUFBTSwyQkFBMkIsR0FBRztJQUNsQyxFQUFFO0lBQ0YsR0FBRztJQUNILEdBQUc7SUFDSCxHQUFHO0lBQ0gsR0FBRztJQUNILElBQUk7SUFDSixJQUFJO0lBQ0osSUFBSTtJQUNK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S0FDZixDQUFDLENBQUUsQ0FBQztBQUNQLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxJQUFNLFVBQVUsR0FBRyxVQUN4QixJQUFZLEVBQ1osaUJBQStDO0lBQS9DLGtDQUFBLEVBQUEsb0JBQWdDLFVBQVUsQ0FBQyxJQUFJO0lBRS9DLElBQU0sd0JBQXdCLEdBQUcsVUFBVSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRW5ELElBQUEsS0FBa0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBaEQsaUJBQWlCLFFBQUEsRUFBRSxVQUFVLFFBQW1CLENBQUM7SUFFeEQsSUFBTSxVQUFVLEdBQUcsaUJBQWlCLENBQUMsTUFBTSxDQUFDO0lBRTVDLElBQ0UsaUJBQWlCLEtBQUssVUFBVSxDQUFDLElBQUk7UUFDckMsVUFBVSxJQUFJLHdCQUF3QixFQUN0QztRQUNBLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFFRCxJQUFNLFNBQVMsR0FBRyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLGlCQUFpQixDQUFDLENBQUM7SUFDcEUsSUFBTSxVQUFVLEdBQUcsaUJBQWlCLENBQUMsU0FBUyxDQUM1QyxVQUFVLEdBQUcsaUJBQWlCLENBQy9CLENBQUM7SUFFRixJQUFNLGFBQWEsR0FBRyxVQUFHLFNBQVMsZ0JBQU0sVUFBVSxDQUFFLENBQUM7SUFFckQsT0FBTyxVQUFVLENBQUMsQ0FBQyxDQUFDLFVBQUcsYUFBYSxjQUFJLFVBQVUsQ0FBRSxDQUFDLENBQUMsQ0FBQyxVQUFHLGFBQWEsQ0FBRSxDQUFDO0FBQzVFLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUludGwsIGNyZWF0ZUludGxDYWNoZSB9IGZyb20gJ0Bmb3JtYXRqcy9pbnRsJztcclxuXHJcbmNvbnN0IGNhY2hlID0gY3JlYXRlSW50bENhY2hlKCk7XHJcbmNvbnN0IGludGwgPSBjcmVhdGVJbnRsKFxyXG4gIHtcclxuICAgIGxvY2FsZTogJ2VuLVVTJyxcclxuICAgIG1lc3NhZ2VzOiB7XHJcbiAgICAgICdjb21wb25lbnRzLnRyYW5zYWN0aW9uX3N0YXR1cyc6ICdTdWNjZXNzJyxcclxuICAgIH0sXHJcbiAgfSxcclxuICBjYWNoZVxyXG4pO1xyXG5cclxuZXhwb3J0IGVudW0gSGFzaExlbmd0aCB7XHJcbiAgRlVMTCA9IDAsXHJcbiAgVElOWSA9IDUsXHJcbiAgTElUVExFID0gMTAsXHJcbiAgU01BTEwgPSAxNSxcclxuICBNRURJVU0gPSAyMCxcclxuICBMQVJHRSA9IDI1LFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9QUkVDSVNJT04gPSA1O1xyXG5leHBvcnQgY29uc3QgRlVMTF9QUkVDSVNJT04gPSA5O1xyXG5cclxuY29uc3QgZm9ybWF0RGlzdGFuY2VUb2tlbnMgPSB7XHJcbiAgbGVzc1RoYW5YU2Vjb25kczogJ3NlY29uZCcsXHJcbiAgeFNlY29uZHM6ICdzZWNvbmQnLFxyXG4gIGxlc3NUaGFuWE1pbnV0ZXM6ICdtaW51dGUnLFxyXG4gIHhNaW51dGVzOiAnbWludXRlJyxcclxuICB4SG91cnM6ICdob3VyJyxcclxuICB4RGF5czogJ2RheScsXHJcbiAgeE1vbnRoczogJ21vbnRoJyxcclxuICB4WWVhcnM6ICd5ZWFyJyxcclxufTtcclxuXHJcbmNvbnN0IEJJR19OVU1CRVJTX05PVEFUSU9OX1NZTUJPTCA9IFtcclxuICAnJyxcclxuICAnaycsIC8vVGhvdXNhbmRcclxuICAnTScsIC8vTWlsbGlvblxyXG4gICdCJywgLy9CaWxsaW9uXHJcbiAgJ1QnLCAvL1RyaWxsaW9uXHJcbiAgJ1FhJywgLy9RdWFkcmlsbGlvblxyXG4gICdRaScsIC8vUXVpbnRpbGxpb25cclxuICAnU3gnLCAvL1NleHRpbGxpb25cclxuICAnU3AnLCAvL1NlcHRpbGxpb25cclxuICAnTycsIC8vT2N0aWxsaW9uXHJcbiAgJ04nLCAvL05vbmlsbGlvblxyXG4gICdEJywgLy9EZWNpbGxpb25cclxuICAnVWQnLCAvL1VuZGVjaWxsaW9uXHJcbiAgJ0RkJywgLy9EdW9kZWNpbGxpb25cclxuICAnVGQnLCAvL1RyZWRlY2lsbGlvblxyXG4gICdRYWQnLCAvL1F1YXR0dW9yZGVjaWxsaW9uXHJcbiAgJ1FpZCcsIC8vUXVpbmRlY2lsbGlvblxyXG4gICdTeGQnLCAvL1NleGRlY2lsbGlvblxyXG4gICdTcGQnLCAvL1NlcHRlbmRlY2lsbGlvblxyXG4gICdPZCcsIC8vT2N0b2RlY2lsbGlvblxyXG4gICdOZCcsIC8vTm92ZW1kZWNpbGxpb25cclxuICAnVicsIC8vVmlnaW50aWxsaW9uXHJcbiAgJ1V2JywgLy9VbnZpZ2ludGlsbGlvblxyXG4gICdEdicsIC8vRHVvdmlnaW50aWxsaW9uXHJcbiAgJ1R2JywgLy9UcmV2aWdpbnRpbGxpb25cclxuICAnUWF2JywgLy9RdWF0dHVvcnZpZ2ludGlsbGlvblxyXG4gICdRaXYnLCAvL1F1aW52aWdpbnRpbGxpb25cclxuICAnU3h2JywgLy9TZXh2aWdpbnRpbGxpb25cclxuICAnU3B2JywgLy9TZXB0ZW52aWdpbnRpbGxpb25cclxuICAnT3YnLCAvL09jdG92aWdpbnRpbGxpb25cclxuICAnTnYnLCAvL05vdmVtdmlnaW50aWxsaW9uXHJcbiAgJ1RyJywgLy9UcmlnaW50aWxsaW9uXHJcbiAgJ1V0JywgLy9VbnRyaWdpbnRpbGxpb25cclxuICAnRHQnLCAvL0R1b3RyaWdpbnRpbGxpb25cclxuICAnRycsIC8vR29vZ29sXHJcbiAgJ1R0JywgLy9UcmV0cmlnaW50aWxsaW9uXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybWF0QmlnTnVtYmVycyA9ICh2YWx1ZSkgPT4ge1xyXG4gIC8vIGRldGVybWluZXMgc3ltYm9sXHJcbiAgY29uc3QgdGllciA9IChNYXRoLmxvZzEwKE1hdGguYWJzKHZhbHVlKSkgLyAzKSB8IDA7XHJcbiAgY29uc3QgdGllcnNXaXRob3V0U3VmZml4ZXMgPSBbMCwgMSwgMl07XHJcblxyXG4gIGlmICh0aWVyc1dpdGhvdXRTdWZmaXhlcy5pbmNsdWRlcyh0aWVyKSkge1xyXG4gICAgcmV0dXJuIGZvcm1hdE51bWJlcih2YWx1ZSwge1xyXG4gICAgICBwcmVjaXNpb246IDUsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIGdldCBzdWZmaXggYW5kIGRldGVybWluZSBzY2FsZVxyXG4gIGNvbnN0IHN1ZmZpeCA9IEJJR19OVU1CRVJTX05PVEFUSU9OX1NZTUJPTFt0aWVyXTtcclxuICBjb25zdCBzY2FsZSA9IE1hdGgucG93KDEwLCB0aWVyICogMyk7XHJcblxyXG4gIGNvbnN0IHNjYWxlZE51bWJlciA9IHZhbHVlIC8gc2NhbGU7XHJcblxyXG4gIHJldHVybiBzY2FsZWROdW1iZXIudG9GaXhlZCg1KSArIHN1ZmZpeDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtYXROdW1iZXIgPSAoXHJcbiAgdmFsdWU6IG51bWJlciB8IHN0cmluZyxcclxuICB7XHJcbiAgICBwcmVjaXNpb24sXHJcbiAgICBub3RhdGlvbixcclxuICAgIGNvbXBhY3REaXNwbGF5LFxyXG4gIH06IHtcclxuICAgIHByZWNpc2lvbj86IG51bWJlcjtcclxuICAgIG5vdGF0aW9uPzogJ2NvbXBhY3QnIHwgJ3N0YW5kYXJkJztcclxuICAgIGNvbXBhY3REaXNwbGF5PzogJ3Nob3J0JyB8ICdsb25nJztcclxuICB9ID0ge31cclxuKTogc3RyaW5nID0+IHtcclxuICByZXR1cm4gaW50bC5mb3JtYXROdW1iZXIodmFsdWUgYXMgbnVtYmVyLCB7XHJcbiAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IHByZWNpc2lvbiB8fCAwLFxyXG4gICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiBwcmVjaXNpb24gfHwgMCxcclxuICAgIG5vdGF0aW9uLFxyXG4gICAgY29tcGFjdERpc3BsYXksXHJcbiAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybWF0Q3VycmVuY3kgPSAoXHJcbiAgdmFsdWU6IG51bWJlciB8IHN0cmluZyxcclxuICBjb2RlOiBzdHJpbmcsXHJcbiAge1xyXG4gICAgcHJlY2lzaW9uLFxyXG4gIH06IHtcclxuICAgIHByZWNpc2lvbj86IG51bWJlcjtcclxuICB9ID0ge31cclxuKTogc3RyaW5nID0+IHtcclxuICByZXR1cm4gaW50bC5mb3JtYXROdW1iZXIodmFsdWUgYXMgbnVtYmVyLCB7XHJcbiAgICBzdHlsZTogJ2N1cnJlbmN5JyxcclxuICAgIGN1cnJlbmN5OiBjb2RlLFxyXG4gICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiBwcmVjaXNpb24sXHJcbiAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IHByZWNpc2lvbixcclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtYXRUaW1lc3RhbXAgPSAodmFsdWU6IHN0cmluZywgbG9jYWxlID0gJ2VuJyk6IHN0cmluZyA9PiB7XHJcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcclxuICBjb25zdCBuYXRpdmVJbnRsID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCB7XHJcbiAgICBtb250aDogJ3Nob3J0JyxcclxuICAgIGRheTogJ251bWVyaWMnLFxyXG4gICAgeWVhcjogJ251bWVyaWMnLFxyXG4gICAgaG91cjogJ251bWVyaWMnLFxyXG4gICAgbWludXRlOiAnbnVtZXJpYycsXHJcbiAgICBzZWNvbmQ6ICdudW1lcmljJyxcclxuICAgIHRpbWVab25lTmFtZTogJ3Nob3J0JyxcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGAke25hdGl2ZUludGwuZm9ybWF0KGRhdGUpfWA7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybWF0RGlzdGFuY2UgPSAodG9rZW4sIGNvdW50LCBvcHRpb25zKSA9PiB7XHJcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgY29uc3QgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUuY29kZSB8fCAnZW4nO1xyXG5cclxuICByZXR1cm4gbmV3IChJbnRsIGFzIGFueSkuUmVsYXRpdmVUaW1lRm9ybWF0KGxvY2FsZSwge1xyXG4gICAgc3R5bGU6ICdzaG9ydCcsXHJcbiAgfSlcclxuICAgIC5mb3JtYXQoLWNvdW50LCBmb3JtYXREaXN0YW5jZVRva2Vuc1t0b2tlbl0pXHJcbiAgICAucmVwbGFjZSgnLicsICcnKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtYXREYXRlID0gKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7XHJcbiAgcmV0dXJuIGAke2ludGwuZm9ybWF0RGF0ZShkYXRlLCB7XHJcbiAgICBtb250aDogJ3Nob3J0JyxcclxuICAgIGRheTogJ251bWVyaWMnLFxyXG4gICAgeWVhcjogJ251bWVyaWMnLFxyXG4gIH0pfSwgJHtpbnRsLmZvcm1hdFRpbWUoZGF0ZSwge1xyXG4gICAgaG91cjogJ251bWVyaWMnLFxyXG4gICAgbWludXRlOiAnbnVtZXJpYycsXHJcbiAgfSl9YDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtYXREYXRlU2hvcnQgPSAodmFsdWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcclxuICByZXR1cm4gYCR7aW50bC5mb3JtYXREYXRlKGRhdGUsIHtcclxuICAgIG1vbnRoOiAnc2hvcnQnLFxyXG4gICAgZGF5OiAnbnVtZXJpYycsXHJcbiAgfSl9YDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtYXRIYXNoID0gKFxyXG4gIGhhc2g6IHN0cmluZyxcclxuICB2aXNpYmxlSGFzaExlbmd0aDogSGFzaExlbmd0aCA9IEhhc2hMZW5ndGguVElOWVxyXG4pID0+IHtcclxuICBjb25zdCBNSU5fVFJVTkNBVEVfSEFTSF9MRU5HVEggPSBIYXNoTGVuZ3RoLlRJTlkgKiAyICsgMztcclxuXHJcbiAgY29uc3QgW2hhc2hXaXRob3V0U3VmZml4LCBsYXN0RGlnaXRzXSA9IGhhc2guc3BsaXQoJy0nKTtcclxuXHJcbiAgY29uc3QgaGFzaExlbmd0aCA9IGhhc2hXaXRob3V0U3VmZml4Lmxlbmd0aDtcclxuXHJcbiAgaWYgKFxyXG4gICAgdmlzaWJsZUhhc2hMZW5ndGggPT09IEhhc2hMZW5ndGguRlVMTCB8fFxyXG4gICAgaGFzaExlbmd0aCA8PSBNSU5fVFJVTkNBVEVfSEFTSF9MRU5HVEhcclxuICApIHtcclxuICAgIHJldHVybiBoYXNoO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZmlyc3RQYXJ0ID0gaGFzaFdpdGhvdXRTdWZmaXguc3Vic3RyaW5nKDAsIHZpc2libGVIYXNoTGVuZ3RoKTtcclxuICBjb25zdCBzZWNvbmRQYXJ0ID0gaGFzaFdpdGhvdXRTdWZmaXguc3Vic3RyaW5nKFxyXG4gICAgaGFzaExlbmd0aCAtIHZpc2libGVIYXNoTGVuZ3RoXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgdHJ1bmNhdGVkSGFzaCA9IGAke2ZpcnN0UGFydH0uLi4ke3NlY29uZFBhcnR9YDtcclxuXHJcbiAgcmV0dXJuIGxhc3REaWdpdHMgPyBgJHt0cnVuY2F0ZWRIYXNofS0ke2xhc3REaWdpdHN9YCA6IGAke3RydW5jYXRlZEhhc2h9YDtcclxufTtcclxuXHJcbiJdfQ==